webpackJsonp([21],{1216:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),n=function(e){return e&&e.__esModule?e:{default:e}}(a),l=t(48),r=function(){return n.default.createElement(l.DocumentTitle,{title:"Access Token Authenticator"},n.default.createElement("span",null,n.default.createElement(l.PageHeader,{title:"Access Token Authenticator",subpage:!0},n.default.createElement("span",null,"Each user can generate access tokens to avoid having to use their main password in insecure scripts.")),n.default.createElement("span",null,"There currently is no configuration available for access tokens. You can safely disable this authenticator if you do not use access tokens.")))};exports.default=r,e.exports=exports.default},1217:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var n=t(2),l=a(n),r=t(15),s=t(261),o=a(s),i=t(48),u=t(75),d=a(u),c=t(259),f=a(c),p=t(951),m=a(p),h=l.default.createClass({displayName:"AuthProvidersConfig",propTypes:{config:l.default.PropTypes.object.isRequired,descriptors:l.default.PropTypes.object.isRequired,updateConfig:l.default.PropTypes.func.isRequired,history:l.default.PropTypes.object.isRequired},getDefaultProps:function(){return{config:{disabled_realms:[],realm_order:[]}}},getInitialState:function(){return{config:{disabled_realms:this.props.config.disabled_realms,realm_order:this.props.config.realm_order}}},_openModal:function(){this.refs.configModal.open()},_closeModal:function(){this.refs.configModal.close()},_saveConfig:function(){var e=this;this._hasNoActiveRealm()||this.props.updateConfig(this.state.config).then(function(){e._closeModal()})},_resetConfig:function(){this.setState(this.getInitialState())},_onCancel:function(){this.props.history.pushState(null,d.default.SYSTEM.AUTHENTICATION.OVERVIEW)},_updateSorting:function(e){var t=f.default.clone(this.state.config);t.realm_order=e.map(function(e){return e.id}),this.setState({config:t})},_toggleStatus:function(e){var t=this;return function(){var a=t.state.config.disabled_realms,n=f.default.clone(t.state.config);t.refs[e].checked?n.disabled_realms=a.filter(function(t){return t!==e}):-1===a.indexOf(e)&&n.disabled_realms.push(e),t.setState({config:n})}},_hasNoActiveRealm:function(){return this.state.config.disabled_realms.length>=this.state.config.realm_order.length},_noActiveRealmWarning:function(){return this._hasNoActiveRealm()?l.default.createElement(r.Alert,{bsStyle:"danger"},l.default.createElement("strong",null,"ERROR:")," No active authentication provider!"):null},_summary:function(){var e=this;return this.state.config.realm_order.map(function(t,a){var n=e.state.config.disabled_realms.filter(function(e){return e===t}).length>0?"disabled":"active",r=e.props.descriptors[t]||{id:t,title:"Unavailable"};return l.default.createElement("tr",{key:a},l.default.createElement("td",null,a+1),l.default.createElement("td",null,r.displayName),l.default.createElement("td",null,r.description),l.default.createElement("td",null,n))})},_sortableItems:function(){var e=this;return this.state.config.realm_order.map(function(t){var a=e.props.descriptors[t]||{id:t,title:"Unavailable"};return{id:a.name,title:a.displayName}})},_statusForm:function(){var e=this;return f.default.clone(this.state.config.realm_order).sort(function(e,t){return(0,m.default)(e.displayName,t.displayName)}).map(function(t,a){var n=e.state.config.disabled_realms.filter(function(e){return e===t}).length<1,r=e.props.descriptors[t]||{id:t,displayName:"Unavailable"};return l.default.createElement("tr",{key:a},l.default.createElement("td",null,r.displayName),l.default.createElement("td",null,l.default.createElement("input",{ref:r.name,type:"checkbox",checked:n,disabled:!r.canBeDisabled,onChange:e._toggleStatus(r.name)})))})},render:function(){return l.default.createElement(i.DocumentTitle,{title:"Authentication Providers"},l.default.createElement("span",null,l.default.createElement(i.PageHeader,{title:"Authentication Providers",subpage:!0},l.default.createElement("span",null,"The following authentication providers executed in order during login. Disabled providers will be skipped.",l.default.createElement("br",null),"A user is authenticated by the first matching provider, a successful match can cause a Graylog account for this user to be created.")),l.default.createElement(r.Row,null,l.default.createElement(r.Col,{md:6},l.default.createElement(r.Table,{striped:!0,bordered:!0,className:"top-margin"},l.default.createElement("thead",null,l.default.createElement("tr",null,l.default.createElement("th",null,"#"),l.default.createElement("th",null,"Provider"),l.default.createElement("th",null,"Description"),l.default.createElement("th",null,"Status"))),l.default.createElement("tbody",null,this._summary())),l.default.createElement(i.IfPermitted,{permissions:"clusterconfigentry:edit"},l.default.createElement(r.Button,{bsStyle:"primary",onClick:this._openModal,className:"save-button-margin"},"Update"),l.default.createElement(r.Button,{onClick:this._onCancel},"Cancel")),l.default.createElement(o.default,{ref:"configModal",title:"Update Authentication Provider Configuration",onSubmitForm:this._saveConfig,onModalClose:this._resetConfig,submitButtonText:"Save"},l.default.createElement("h3",null,"Order"),l.default.createElement("p",null,"Use drag and drop to change the execution order of the authentication providers."),l.default.createElement(i.SortableList,{items:this._sortableItems(),onMoveItem:this._updateSorting}),l.default.createElement("h3",null,"Status"),l.default.createElement("p",null,"Change the checkboxes to change the status of an authentication provider."),l.default.createElement(r.Table,{striped:!0,bordered:!0,condensed:!0,className:"top-margin"},l.default.createElement("thead",null,l.default.createElement("tr",null,l.default.createElement("th",null,"Provider"),l.default.createElement("th",null,"Enabled"))),l.default.createElement("tbody",null,this._statusForm())),this._noActiveRealmWarning())))))}});exports.default=h,e.exports=exports.default},1218:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var n=t(2),l=a(n),r=t(1),s=a(r),o=t(15),i=t(949),u=t(75),d=a(u),c=t(48),f=t(258),p=t(165),m=a(p),h=t(1217),g=a(h),E=t(7),y=a(E),b=t(18),_=a(b),S=t(1493),v=a(S),C=y.default.getActions("Authentication"),P=_.default.getStore("Authentication"),A=_.default.getStore("CurrentUser"),N=l.default.createClass({displayName:"AuthenticationComponent",propTypes:{location:l.default.PropTypes.object.isRequired,params:l.default.PropTypes.object.isRequired,history:l.default.PropTypes.object.isRequired,children:l.default.PropTypes.element},mixins:[s.default.connect(P),s.default.connect(A),m.default],componentDidMount:function(){var e=this;C.load(),f.PluginStore.exports("authenticatorConfigurations").forEach(function(t){e.authenticatorConfigurations[t.name]=t})},authenticatorConfigurations:{},_pluginPane:function(){var e=this.props.params.name,t=this.authenticatorConfigurations[e];return t?l.default.createElement(t.component,{key:"auth-configuration-"+e,history:this.props.history}):l.default.createElement(o.Alert,{bsStyle:"danger"},"Plugin component missing for authenticator ",l.default.createElement("code",null,e),", this is an error.")},_onUpdateProviders:function(e){return C.update("providers",e)},_contentComponent:function(){return this.state.authenticators?void 0===this.props.params.name?l.default.createElement(g.default,{config:this.state.authenticators,descriptors:this.authenticatorConfigurations,updateConfig:this._onUpdateProviders,history:this.props.history}):this._pluginPane():l.default.createElement(c.Spinner,null)},render:function(){var e=this,t=[],a=this.state.authenticators;a?this.isPermitted(this.state.currentUser.permissions,["authentication:edit"])&&(t=a.realm_order.map(function(t,a){var n=e.authenticatorConfigurations[t],r=(n||{displayName:t}).displayName,s=a+1+". "+r;return l.default.createElement(i.LinkContainer,{key:"container-"+t,to:d.default.SYSTEM.AUTHENTICATION.PROVIDERS.provider(t)},l.default.createElement(o.NavItem,{key:t,title:s},s))}),t.unshift(l.default.createElement(o.NavItem,{key:"divider",disabled:!0,title:"Provider Settings",className:v.default.divider},"Provider Settings")),t.unshift(l.default.createElement(i.LinkContainer,{key:"container-settings",to:d.default.SYSTEM.AUTHENTICATION.PROVIDERS.CONFIG},l.default.createElement(o.NavItem,{key:"settings",title:"Configure Provider Order"},"Configure Provider Order")))):t=[l.default.createElement(o.NavItem,{key:"loading",disabled:!0,title:"Loading..."},"Loading...")],this.isPermitted(this.state.currentUser.permissions,["roles:read"])&&t.unshift(l.default.createElement(i.LinkContainer,{key:"roles",to:d.default.SYSTEM.AUTHENTICATION.ROLES},l.default.createElement(o.NavItem,{title:"Roles"},"Roles"))),this.isPermitted(this.state.currentUser.permissions,["users:list"])&&t.unshift(l.default.createElement(i.LinkContainer,{key:"users",to:d.default.SYSTEM.AUTHENTICATION.USERS.LIST},l.default.createElement(o.NavItem,{title:"Users"},"Users"))),0===t.length&&(t=[l.default.createElement(i.LinkContainer,{key:"profile-edit",to:d.default.SYSTEM.AUTHENTICATION.USERS.edit(encodeURIComponent(this.state.currentUser.username))},l.default.createElement(o.NavItem,{title:"Edit User"},"Edit User"))]);var n=l.default.createElement(o.Nav,{stacked:!0,bsStyle:"pills"},t),r=1===l.default.Children.count(this.props.children)?l.default.Children.only(this.props.children):this._contentComponent();return l.default.createElement(o.Row,null,l.default.createElement(o.Col,{md:2,className:v.default.subnavigation},n),l.default.createElement(o.Col,{md:10,className:v.default.contentpane},r))}});exports.default=N,e.exports=exports.default},1219:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var n=t(2),l=a(n),r=t(48),s=t(15),o=t(1254),i=a(o),u=t(1255),d=a(u),c=t(86),f=a(c),p=t(75),m=a(p),h=f.default.get("Ldap"),g=h.LdapActions,E=l.default.createClass({displayName:"LegacyLdapConfig",propTypes:{history:n.PropTypes.object.isRequired},getInitialState:function(){return{showSettings:!0}},componentDidMount:function(){g.loadSettings()},_toggleButton:function(){this.setState({showSettings:!this.state.showSettings})},_onSettingsCancel:function(){this._toggleButton()},_onCancel:function(){this.props.history.pushState(null,m.default.SYSTEM.AUTHENTICATION.OVERVIEW)},render:function(){var e=this.state.showSettings?"LDAP Group Mapping":"LDAP Settings",t=this.state.showSettings?l.default.createElement(i.default,{onCancel:this._onCancel,onShowGroups:this._toggleButton}):l.default.createElement(d.default,{onCancel:this._onSettingsCancel,onShowConfig:this._toggleButton});return l.default.createElement(r.DocumentTitle,{title:"LDAP Settings"},l.default.createElement("span",null,l.default.createElement(r.PageHeader,{title:"LDAP Settings",subpage:!0},l.default.createElement("span",null,"This page is the only resource you need to set up the Graylog LDAP integration. You can test the connection to your LDAP server and even try to log in with an LDAP account of your choice right away."),null,l.default.createElement("span",null,l.default.createElement(s.Button,{bsStyle:"success",onClick:this._toggleButton},e))),t))}});exports.default=E,e.exports=exports.default},1220:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),n=function(e){return e&&e.__esModule?e:{default:e}}(a),l=t(48),r=n.default.createClass({displayName:"MongoDbPasswordConfig",propTypes:{config:a.PropTypes.object},render:function(){return n.default.createElement(l.DocumentTitle,{title:"Password Authenticator"},n.default.createElement("span",null,n.default.createElement(l.PageHeader,{title:"Password Authenticator",subpage:!0},n.default.createElement("span",null,"This authenticator uses the password stored in MongoDB to grant access to users, it usually runs last, so that other authentication sources have priority.")),n.default.createElement("span",null,"If you only rely on external authentication systems, such as LDAP or Active Directory, you can disable this authenticator. It currently has no configuration options.")))}});exports.default=r,e.exports=exports.default},1221:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),n=function(e){return e&&e.__esModule?e:{default:e}}(a),l=t(48),r=function(){return n.default.createElement(l.DocumentTitle,{title:"Session Authenticator"},n.default.createElement("span",null,n.default.createElement(l.PageHeader,{title:"Session Authenticator",subpage:!0},n.default.createElement("span",null,"This authenticator uses the session supplied from the web interface to grant access to logged in users, it usually runs first.")),n.default.createElement("span",null,"Since sessions are necessary to let the web interface function it cannot be disabled.")))};exports.default=r,e.exports=exports.default},1222:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),n=function(e){return e&&e.__esModule?e:{default:e}}(a),l=t(48),r=function(){return n.default.createElement(l.DocumentTitle,{title:"Admin User Authenticator"},n.default.createElement("span",null,n.default.createElement(l.PageHeader,{title:"Admin User Authenticator",subpage:!0},n.default.createElement("span",null,"This authenticator grants access to the admin user specified in the configuration file.")),n.default.createElement("span",null,"Currently the admin user authenticator cannot be configured outside of the configuration file. It can also not be disabled at the moment.")))};exports.default=r,e.exports=exports.default},1223:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var n=t(258),l=t(1220),r=a(l),s=t(1221),o=a(s),i=t(1219),u=a(i),d=t(1222),c=a(d),f=t(1216),p=a(f);n.PluginStore.register(new n.PluginManifest({},{authenticatorConfigurations:[{name:"mongodb-password",displayName:"Passwords",description:"Graylog managed account passwords (from MongoDB)",canBeDisabled:!0,component:r.default},{name:"mongodb-session",displayName:"Sessions",description:"Established session authenticator",canBeDisabled:!1,component:o.default},{name:"legacy-ldap",displayName:"LDAP/Active Directory",description:"Authenticates against external system and creates accounts in Graylog",canBeDisabled:!0,component:u.default},{name:"root-user",displayName:"Admin user",description:"Static account configured in the server configuration file",canBeDisabled:!1,component:c.default},{name:"access-token",displayName:"API Tokens",description:"Per user tokens which do not establish sessions",canBeDisabled:!0,component:p.default}]}))},1254:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=t(2),r=a(l),s=t(1),o=a(s),i=t(15),u=t(88),d=a(u),c=t(951),f=a(c),p=t(43),m=t(48),h=t(259),g=a(h),E=t(1256),y=a(E),b=t(1257),_=a(b),S=t(18),v=a(S),C=t(7),P=a(C),A=v.default.getStore("Roles"),N=v.default.getStore("Ldap"),w=P.default.getActions("Ldap"),T={activeDirectory:{SYSTEM_USERNAME:r.default.createElement("span",null,"The username for the initial connection to the Active Directory server, e.g. ",r.default.createElement("code",null,"ldapbind@some.domain"),".",r.default.createElement("br",null),"This needs to match the ",r.default.createElement("code",null,"userPrincipalName")," of that user."),SYSTEM_PASSWORD:"The password for the initial connection to the Active Directory server.",SEARCH_BASE:r.default.createElement("span",null,"The base tree to limit the Active Directory search query to, e.g. ",r.default.createElement("code",null,"cn=users,dc=example,dc=com"),"."),SEARCH_PATTERN:r.default.createElement("span",null,"For example ",r.default.createElement("code",{className:"text-nowrap"},"(&(objectClass=user)(sAMAccountName={0}))"),"."," ","The string ",r.default.createElement("code",null,"{0}")," will be replaced by the entered username."),DISPLAY_NAME:r.default.createElement("span",null,"Which Active Directory attribute to use for the full name of the user in Graylog, e.g. ",r.default.createElement("code",null,"displayName"),".",r.default.createElement("br",null),"Try to load a test user using the form below, if you are unsure which attribute to use."),GROUP_SEARCH_BASE:r.default.createElement("span",null,"The base tree to limit the Active Directory group search query to, e.g. ",r.default.createElement("code",null,"cn=users,dc=example,dc=com"),"."),GROUP_PATTERN:r.default.createElement("span",null,"The search pattern used to find groups in Active Directory for mapping to Graylog roles, e.g."," ",r.default.createElement("code",{className:"text-nowrap"},"(objectClass=group)")," or"," ",r.default.createElement("code",{className:"text-nowrap"},"(&(objectClass=group)(cn=graylog*))"),"."),GROUP_ID:r.default.createElement("span",null,"Which Active Directory attribute to use for the full name of the group, usually ",r.default.createElement("code",null,"cn"),"."),defaultGroup:function(e){return r.default.createElement("span",null,"The default Graylog role determines whether a user created via Active Directory can access the entire system, or has limited access.",r.default.createElement("br",null),"You can assign additional permissions by"," ",r.default.createElement("a",{href:"#",onClick:e},"mapping Active Directory groups to Graylog roles"),","," ","or you can assign additional Graylog roles to Active Directory users below.")},ADDITIONAL_GROUPS:"Choose the additional roles each Active Directory user will have by default, leave it empty if you want to map Active Directory groups to Graylog roles."},ldap:{SYSTEM_USERNAME:r.default.createElement("span",null,"The username for the initial connection to the LDAP server, e.g."," ",r.default.createElement("code",{className:"text-nowrap"},"uid=admin,ou=system"),", this might be optional depending on your LDAP server."),SYSTEM_PASSWORD:"The password for the initial connection to the LDAP server.",SEARCH_BASE:r.default.createElement("span",null,"The base tree to limit the LDAP search query to, e.g. ",r.default.createElement("code",{className:"text-nowrap"},"cn=users,dc=example,dc=com"),"."),SEARCH_PATTERN:r.default.createElement("span",null,"For example ",r.default.createElement("code",{className:"text-nowrap"},"(&(objectClass=inetOrgPerson)(uid={0}))"),"."," ","The string ",r.default.createElement("code",null,"{0}")," will be replaced by the entered username."),DISPLAY_NAME:r.default.createElement("span",null,"Which LDAP attribute to use for the full name of the user in Graylog, e.g. ",r.default.createElement("code",null,"cn"),".",r.default.createElement("br",null),"Try to load a test user using the form below, if you are unsure which attribute to use."),GROUP_SEARCH_BASE:r.default.createElement("span",null,"The base tree to limit the LDAP group search query to, e.g. ",r.default.createElement("code",null,"cn=users,dc=example,dc=com"),"."),GROUP_PATTERN:r.default.createElement("span",null,"The search pattern used to find groups in LDAP for mapping to Graylog roles, e.g."," ",r.default.createElement("code",null,"(objectClass=groupOfNames)")," or"," ",r.default.createElement("code",{className:"text-nowrap"},"(&(objectClass=groupOfNames)(cn=graylog*))"),"."),GROUP_ID:r.default.createElement("span",null,"Which LDAP attribute to use for the full name of the group, usually ",r.default.createElement("code",null,"cn"),"."),defaultGroup:function(e){return r.default.createElement("span",null,"The default Graylog role determines whether a user created via LDAP can access the entire system, or has limited access.",r.default.createElement("br",null),"You can assign additional permissions by"," ",r.default.createElement("a",{href:"#",onClick:e},"mapping LDAP groups to Graylog roles"),","," ","or you can assign additional Graylog roles to LDAP users below.")},ADDITIONAL_GROUPS:"Choose the additional roles each LDAP user will have by default, leave it empty if you want to map LDAP groups to Graylog roles."}},D=r.default.createClass({displayName:"LdapComponent",mixins:[o.default.listenTo(N,"_onLdapSettingsChange","_onLdapSettingsChange")],propTypes:{onCancel:r.default.PropTypes.func.isRequired,onShowGroups:r.default.PropTypes.func.isRequired},getInitialState:function(){return{ldapSettings:void 0,ldapUri:void 0,roles:void 0}},componentDidMount:function(){var e=this;A.loadRoles().then(function(t){e.setState({roles:e._formatAdditionalRoles(t)})})},_formatAdditionalRoles:function(e){return e.filter(function(e){return!("reader"===e.name.toLowerCase()||"admin"===e.name.toLowerCase())}).sort(function(e,t){return(0,f.default)(e.name.toLowerCase(),t.name.toLowerCase())}).map(function(e){return{label:e.name,value:e.name}})},_onLdapSettingsChange:function(e){if(e.ldapSettings){var t=g.default.clone(e.ldapSettings),a=new d.default(t.ldap_uri);this.setState({ldapSettings:t,ldapUri:a})}},_isLoading:function(){return!this.state.ldapSettings||!this.state.roles},_bindChecked:function(e,t){this._setSetting(e.target.name,void 0===t?e.target.checked:t)},_bindValue:function(e){this._setSetting(e.target.name,e.target.value)},_updateSsl:function(e){this._setUriScheme(e.target.checked?"ldaps":"ldap")},_setSetting:function(e,t){var a={},l=t;"ldap_uri"===e&&"object"===(void 0===t?"undefined":n(t))&&(a.ldapUri=t,l=t.toString());var r=g.default.clone(this.state.ldapSettings);r[e]=l,a.ldapSettings=r,a.serverConnectionStatus={},this.setState(a)},_setUriScheme:function(e){var t=this.state.ldapUri.clone();t.scheme(e),this._setSetting("ldap_uri",t)},_uriScheme:function(){return this.state.ldapUri.scheme()+"://"},_setUriHost:function(e){var t=this.state.ldapUri.clone();t.hostname(e),this._setSetting("ldap_uri",t)},_uriHost:function(){return this.state.ldapUri.hostname()},_setUriPort:function(e){var t=this.state.ldapUri.clone();t.port(e),this._setSetting("ldap_uri",t)},_uriPort:function(){return this.state.ldapUri.port()},_setAdditionalDefaultGroups:function(e){var t=e.split(",").filter(function(e){return""!==e});this._setSetting("additional_default_groups",t)},_saveSettings:function(e){e.preventDefault(),w.update(this.state.ldapSettings)},_onShowGroups:function(e){e.preventDefault(),this.props.onShowGroups()},render:function(){var e=this;if(this._isLoading())return r.default.createElement(m.Spinner,null);var t=this.state.ldapSettings.active_directory,a=!this.state.ldapSettings.enabled,n=t?T.activeDirectory:T.ldap,l=this.state.roles;return r.default.createElement(i.Row,null,r.default.createElement(i.Col,{lg:8},r.default.createElement("form",{id:"ldap-settings-form",className:"form-horizontal",onSubmit:this._saveSettings},r.default.createElement(p.Input,{type:"checkbox",label:"Enable LDAP",help:"User accounts will be taken from LDAP/Active Directory, the administrator account will still be available.",wrapperClassName:"col-sm-offset-3 col-sm-9",name:"enabled",checked:this.state.ldapSettings.enabled,onChange:this._bindChecked}),r.default.createElement("fieldset",null,r.default.createElement(i.Row,{className:"row-sm"},r.default.createElement(i.Col,{sm:12},r.default.createElement("legend",null,"1. Server configuration"))),r.default.createElement(p.Input,{id:"active_directory",labelClassName:"col-sm-3",wrapperClassName:"col-sm-9",label:"Server Type"},r.default.createElement("label",{className:"radio-inline"},r.default.createElement("input",{type:"radio",name:"active_directory",checked:!t,disabled:a,onChange:function(t){return e._bindChecked(t,!1)}}),"LDAP"),r.default.createElement("label",{className:"radio-inline"},r.default.createElement("input",{type:"radio",name:"active_directory",checked:t,disabled:a,onChange:function(t){return e._bindChecked(t,!0)}}),"Active Directory")),r.default.createElement(p.Input,{id:"ldap-uri-host",labelClassName:"col-sm-3",wrapperClassName:"col-sm-9",label:"Server Address"},r.default.createElement("div",{className:"input-group"},r.default.createElement("span",{className:"input-group-addon"},this._uriScheme()),r.default.createElement("input",{type:"text",className:"form-control",id:"ldap-uri-host",value:this._uriHost(),placeholder:"Hostname",required:!0,onChange:function(t){return e._setUriHost(t.target.value)},disabled:a}),r.default.createElement("span",{className:"input-group-addon input-group-separator"},":"),r.default.createElement("input",{type:"number",className:"form-control",id:"ldap-uri-port",value:this._uriPort(),min:"1",max:"65535",placeholder:"Port",required:!0,style:{width:120},onChange:function(t){return e._setUriPort(t.target.value)},disabled:a})),r.default.createElement("label",{className:"checkbox-inline"},r.default.createElement("input",{type:"checkbox",name:"ssl",checked:"ldaps"===this.state.ldapUri.scheme(),onChange:this._updateSsl,disabled:a})," SSL"),r.default.createElement("label",{className:"checkbox-inline"},r.default.createElement("input",{type:"checkbox",name:"use_start_tls",value:"true",id:"ldap-uri-starttls",checked:this.state.ldapSettings.use_start_tls,onChange:this._bindChecked,disabled:a})," StartTLS"),r.default.createElement("label",{className:"checkbox-inline"},r.default.createElement("input",{type:"checkbox",name:"trust_all_certificates",value:"true",id:"trust-all-certificates",checked:this.state.ldapSettings.trust_all_certificates,onChange:this._bindChecked,disabled:a})," Allow self-signed certificates")),r.default.createElement(p.Input,{type:"text",id:"system_username",name:"system_username",labelClassName:"col-sm-3",wrapperClassName:"col-sm-9",placeholder:"System User DN",label:"System Username",value:this.state.ldapSettings.system_username,help:n.SYSTEM_USERNAME,onChange:this._bindValue,disabled:a}),r.default.createElement(p.Input,{type:"password",id:"system_password",name:"system_password",labelClassName:"col-sm-3",wrapperClassName:"col-sm-9",placeholder:"System Password",label:"System Password",value:this.state.ldapSettings.system_password,help:n.SYSTEM_PASSWORD,onChange:this._bindValue,disabled:a})),r.default.createElement("fieldset",null,r.default.createElement(i.Row,{className:"row-sm"},r.default.createElement(i.Col,{sm:12},r.default.createElement("legend",null,"2. Connection Test"))),r.default.createElement(y.default,{ldapSettings:this.state.ldapSettings,ldapUri:this.state.ldapUri,disabled:a})),r.default.createElement("fieldset",null,r.default.createElement(i.Row,{className:"row-sm"},r.default.createElement(i.Col,{sm:12},r.default.createElement("legend",null,"3. User mapping"))),r.default.createElement(p.Input,{type:"text",id:"search_base",name:"search_base",labelClassName:"col-sm-3",wrapperClassName:"col-sm-9",placeholder:"Search Base",label:"Search Base DN",value:this.state.ldapSettings.search_base,help:n.SEARCH_BASE,onChange:this._bindValue,disabled:a,required:!0}),r.default.createElement(p.Input,{type:"text",id:"search_pattern",name:"search_pattern",labelClassName:"col-sm-3",wrapperClassName:"col-sm-9",placeholder:"Search Pattern",label:"User Search Pattern",value:this.state.ldapSettings.search_pattern,help:n.SEARCH_PATTERN,onChange:this._bindValue,disabled:a,required:!0}),r.default.createElement(p.Input,{type:"text",id:"display_name_attribute",name:"display_name_attribute",labelClassName:"col-sm-3",wrapperClassName:"col-sm-9",placeholder:"Display Name Attribute",label:"Display Name attribute",value:this.state.ldapSettings.display_name_attribute,help:n.DISPLAY_NAME,onChange:this._bindValue,disabled:a,required:!0})),r.default.createElement("fieldset",null,r.default.createElement(i.Row,{className:"row-sm"},r.default.createElement(i.Col,{sm:12},r.default.createElement("legend",null,"4. Group Mapping ",r.default.createElement("small",null,"(optional)")))),r.default.createElement(p.Input,{type:"text",id:"group_search_base",name:"group_search_base",labelClassName:"col-sm-3",wrapperClassName:"col-sm-9",placeholder:"Group Search Base",label:"Group Search Base DN",value:this.state.ldapSettings.group_search_base,help:n.GROUP_SEARCH_BASE,onChange:this._bindValue,disabled:a}),r.default.createElement(p.Input,{type:"text",id:"group_search_pattern",name:"group_search_pattern",labelClassName:"col-sm-3",wrapperClassName:"col-sm-9",placeholder:"Group Search Pattern",label:"Group Search Pattern",value:this.state.ldapSettings.group_search_pattern,help:n.GROUP_PATTERN,onChange:this._bindValue,disabled:a}),r.default.createElement(p.Input,{type:"text",id:"group_id_attribute",name:"group_id_attribute",labelClassName:"col-sm-3",wrapperClassName:"col-sm-9",placeholder:"Group Id Attribute",label:"Group Name Attribute",value:this.state.ldapSettings.group_id_attribute,help:n.GROUP_ID,onChange:this._bindValue,disabled:a}),r.default.createElement(p.Input,{id:"default_group",labelClassName:"col-sm-3",wrapperClassName:"col-sm-9",label:"Default User Role",help:n.defaultGroup(this._onShowGroups)},r.default.createElement(i.Row,null,r.default.createElement(i.Col,{sm:4},r.default.createElement("select",{id:"default_group",name:"default_group",className:"form-control",required:!0,value:this.state.ldapSettings.default_group.toLowerCase(),disabled:a,onChange:function(t){return e._setSetting("default_group",t.target.value)}},r.default.createElement("option",{value:"reader"},"Reader - basic access"),r.default.createElement("option",{value:"admin"},"Administrator - complete access"))))),r.default.createElement(i.Row,null,r.default.createElement(i.Col,{sm:9,smOffset:3},r.default.createElement(i.Panel,{bsStyle:"info"},"Changing the static role assignment will only affect to new users created via LDAP/Active Directory!",r.default.createElement("br",null),"Existing user accounts will be updated on their next login, or if you edit their roles manually."))),r.default.createElement(p.Input,{id:"additional_default_groups",labelClassName:"col-sm-3",wrapperClassName:"col-sm-9",label:"Additional Default Roles",help:n.ADDITIONAL_GROUPS},r.default.createElement(m.MultiSelect,{ref:"select",options:l,disabled:a,value:this.state.ldapSettings.additional_default_groups,onChange:function(t){return e._setAdditionalDefaultGroups(t)},placeholder:"Choose additional roles..."})),r.default.createElement(i.Row,null,r.default.createElement(i.Col,{sm:9,smOffset:3},r.default.createElement(i.Panel,{bsStyle:"info"},"Changing the static role assignment will only affect to new users created via LDAP/Active Directory!",r.default.createElement("br",null),"Existing user accounts will be updated on their next login, or if you edit their roles manually.")))),r.default.createElement("fieldset",null,r.default.createElement(i.Row,{className:"row-sm"},r.default.createElement(i.Col,{sm:12},r.default.createElement("legend",null,"5. Login test"))),r.default.createElement(_.default,{ldapSettings:this.state.ldapSettings,disabled:a})),r.default.createElement("fieldset",null,r.default.createElement(i.Row,{className:"row-sm"},r.default.createElement(i.Col,{sm:12},r.default.createElement("legend",null,"6. Store settings"))),r.default.createElement("div",{className:"form-group"},r.default.createElement(i.Col,{sm:9,smOffset:3},r.default.createElement(i.Button,{type:"submit",bsStyle:"primary",className:"save-button-margin"},"Save LDAP settings"),r.default.createElement(i.Button,{onClick:this.props.onCancel},"Cancel")))))))}});exports.default=D,e.exports=exports.default},1255:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var n=t(2),l=a(n),r=t(55),s=a(r),o=t(15),i=t(951),u=a(i),d=t(43),c=t(48),f=t(7),p=a(f),m=t(18),h=a(m),g=p.default.getActions("LdapGroups"),E=h.default.getStore("Roles"),y=(h.default.getStore("LdapGroups"),l.default.createClass({displayName:"LdapGroupsComponent",propTypes:{onCancel:l.default.PropTypes.func.isRequired,onShowConfig:l.default.PropTypes.func.isRequired},getInitialState:function(){return{groups:s.default.Set.of(),roles:s.default.Set.of(),mapping:s.default.Map(),groupsErrorMessage:null}},componentDidMount:function(){var e=this;g.loadMapping.triggerPromise().then(function(t){return e.setState({mapping:s.default.Map(t)})}),g.loadGroups.triggerPromise().then(function(t){return e.setState({groups:s.default.Set(t)})},function(t){400!==t.additional.status&&e.setState({groupsErrorMessage:t})}),E.loadRoles().then(function(t){return e.setState({roles:s.default.Set(t)})})},_updateMapping:function(e){var t=e.target.value,a=e.target.getAttribute("data-group");""===t?this.setState({mapping:this.state.mapping.delete(a)}):this.setState({mapping:this.state.mapping.set(a,t)})},_saveMapping:function(e){e.preventDefault(),g.saveMapping(this.state.mapping.toJS())},_onShowConfig:function(e){e.preventDefault(),this.props.onShowConfig()},_isLoading:function(){return!(this.state.mapping&&this.state.groups&&this.state.roles)},render:function(){var e=this;if(this._isLoading())return l.default.createElement(c.Spinner,null);if(this.state.groupsErrorMessage)return l.default.createElement(o.Panel,{header:"Error: Unable to load LDAP groups",bsStyle:"danger"},"The error message was:",l.default.createElement("br",null),this.state.groupsErrorMessage.message);u.default.insensitive=!0;var t=this.state.roles.sort(u.default).map(function(e){return l.default.createElement("option",{key:e.name,value:e.name},e.name)}),a=this.state.groups.sort(u.default).map(function(a){return l.default.createElement("li",{key:a},l.default.createElement(d.Input,{label:a,"data-group":a,type:"select",value:e.state.mapping.get(a,""),onChange:e._updateMapping,labelClassName:"col-sm-2",wrapperClassName:"col-sm-5"},l.default.createElement("option",{value:""},"None"),t))});return u.default.insensitive=!1,0===a.size?l.default.createElement("p",null,"No LDAP/Active Directory groups found. Please verify that your"," ",l.default.createElement("a",{href:"#",onClick:this._onShowConfig},"LDAP group mapping")," ","settings are correct."):l.default.createElement("form",{className:"form-horizontal",onSubmit:this._saveMapping},l.default.createElement(o.Row,null,l.default.createElement(o.Col,{md:12},l.default.createElement("ul",{style:{padding:0}},a)),l.default.createElement(o.Col,{md:10,mdPush:2},l.default.createElement(o.Button,{type:"submit",bsStyle:"primary",className:"save-button-margin"},"Save"),l.default.createElement(o.Button,{onClick:this.props.onCancel},"Cancel"))))}}));exports.default=y,e.exports=exports.default},1256:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var n=t(2),l=a(n),r=t(15),s=t(7),o=a(s),i=o.default.getActions("Ldap"),u=l.default.createClass({displayName:"TestLdapConnection",propTypes:{ldapSettings:n.PropTypes.object.isRequired,ldapUri:n.PropTypes.object.isRequired,disabled:n.PropTypes.bool},getInitialState:function(){return{serverConnectionStatus:{}}},componentWillReceiveProps:function(e){JSON.stringify(this.props.ldapSettings)!==JSON.stringify(e.ldapSettings)&&this.setState({serverConnectionStatus:{}})},_testServerConnection:function(){var e=this;i.testServerConnection.triggerPromise(this.props.ldapSettings).then(function(t){t.connected?e.setState({serverConnectionStatus:{loading:!1,success:!0}}):e.setState({serverConnectionStatus:{loading:!1,error:t.exception}})},function(){e.setState({serverConnectionStatus:{loading:!1,error:"Unable to check connection, please try again."}})}),this.setState({serverConnectionStatus:{loading:!0}})},_getServerConnectionStyle:function(){return this.state.serverConnectionStatus.success?"success":this.state.serverConnectionStatus.error?"danger":"info"},render:function(){var e=this.state.serverConnectionStatus,t=this.props.disabled||""===this.props.ldapUri.hostname()||e.loading,a=void 0;return e.error&&(a=l.default.createElement(r.Alert,{bsStyle:"danger"},e.error)),e.success&&(a=l.default.createElement(r.Alert,{bsStyle:"success"},"Connection to server was successful")),l.default.createElement("div",{className:"form-group"},l.default.createElement(r.Row,null,l.default.createElement(r.Col,{sm:9,smOffset:3},l.default.createElement(r.Button,{id:"ldap-test-connection",bsStyle:this._getServerConnectionStyle(),disabled:t,onClick:this._testServerConnection},e.loading?"Testing...":"Test Server Connection"),l.default.createElement("span",{className:"help-block"},"Performs a background connection check with the address and credentials above."),a)))}});exports.default=u,e.exports=exports.default},1257:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var n=t(2),l=a(n),r=t(15),s=t(43),o=t(259),i=a(o),u=t(7),d=a(u),c=d.default.getActions("Ldap"),f=l.default.createClass({displayName:"TestLdapLogin",propTypes:{ldapSettings:n.PropTypes.object.isRequired,disabled:n.PropTypes.bool},getInitialState:function(){return{loginUser:"",loginPassword:"",loginStatus:{}}},componentDidMount:function(){this.style.use()},componentWillReceiveProps:function(e){JSON.stringify(this.props.ldapSettings)!==JSON.stringify(e.ldapSettings)&&this.setState({loginStatus:{}})},componentWillUnmount:function(){this.style.unuse()},style:t(1500),_changeLoginForm:function(e){var t={};t["test_login_username"===e.target.name?"loginUser":"loginPassword"]=e.target.value,t.loginStatus={},this.setState(t)},_disableSubmitOnEnter:function(e){e.key&&"Enter"===e.key&&e.preventDefault()},_testLogin:function(){var e=this;c.testLogin.triggerPromise(this.props.ldapSettings,this.state.loginUser,this.state.loginPassword).then(function(t){!t.connected||!t.login_authenticated&&i.default.isEmpty(t.entry)?e.setState({loginStatus:{loading:!1,error:!0,result:t}}):e.setState({loginStatus:{loading:!1,success:!0,result:t}})},function(){e.setState({loginStatus:{loading:!1,error:!0,result:{exception:"Unable to test login, please try again."}}})}),this.setState({loginStatus:{loading:!0}})},_loginTestButtonStyle:function(){return this.state.loginStatus.success?"success":this.state.loginStatus.error?"danger":"info"},_formatLoginStatus:function(e){if(!e.error&&!e.success)return null;var t="Connection "+(e.error?"failed":"successful"),a=e.error?"danger":"success",n=void 0;n=i.default.isEmpty(e.result.entry)?l.default.createElement("i",{className:"fa fa-times ldap-failure"}):l.default.createElement("i",{className:"fa fa-check ldap-success"});var s=void 0;s=e.result.login_authenticated?l.default.createElement("i",{className:"fa fa-check ldap-success"}):""===this.state.loginPassword?l.default.createElement("i",{className:"fa fa-question ldap-info"}):l.default.createElement("i",{className:"fa fa-times ldap-failure"});var o=void 0;e.result.exception&&(o=l.default.createElement("pre",null,e.result.exception));var u=Object.keys(e.result.entry).map(function(t){return[l.default.createElement("dt",null,t),l.default.createElement("dd",null,e.result.entry[t])]}),d=u.length>0?l.default.createElement("dl",null,u):l.default.createElement("p",null,"LDAP server did not return any attributes for the user."),c=e.result.groups?e.result.groups.map(function(e){return l.default.createElement("li",{key:e},e)}):[],f=c.length>0?l.default.createElement("ul",{style:{padding:0}},c):l.default.createElement("p",null,"LDAP server did not return any groups for the user.");return l.default.createElement(r.Row,null,l.default.createElement(r.Col,{sm:9,smOffset:3},l.default.createElement(r.Panel,{header:t,bsStyle:a,className:"ldap-test-login-result"},l.default.createElement("ul",{className:"login-status"},l.default.createElement("li",null,l.default.createElement("h4",null,"User found ",n)),l.default.createElement("li",null,l.default.createElement("h4",null,"Login attempt ",s))),o&&l.default.createElement("h4",null,"Server response"),o,l.default.createElement("h4",null,"User's LDAP attributes"),d,l.default.createElement("h4",null,"User's LDAP groups"),f)))},render:function(){var e=this.state.loginStatus,t=this.props.disabled||!this.state.loginUser||e.loading;return l.default.createElement("div",null,l.default.createElement(s.Input,{id:"test_login_username",labelClassName:"col-sm-3",wrapperClassName:"col-sm-9",label:"Login test",help:"Verify the previous settings by loading the entry for the given user name. If you omit the password, no authentication attempt will be made."},l.default.createElement(r.Row,{className:"row-sm"},l.default.createElement(r.Col,{sm:5},l.default.createElement("input",{type:"text",id:"test_login_username",name:"test_login_username",className:"form-control",value:this.state.loginUser,onChange:this._changeLoginForm,onKeyPress:this._disableSubmitOnEnter,placeholder:"Username for login test",disabled:this.props.disabled})),l.default.createElement(r.Col,{sm:5},l.default.createElement("input",{type:"password",id:"test_login_password",name:"test_login_password",className:"form-control",value:this.state.testLoginPassword,onChange:this._changeLoginForm,onKeyPress:this._disableSubmitOnEnter,placeholder:"Password",disabled:this.props.disabled})),l.default.createElement(r.Col,{sm:2},l.default.createElement(r.Button,{bsStyle:this._loginTestButtonStyle(),disabled:t,onClick:this._testLogin},e.loading?"Testing...":"Test login")))),this._formatLoginStatus(e))}});exports.default=f,e.exports=exports.default},1367:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var n=t(2),l=a(n),r=t(15),s=t(952),o=a(s),i=t(165),u=a(i);t(1223);var d=t(265),c=a(d),f=t(957),p=a(f),m=t(1218),h=a(m),g=l.default.createClass({displayName:"AuthenticationPage",propTypes:{children:l.default.PropTypes.object,location:l.default.PropTypes.object.isRequired,params:l.default.PropTypes.object.isRequired,history:l.default.PropTypes.object.isRequired},mixins:[u.default],render:function(){return l.default.createElement("span",null,l.default.createElement(c.default,{title:"Authentication Management"},l.default.createElement("span",null,"Configure Graylog's authentication providers and manage the active users of this Graylog cluster."),l.default.createElement("span",null,"Read more authentication in the ",l.default.createElement(p.default,{page:o.default.PAGES.USERS_ROLES,text:"documentation"}),".")),l.default.createElement(r.Row,{className:"content"},l.default.createElement(r.Col,{md:12},l.default.createElement(h.default,{location:this.props.location,params:this.props.params,history:this.props.history},this.props.children))))}});exports.default=g,e.exports=exports.default},1422:function(e,exports,t){exports=e.exports=t(19)(),exports.push([e.i,"._1-7A7Wk93i64abyb8RD454{border-right:1px solid #d1d1d1}._19WVz2Pea58X7AsOkte5Ft{border-left:1px solid #d1d1d1;margin-left:-1px}.GzKGC_ryb3VuVQhgY0qvA{border-bottom:1px solid #d1d1d1}",""]),exports.locals={subnavigation:"_1-7A7Wk93i64abyb8RD454",contentpane:"_19WVz2Pea58X7AsOkte5Ft",divider:"GzKGC_ryb3VuVQhgY0qvA"}},1423:function(e,exports,t){exports=e.exports=t(19)(),exports.push([e.i,".ldap-test-login-result h4{margin-bottom:10px}.ldap-test-login-result .login-status{padding:0;margin-bottom:10px}.ldap-test-login-result .login-status li{display:inline-block;margin-right:20px}.ldap-success{color:green}.ldap-failure{color:maroon}.ldap-info{color:#337ab7}",""])},1493:function(e,exports,t){var a=t(1422);"string"==typeof a&&(a=[[e.i,a,""]]);t(20)(a,{});a.locals&&(e.exports=a.locals)},1500:function(e,exports,t){var a,n=0,l=t(1423);"string"==typeof l&&(l=[[e.i,l,""]]),exports.use=exports.ref=function(){return n++||(exports.locals=l.locals,a=t(20)(l,{})),exports},exports.unuse=exports.unref=function(){--n||(a(),a=null)}}});
//# sourceMappingURL=21.200197dca04f05abe3f2.js.map