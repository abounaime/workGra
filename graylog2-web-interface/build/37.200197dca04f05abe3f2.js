webpackJsonp([37],{1178:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(2),l=a(s),n=t(274),r=a(n),o=l.default.createClass({displayName:"RolesSelect",propTypes:{userRoles:l.default.PropTypes.arrayOf(l.default.PropTypes.string),availableRoles:l.default.PropTypes.array.isRequired,onValueChange:l.default.PropTypes.func},getDefaultProps:function(){return{userRoles:[]}},getValue:function(){return this.refs.select.getValue().split(",")},render:function(){var e=this.props.userRoles.join(","),t=this.props.availableRoles.map(function(e){return{value:e.name,label:e.name}});return l.default.createElement(r.default,{ref:"select",options:t,value:e,onValueChange:this.props.onValueChange,placeholder:"Choose roles..."})}});exports.default=o,e.exports=exports.default},1179:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(2),l=a(s),n=t(15),r=t(43),o=t(1180),u=a(o),i=l.default.createClass({displayName:"TimeoutInput",propTypes:{controlSize:l.default.PropTypes.number,labelSize:l.default.PropTypes.number,value:l.default.PropTypes.number,onChange:l.default.PropTypes.func},getDefaultProps:function(){return{value:36e5,labelSize:2,controlSize:10}},getInitialState:function(){var e=this._estimateUnit(this.props.value);return{sessionTimeoutNever:!!this.props.value&&-1===this.props.value,value:this.props.value?Math.floor(this.props.value/e):0,unit:e}},getValue:function(){return this.state.sessionTimeoutNever?-1:this.refs.timeout.value*this.refs.session_timeout_unit.getValue()},MS_DAY:864e5,MS_HOUR:36e5,MS_MINUTE:6e4,MS_SECOND:1e3,_estimateUnit:function(e){return 0===e?this.MS_SECOND:e%this.MS_DAY==0?this.MS_DAY:e%this.MS_HOUR==0?this.MS_HOUR:e%this.MS_MINUTE==0?this.MS_MINUTE:this.MS_SECOND},_onClick:function(e){this.setState({sessionTimeoutNever:e.target.checked},this._notifyChange)},_onChangeValue:function(e){this.setState({value:e.target.value},this._notifyChange)},_onChangeUnit:function(e){this.setState({unit:e.target.value},this._notifyChange)},_notifyChange:function(){"function"==typeof this.props.onChange&&this.props.onChange(this.getValue())},render:function(){return l.default.createElement("span",null,l.default.createElement(r.Input,{ref:"session_timeout_never",type:"checkbox",id:"session-timeout-never",name:"session_timeout_never",labelClassName:"col-sm-"+this.props.controlSize,wrapperClassName:"col-sm-offset-"+this.props.labelSize+" col-sm-"+this.props.controlSize,label:"Sessions do not time out",help:"When checked sessions never time out due to inactivity.",onChange:this._onClick,checked:this.state.sessionTimeoutNever}),l.default.createElement(r.Input,{label:"Timeout",help:"Session automatically end after this amount of time, unless they are actively used.",labelClassName:"col-sm-"+this.props.labelSize,wrapperClassName:"col-sm-"+this.props.controlSize},l.default.createElement(n.Row,null,l.default.createElement(n.Col,{sm:2},l.default.createElement("input",{ref:"timeout",type:"number",id:"timeout",className:"session-timeout-fields validatable form-control",name:"timeout",min:1,"data-validate":"positive_number",disabled:this.state.sessionTimeoutNever,value:this.state.value,onChange:this._onChangeValue})),l.default.createElement(n.Col,{sm:3},l.default.createElement(u.default,{ref:"session_timeout_unit",className:"form-control session-timeout-fields",disabled:this.state.sessionTimeoutNever,value:this.state.unit,onChange:this._onChangeUnit})))))}});exports.default=i,e.exports=exports.default},1180:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},s=t(2),l=function(e){return e&&e.__esModule?e:{default:e}}(s),n=l.default.createClass({displayName:"TimeoutUnitSelect",getValue:function(){return this.refs.session_timeout_unit.value},render:function(){return l.default.createElement("select",a({className:"form-control",ref:"session_timeout_unit"},this.props),l.default.createElement("option",{value:1e3},"Seconds"),l.default.createElement("option",{value:6e4},"Minutes"),l.default.createElement("option",{value:36e5},"Hours"),l.default.createElement("option",{value:864e5},"Days"))}});exports.default=n,e.exports=exports.default},1184:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var a={setFieldValidity:function(e,t,a){"function"==typeof e.setCustomValidity&&e.setCustomValidity(t?a:"")}};exports.default=a,e.exports=exports.default},1325:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(2),l=a(s),n=t(15),r=t(43),o=t(1178),u=a(o),i=t(1179),c=a(i),d=t(48),m=t(18),f=a(m),p=t(1184),h=a(p),v=f.default.getStore("Users"),g=l.default.createClass({displayName:"NewUserForm",propTypes:{roles:l.default.PropTypes.array.isRequired,onSubmit:l.default.PropTypes.func.isRequired,onCancel:l.default.PropTypes.func.isRequired},getInitialState:function(){return{users:[],newRoles:null}},componentDidMount:function(){var e=this;v.loadUsers().then(function(t){e.setState({users:t})})},_onUsernameChange:function(e){var t=this.refs.username.getInputDOMNode(),a=this.state.users.some(function(t){return t.username===e.target.value});h.default.setFieldValidity(t,a,"Username is already taken")},_onPasswordChange:function(){var e=this.refs.password,t=this.refs.password_repeat;""!==e.value&&""!==t.value&&h.default.setFieldValidity(t,e.value!==t.value,"Passwords do not match")},_onSubmit:function(e){var t=this;e.preventDefault();var a={};Object.keys(this.refs).forEach(function(e){"password_repeat"!==e&&(a[e]=t.refs[e].getValue?t.refs[e].getValue():t.refs[e].value)}),this.props.onSubmit(a)},_onValueChange:function(e){var t=e.split(",");this.setState({newRoles:t})},render:function(){var e=l.default.createElement("span",{className:"help-block"},"Assign the relevant roles to this user to grant them access to the relevant streams and dashboards.",l.default.createElement("br",null),"The ",l.default.createElement("em",null,"Reader")," role grants basic access to the system and will be enabled.",l.default.createElement("br",null),"The ",l.default.createElement("em",null,"Admin")," role grants access to everything in Graylog."),t=this.state.newRoles,a=null;return null==t||t.includes("Reader")||t.includes("Admin")||(a=l.default.createElement(n.Alert,{bsStyle:"danger",role:"alert"},"You need to select at least one of the ",l.default.createElement("em",null,"Reader")," or ",l.default.createElement("em",null,"Admin")," roles.")),l.default.createElement("form",{id:"create-user-form",className:"form-horizontal",onSubmit:this._onSubmit},l.default.createElement(r.Input,{ref:"username",name:"username",id:"username",type:"text",maxLength:100,labelClassName:"col-sm-2",wrapperClassName:"col-sm-10",label:"Username",help:"Select a unique user name used to log in with.",required:!0,onChange:this._onUsernameChange,autoFocus:!0}),l.default.createElement(r.Input,{ref:"full_name",name:"fullname",id:"fullname",type:"text",maxLength:200,labelClassName:"col-sm-2",wrapperClassName:"col-sm-10",label:"Full Name",help:"Give a descriptive name for this account, e.g. the full name.",required:!0}),l.default.createElement(r.Input,{ref:"email",name:"email",id:"email",type:"email",maxLength:254,labelClassName:"col-sm-2",wrapperClassName:"col-sm-10",label:"Email Address",help:"Give the contact email address.",required:!0}),l.default.createElement(r.Input,{label:"Password",help:"Passwords must be at least 6 characters long. We recommend using a strong password.",labelClassName:"col-sm-2",wrapperClassName:"col-sm-10"},l.default.createElement(n.Row,null,l.default.createElement(n.Col,{sm:6},l.default.createElement("input",{className:"form-control",ref:"password",name:"password",id:"password",type:"password",placeholder:"Password",required:!0,minLength:"6",onChange:this._onPasswordChange})),l.default.createElement(n.Col,{sm:6},l.default.createElement("input",{className:"form-control",ref:"password_repeat",id:"password-repeat",type:"password",placeholder:"Repeat password",required:!0,minLength:"6",onChange:this._onPasswordChange})))),l.default.createElement(r.Input,{label:"Roles",help:e,labelClassName:"col-sm-2",wrapperClassName:"col-sm-10"},l.default.createElement(u.default,{ref:"roles",availableRoles:this.props.roles,userRoles:["Reader"],className:"form-control",onValueChange:this._onValueChange}),a),l.default.createElement(c.default,{ref:"session_timeout_ms"}),l.default.createElement(r.Input,{label:"Time Zone",help:"Choose the timezone to use to display times, or leave it as it is to use the system's default.",labelClassName:"col-sm-2",wrapperClassName:"col-sm-10"},l.default.createElement(d.TimezoneSelect,{ref:"timezone",className:"timezone-select"})),l.default.createElement("div",{className:"form-group"},l.default.createElement(n.Col,{smOffset:2,sm:10},l.default.createElement(n.Button,{type:"submit",bsStyle:"primary",className:"create-user save-button-margin",disabled:!!a},"Create User"),l.default.createElement(n.Button,{onClick:this.props.onCancel},"Cancel"))))}});exports.default=g,e.exports=exports.default},1371:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(2),l=a(s),n=t(15),r=t(75),o=a(r),u=t(5),i=a(u),c=t(18),d=a(c),m=t(48),f=t(1325),p=a(f),h=d.default.getStore("Roles"),v=d.default.getStore("Users"),g=l.default.createClass({displayName:"CreateUsersPage",propTypes:{history:l.default.PropTypes.object},getInitialState:function(){return{roles:void 0}},componentDidMount:function(){var e=this;h.loadRoles().then(function(t){e.setState({roles:t})})},_onSubmit:function(e){var t=this,a=e;a.permissions=[],delete a["session-timeout-never"],v.create(a).then(function(){i.default.success("User "+a.username+" was created successfully.","Success!"),t.props.history.replaceState(null,o.default.SYSTEM.AUTHENTICATION.USERS.LIST)},function(){i.default.error("Failed to create user!","Error!")})},_onCancel:function(){this.props.history.pushState(null,o.default.SYSTEM.AUTHENTICATION.USERS.LIST)},render:function(){return this.state.roles?l.default.createElement(m.DocumentTitle,{title:"Create new user"},l.default.createElement("span",null,l.default.createElement(m.PageHeader,{title:"Create new user",subpage:!0},l.default.createElement("span",null,"Use this page to create new Graylog users. The users and their permissions created here are not limited to the web interface but valid and required for the REST APIs of your Graylog server nodes, too.")),l.default.createElement(n.Row,null,l.default.createElement(n.Col,{lg:8},l.default.createElement(p.default,{roles:this.state.roles,onSubmit:this._onSubmit,onCancel:this._onCancel}))))):l.default.createElement(m.Spinner,null)}});exports.default=g,e.exports=exports.default}});
//# sourceMappingURL=37.200197dca04f05abe3f2.js.map