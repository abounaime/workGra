webpackJsonp([34],{1234:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),i=n(a),r=t(15),o=t(261),s=n(o),l=t(48),u=t(259),d=n(u),f=t(951),c=n(f),p=i.default.createClass({displayName:"MessageProcessorsConfig",propTypes:{config:i.default.PropTypes.object.isRequired,updateConfig:i.default.PropTypes.func.isRequired},getDefaultProps:function(){return{config:{disabled_processors:[],processor_order:[]}}},getInitialState:function(){return{config:{disabled_processors:this.props.config.disabled_processors,processor_order:this.props.config.processor_order}}},_openModal:function(){this.refs.configModal.open()},_closeModal:function(){this.refs.configModal.close()},_saveConfig:function(){var e=this;this._hasNoActiveProcessor()||this.props.updateConfig(this.state.config).then(function(){e._closeModal()})},_resetConfig:function(){this.setState(this.getInitialState())},_updateSorting:function(e){var t=d.default.clone(this.state.config);t.processor_order=e.map(function(e){return{class_name:e.id,name:e.title}}),this.setState({config:t})},_toggleStatus:function(e){var t=this;return function(){var n=t.state.config.disabled_processors,a=d.default.clone(t.state.config);t.refs[e].checked?a.disabled_processors=n.filter(function(t){return t!==e}):-1===n.indexOf(e)&&a.disabled_processors.push(e),t.setState({config:a})}},_hasNoActiveProcessor:function(){return this.state.config.disabled_processors.length>=this.state.config.processor_order.length},_noActiveProcessorWarning:function(){if(this._hasNoActiveProcessor())return i.default.createElement(r.Alert,{bsStyle:"danger"},i.default.createElement("strong",null,"ERROR:")," No active message processor!")},_summary:function(){var e=this;return this.state.config.processor_order.map(function(t,n){var a=e.state.config.disabled_processors.filter(function(e){return e===t.class_name}).length>0?"disabled":"active";return i.default.createElement("tr",{key:n},i.default.createElement("td",null,n+1),i.default.createElement("td",null,t.name),i.default.createElement("td",null,a))})},_sortableItems:function(){return this.state.config.processor_order.map(function(e){return{id:e.class_name,title:e.name}})},_statusForm:function(){var e=this;return d.default.clone(this.state.config.processor_order).sort(function(e,t){return(0,c.default)(e.name,t.name)}).map(function(t,n){var a=e.state.config.disabled_processors.filter(function(e){return e===t.class_name}).length<1;return i.default.createElement("tr",{key:n},i.default.createElement("td",null,t.name),i.default.createElement("td",null,i.default.createElement("input",{ref:t.class_name,type:"checkbox",checked:a,onChange:e._toggleStatus(t.class_name)})))})},render:function(){return i.default.createElement("div",null,i.default.createElement("h2",null,"Message Processors Configuration"),i.default.createElement("p",null,"The following message processors are executed in order. Disabled processors will be skipped."),i.default.createElement(r.Table,{striped:!0,bordered:!0,condensed:!0,className:"top-margin"},i.default.createElement("thead",null,i.default.createElement("tr",null,i.default.createElement("th",null,"#"),i.default.createElement("th",null,"Processor"),i.default.createElement("th",null,"Status"))),i.default.createElement("tbody",null,this._summary())),i.default.createElement(l.IfPermitted,{permissions:"clusterconfigentry:edit"},i.default.createElement(r.Button,{bsStyle:"info",bsSize:"xs",onClick:this._openModal},"Update")),i.default.createElement(s.default,{ref:"configModal",title:"Update Message Processors Configuration",onSubmitForm:this._saveConfig,onModalClose:this._resetConfig,submitButtonText:"Save"},i.default.createElement("h3",null,"Order"),i.default.createElement("p",null,"Use drag and drop to change the execution order of the message processors."),i.default.createElement(l.SortableList,{items:this._sortableItems(),onMoveItem:this._updateSorting}),i.default.createElement("h3",null,"Status"),i.default.createElement("p",null,"Change the checkboxes to change the status of a message processor."),i.default.createElement(r.Table,{striped:!0,bordered:!0,condensed:!0,className:"top-margin"},i.default.createElement("thead",null,i.default.createElement("tr",null,i.default.createElement("th",null,"Processor"),i.default.createElement("th",null,"Enabled"))),i.default.createElement("tbody",null,this._statusForm())),this._noActiveProcessorWarning()))}});exports.default=p,e.exports=exports.default},1235:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),i=n(a),r=t(15),o=t(43),s=t(48),l=t(259),u=n(l),d=t(34),f=n(d);t(264);var c=t(1236),p=n(c),m=t(1237),g=n(m),h=i.default.createClass({displayName:"SearchesConfig",propTypes:{config:i.default.PropTypes.object.isRequired,updateConfig:i.default.PropTypes.func.isRequired},getInitialState:function(){var e=this._getPropConfigValue("query_time_range_limit");return{config:{query_time_range_limit:e,relative_timerange_options:this._getPropConfigValue("relative_timerange_options"),surrounding_timerange_options:this._getPropConfigValue("surrounding_timerange_options"),surrounding_filter_fields:this._getPropConfigValue("surrounding_filter_fields")},limitEnabled:f.default.duration(e).asMilliseconds()>0,relativeTimeRangeOptionsUpdate:void 0,surroundingTimeRangeOptionsUpdate:void 0}},_getPropConfigValue:function(e){return this.props.config?this.props.config[e]:void 0},_onUpdate:function(e){var t=this;return function(n){var a=u.default.clone(t.state.config);a[e]=n,t.setState({config:a})}},_onRelativeTimeRangeOptionsUpdate:function(e){this.setState({relativeTimeRangeOptionsUpdate:e})},_onSurroundingTimeRangeOptionsUpdate:function(e){this.setState({surroundingTimeRangeOptionsUpdate:e})},_buildTimeRangeOptions:function(e){return Object.keys(e).map(function(t){return{period:t,description:e[t]}})},_onFilterFieldsUpdate:function(e){this.setState({surroundingFilterFields:e.target.value})},_onChecked:function(){var e=u.default.clone(this.state.config);this.state.limitEnabled?e.query_time_range_limit="PT0S":e.query_time_range_limit="P30D",this.setState({config:e,limitEnabled:!this.state.limitEnabled})},_isEnabled:function(){return this.state.limitEnabled},_saveConfig:function(){var e=this,t=u.default.clone(this.state.config);this.state.relativeTimeRangeOptionsUpdate&&(t.relative_timerange_options={},this.state.relativeTimeRangeOptionsUpdate.forEach(function(e){t.relative_timerange_options[e.period]=e.description}),this.setState({relativeTimeRangeOptionsUpdate:void 0})),this.state.surroundingTimeRangeOptionsUpdate&&(t.surrounding_timerange_options={},this.state.surroundingTimeRangeOptionsUpdate.forEach(function(e){t.surrounding_timerange_options[e.period]=e.description}),this.setState({surroundingTimeRangeOptionsUpdate:void 0})),this.state.surroundingFilterFields&&(t.surrounding_filter_fields=this.state.surroundingFilterFields.split(",").map(function(e){return e.trim()}).filter(function(e){return e.length>0}),this.setState({surroundingFilterFields:void 0})),this.props.updateConfig(t).then(function(){e._closeModal()})},_resetConfig:function(){this.setState(this.getInitialState())},_openModal:function(){this.refs.searchesConfigModal.open()},_closeModal:function(){this.refs.searchesConfigModal.close()},queryTimeRangeLimitValidator:function(e){return e>=1},relativeTimeRangeValidator:function(e,t){return e>=1||"PT0S"===t},surroundingTimeRangeValidator:function(e){return e>=1},render:function(){var e=this.state.config,t=f.default.duration(e.query_time_range_limit),n=this._isEnabled()?e.query_time_range_limit+" ("+t.format()+")":"disabled",a=void 0,l=void 0;return this.state.config.surrounding_filter_fields&&(a=this.state.config.surrounding_filter_fields.map(function(e,t){return i.default.createElement("li",{key:t},e)}),l=this.state.config.surrounding_filter_fields.join(", ")),i.default.createElement("div",null,i.default.createElement("h2",null,"Search Configuration"),i.default.createElement("dl",{className:"deflist"},i.default.createElement("dt",null,"Query time range limit"),i.default.createElement("dd",null,n),i.default.createElement("dd",null,"The maximum time users can query data in the past. This prevents users from accidentally creating queries which span a lot of data and would need a long time and many resources to complete (if at all).")),i.default.createElement(r.Row,null,i.default.createElement(r.Col,{md:6},i.default.createElement("strong",null,"Relative time range options"),i.default.createElement(g.default,{options:this.state.config.relative_timerange_options})),i.default.createElement(r.Col,{md:6},i.default.createElement("strong",null,"Surrounding time range options"),i.default.createElement(g.default,{options:this.state.config.surrounding_timerange_options}),i.default.createElement("strong",null,"Surrounding search filter fields"),i.default.createElement("ul",null,a))),i.default.createElement(s.IfPermitted,{permissions:"clusterconfigentry:edit"},i.default.createElement(r.Button,{bsStyle:"info",bsSize:"xs",onClick:this._openModal},"Update")),i.default.createElement(o.BootstrapModalForm,{ref:"searchesConfigModal",title:"Update Search Configuration",onSubmitForm:this._saveConfig,onModalClose:this._resetConfig,submitButtonText:"Save"},i.default.createElement("fieldset",null,i.default.createElement(o.Input,{type:"checkbox",label:"Enable query limit",name:"enabled",checked:this._isEnabled(),onChange:this._onChecked}),this._isEnabled()&&i.default.createElement(s.ISODurationInput,{duration:e.query_time_range_limit,update:this._onUpdate("query_time_range_limit"),label:"Query time range limit (ISO8601 Duration)",help:'The maximum time range for searches. (i.e. "P30D" for 30 days, "PT24H" for 24 hours)',validator:this.queryTimeRangeLimitValidator,required:!0}),i.default.createElement(p.default,{options:this.state.relativeTimeRangeOptionsUpdate||this._buildTimeRangeOptions(this.state.config.relative_timerange_options),update:this._onRelativeTimeRangeOptionsUpdate,validator:this.relativeTimeRangeValidator,title:"Relative Timerange Options",help:i.default.createElement("span",null,"Configure the available options for the ",i.default.createElement("strong",null,"relative")," time range selector as ",i.default.createElement("strong",null,"ISO8601 duration"))}),i.default.createElement(p.default,{options:this.state.surroundingTimeRangeOptionsUpdate||this._buildTimeRangeOptions(this.state.config.surrounding_timerange_options),update:this._onSurroundingTimeRangeOptionsUpdate,validator:this.surroundingTimeRangeValidator,title:"Surrounding Timerange Options",help:i.default.createElement("span",null,"Configure the available options for the ",i.default.createElement("strong",null,"surrounding")," time range selector as ",i.default.createElement("strong",null,"ISO8601 duration"))}),i.default.createElement(o.Input,{type:"text",label:"Surrounding search filter fields",onChange:this._onFilterFieldsUpdate,value:this.state.surroundingFilterFields||l,help:"A ',' separated list of message fields that will be used as filter for the surrounding messages query.",required:!0}))))}});exports.default=h,e.exports=exports.default},1236:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),i=n(a),r=t(15),o=t(282),s=n(o),l=t(259),u=n(l),d=i.default.createClass({displayName:"TimeRangeOptionsForm",propTypes:{options:i.default.PropTypes.array,title:i.default.PropTypes.string.isRequired,help:i.default.PropTypes.any.isRequired,addButtonTitle:i.default.PropTypes.string,update:i.default.PropTypes.func.isRequired,validator:i.default.PropTypes.func},getDefaultProps:function(){return{options:[],addButtonTitle:"Add option",validator:function(){return!0}}},_update:function(e){this.props.update(e)},_onAdd:function(){var e=u.default.clone(this.props.options);e&&(e.push({period:"",description:""}),this._update(e))},_onRemove:function(e){var t=this;return function(){var n=u.default.clone(t.props.options);n.splice(e,1),t._update(n)}},_onChange:function(e,t){var n=this;return function(a){var i=u.default.clone(n.props.options);i.forEach(function(n,r){if(r===e){var o=a.target.value;"period"===t&&(o=o.toUpperCase(),o.startsWith("P")||(o="P"+o)),i[r][t]=o}}),n._update(i)}},_buildTimeRangeOptions:function(){var e=this;return this.props.options.map(function(t,n){var a=t.period,o=t.description,l=s.default.durationStyle(a,e.props.validator,"has-error");return i.default.createElement("div",{key:"timerange-option-"+n},i.default.createElement(r.Row,null,i.default.createElement(r.Col,{xs:4},i.default.createElement("div",{className:"input-group "+l},i.default.createElement("input",{type:"text",className:"form-control",value:a,onChange:e._onChange(n,"period")}),i.default.createElement("span",{className:"input-group-addon"},s.default.formatDuration(a,e.props.validator)))),i.default.createElement(r.Col,{xs:8},i.default.createElement("div",{className:"input-group"},i.default.createElement("input",{type:"text",className:"form-control",placeholder:"Add description...",value:o,onChange:e._onChange(n,"description")}),i.default.createElement("span",{className:"input-group-addon"},i.default.createElement("i",{className:"fa fa-trash",style:{cursor:"pointer"},onClick:e._onRemove(n)}))))))})},render:function(){return i.default.createElement("div",{className:"form-group"},i.default.createElement("label",{className:"control-label"},this.props.title),i.default.createElement("span",{className:"help-block"},this.props.help),i.default.createElement("div",{className:"wrapper"},this._buildTimeRangeOptions()),i.default.createElement(r.Button,{bsSize:"xs",onClick:this._onAdd},this.props.addButtonTitle))}});exports.default=d,e.exports=exports.default},1237:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=t(2),a=function(e){return e&&e.__esModule?e:{default:e}}(n),i=a.default.createClass({displayName:"TimeRangeOptionsSummary",propTypes:{options:a.default.PropTypes.object.isRequired},render:function(){var e=this,t=null;return this.props.options&&(t=Object.keys(this.props.options).map(function(t,n){return a.default.createElement("span",{key:"timerange-options-summary-"+n},a.default.createElement("dt",null,t),a.default.createElement("dd",null,e.props.options[t]))})),a.default.createElement("dl",{className:"deflist"},t)}});exports.default=i,e.exports=exports.default},1368:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),i=n(a),r=t(1),o=n(r),s=t(15),l=t(48),u=t(258),d=t(18),f=n(d),c=t(7),p=n(c),m=t(1235),g=n(m),h=t(1234),_=n(h),E=f.default.getStore("Configurations"),v=p.default.getActions("Configuration"),C=i.default.createClass({displayName:"ConfigurationsPage",mixins:[o.default.connect(E)],getInitialState:function(){return{configuration:null}},componentDidMount:function(){this.style.use(),v.list(this.SEARCHES_CLUSTER_CONFIG),v.listMessageProcessorsConfig(this.MESSAGE_PROCESSORS_CONFIG),u.PluginStore.exports("systemConfigurations").forEach(function(e){v.list(e.configType)})},componentWillUnmount:function(){this.style.unuse()},style:t(982),SEARCHES_CLUSTER_CONFIG:"org.graylog2.indexer.searches.SearchesClusterConfig",MESSAGE_PROCESSORS_CONFIG:"org.graylog2.messageprocessors.MessageProcessorsConfig",_getConfig:function(e){return this.state.configuration&&this.state.configuration[e]?this.state.configuration[e]:null},_onUpdate:function(e){var t=this;return function(n){switch(e){case t.MESSAGE_PROCESSORS_CONFIG:return v.updateMessageProcessorsConfig(e,n);default:return v.update(e,n)}}},_pluginConfigs:function(){var e=this;return u.PluginStore.exports("systemConfigurations").map(function(t,n){return i.default.createElement(t.component,{key:"system-configuration-"+n,config:e._getConfig(t.configType)||void 0,updateConfig:e._onUpdate(t.configType)})})},_pluginConfigRows:function(){for(var e=this._pluginConfigs(),t=[],n=0;e.length>0;)n++,t.push(i.default.createElement(s.Row,{key:"plugin-config-row-"+n},i.default.createElement(s.Col,{md:6},e.shift()),i.default.createElement(s.Col,{md:6},e.shift()||i.default.createElement("span",null," "))));return t},render:function(){var e=this._getConfig(this.SEARCHES_CLUSTER_CONFIG),t=this._getConfig(this.MESSAGE_PROCESSORS_CONFIG),n=void 0,a=void 0;n=e?i.default.createElement(g.default,{config:e,updateConfig:this._onUpdate(this.SEARCHES_CLUSTER_CONFIG)}):i.default.createElement(l.Spinner,null),a=t?i.default.createElement(_.default,{config:t,updateConfig:this._onUpdate(this.MESSAGE_PROCESSORS_CONFIG)}):i.default.createElement(l.Spinner,null);var r=this._pluginConfigRows();return i.default.createElement(l.DocumentTitle,{title:"Configurations"},i.default.createElement("span",null,i.default.createElement(l.PageHeader,{title:"Configurations"},i.default.createElement("span",null,"You can configure system settings for different sub systems on this page.")),i.default.createElement(s.Row,{className:"content"},i.default.createElement(s.Col,{md:6},n),i.default.createElement(s.Col,{md:6},a)),r.length>0&&i.default.createElement(s.Row,{className:"content"},i.default.createElement(s.Col,{md:12},i.default.createElement("h2",null,"Plugins"),i.default.createElement("p",{className:"description"},"Configuration for installed plugins."),i.default.createElement("hr",{className:"separator"}),i.default.createElement("div",{className:"top-margin"},r)))))}});exports.default=C,e.exports=exports.default},978:function(e,exports,t){exports=e.exports=t(19)(),exports.push([e.i,".deflist{margin-top:10px}.deflist dt{float:left;clear:left}.deflist dd{margin-left:160px}.top-margin,hr.separator{margin-top:10px}hr.separator{margin-bottom:5px}",""])},982:function(e,exports,t){var n,a=0,i=t(978);"string"==typeof i&&(i=[[e.i,i,""]]),exports.use=exports.ref=function(){return a++||(exports.locals=i.locals,n=t(20)(i,{})),exports},exports.unuse=exports.unref=function(){--a||(n(),n=null)}}});
//# sourceMappingURL=34.200197dca04f05abe3f2.js.map