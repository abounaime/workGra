webpackJsonp([7],{1e3:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),r=n(a),i=t(15),l=t(48),s=t(49),d=n(s),u=t(954),o=r.default.createClass({displayName:"IndexSummary",propTypes:{children:r.default.PropTypes.node.isRequired,index:r.default.PropTypes.object.isRequired,indexRange:r.default.PropTypes.object,isDeflector:r.default.PropTypes.bool.isRequired,name:r.default.PropTypes.string.isRequired},getInitialState:function(){return{showDetails:this.props.isDeflector}},_formatLabels:function(e){var t=[];return e.is_deflector&&t.push(r.default.createElement(i.Label,{key:this.props.name+"-deflector-label",bsStyle:"primary"},"active write index")),e.is_closed&&t.push(r.default.createElement(i.Label,{key:this.props.name+"-closed-label",bsStyle:"warning"},"closed")),e.is_reopened&&t.push(r.default.createElement(i.Label,{key:this.props.name+"-reopened-label",bsStyle:"success"},"reopened")),r.default.createElement("span",{className:"index-label"},t)},_formatIndexRange:function(){if(this.props.isDeflector)return r.default.createElement("span",null,"Contains messages up to ",r.default.createElement(l.Timestamp,{dateTime:(new d.default).toISOString(),relative:!0}));var e=this.props.index.size;if(e){var t=e.events,n=e.deleted;if(0===t||t-n==0)return"Index does not contain any messages."}return this.props.indexRange?0===this.props.indexRange.begin?r.default.createElement("span",null,"Contains messages up to ",r.default.createElement(l.Timestamp,{dateTime:this.props.indexRange.end,relative:!0})):r.default.createElement("span",null,"Contains messages from ",r.default.createElement(l.Timestamp,{dateTime:this.props.indexRange.begin,relative:!0})," up to"," ",r.default.createElement(l.Timestamp,{dateTime:this.props.indexRange.end,relative:!0})):"Time range of index is unknown, because index range is not available. Please recalculate index ranges manually."},_formatShowDetailsLink:function(){return this.state.showDetails?r.default.createElement("span",{className:"index-more-actions"},r.default.createElement("i",{className:"fa fa-caret-down"})," Hide Details / Actions"):r.default.createElement("span",{className:"index-more-actions"},r.default.createElement("i",{className:"fa fa-caret-right"})," Show Details / Actions")},_toggleShowDetails:function(e){e.preventDefault(),this.setState({showDetails:!this.state.showDetails})},render:function(){var e=this.props.index;return r.default.createElement("span",null,r.default.createElement("h2",null,this.props.name," ",r.default.createElement("small",null,this._formatLabels(e)," ",this._formatIndexRange(e)," ",r.default.createElement(u.IndexSizeSummary,{index:e}),r.default.createElement("a",{onClick:this._toggleShowDetails,href:"#"},this._formatShowDetailsLink()))),r.default.createElement("div",{className:"index-info-holder"},this.state.showDetails&&this.props.children))}});exports.default=o,e.exports=exports.default},1001:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),r=n(a),i=t(15),l=t(258),s=t(993),d=n(s);t(970),t(969);var u=t(982),o=r.default.createClass({displayName:"IndicesConfiguration",propTypes:{indexSet:r.default.PropTypes.object.isRequired},componentDidMount:function(){u.use()},componentWillUnmount:function(){u.unuse()},render:function(){if(!this.props.indexSet.writable)return r.default.createElement(i.Row,null,r.default.createElement(i.Col,{md:12},"Index set is not writable and will not be included in index rotation and retention. It is also not possible to assign it to a stream."));var e={strategy:this.props.indexSet.rotation_strategy_class,config:this.props.indexSet.rotation_strategy},t={strategy:this.props.indexSet.retention_strategy_class,config:this.props.indexSet.retention_strategy};return r.default.createElement(i.Row,null,r.default.createElement(i.Col,{md:6},r.default.createElement(d.default,{config:e,pluginExports:l.PluginStore.exports("indexRotationConfig")})),r.default.createElement(i.Col,{md:6},r.default.createElement(d.default,{config:t,pluginExports:l.PluginStore.exports("indexRetentionConfig")})))}});exports.default=o,e.exports=exports.default},1002:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),r=n(a),i=t(15),l=t(7),s=n(l),d=t(18),u=n(d),o=s.default.getActions("Deflector"),c=s.default.getActions("IndexRanges"),f=(u.default.getStore("Deflector"),r.default.createClass({displayName:"IndicesMaintenanceDropdown",propTypes:{indexSetId:r.default.PropTypes.string.isRequired,indexSet:r.default.PropTypes.object},_onRecalculateIndexRange:function(){window.confirm("This will recalculate index ranges for this index set using a background system job. Do you want to proceed?")&&c.recalculate(this.props.indexSetId)},_onCycleDeflector:function(){var e=this;window.confirm("This will manually cycle the current active write index on this index set. Do you want to proceed?")&&o.cycle(this.props.indexSetId).then(function(){o.list(e.props.indexSetId)})},render:function(){var e=void 0;return this.props.indexSet&&this.props.indexSet.writable&&(e=r.default.createElement(i.MenuItem,{eventKey:"2",onClick:this._onCycleDeflector},"Rotate active write index")),r.default.createElement(i.ButtonGroup,null,r.default.createElement(i.DropdownButton,{bsStyle:"info",title:"Maintenance",id:"indices-maintenance-actions",pullRight:!0},r.default.createElement(i.MenuItem,{eventKey:"1",onClick:this._onRecalculateIndexRange},"Recalculate index ranges"),e))}}));exports.default=f,e.exports=exports.default},1003:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),r=n(a),i=t(15),l=t(951),s=n(l),d=t(954),u=r.default.createClass({displayName:"IndicesOverview",propTypes:{closedIndices:r.default.PropTypes.array.isRequired,deflector:r.default.PropTypes.object.isRequired,indexDetails:r.default.PropTypes.object.isRequired,indices:r.default.PropTypes.object.isRequired,indexSetId:r.default.PropTypes.string.isRequired},_formatIndex:function(e,t){var n=this.props.indices[e],a=n&&n.range?n.range:null;return r.default.createElement(i.Row,{key:"index-summary-"+e,className:"content index-description"},r.default.createElement(i.Col,{md:12},r.default.createElement(d.IndexSummary,{index:t,name:e,count:n.size,indexRange:a,isDeflector:n.is_deflector},r.default.createElement("span",null,r.default.createElement(d.IndexDetails,{index:this.props.indexDetails[e],indexName:e,indexRange:a,indexSetId:this.props.indexSetId,isDeflector:n.is_deflector})))))},_formatClosedIndex:function(e,t){var n=t.range;return r.default.createElement(i.Row,{key:"index-summary-"+e,className:"content index-description"},r.default.createElement(i.Col,{md:12},r.default.createElement(d.IndexSummary,{index:t,name:e,indexRange:n,isDeflector:t.is_deflector},r.default.createElement("span",null,r.default.createElement(d.ClosedIndexDetails,{indexName:e,indexRange:n})))))},render:function(){var e=this,t=Object.keys(this.props.indices).map(function(t){return e.props.indices[t].is_closed?e._formatClosedIndex(t,e.props.indices[t]):e._formatIndex(t,e.props.indices[t])});return r.default.createElement("span",null,t.sort(function(e,t){return(0,s.default)(t.key,e.key)}))}});exports.default=u,e.exports=exports.default},1004:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),r=n(a),i=t(115),l=n(i),s=t(34),d=n(s),u=r.default.createClass({displayName:"ShardMeter",propTypes:{title:r.default.PropTypes.string.isRequired,shardMeter:r.default.PropTypes.object.isRequired},_formatMeter:function(e){var t=r.default.createElement("span",null,(0,l.default)(e.total).format("0,0")," ops");return e.total>0?r.default.createElement("span",null,t," ",r.default.createElement("span",{title:e.time_seconds+"s"},"(took ",d.default.duration(e.time_seconds,"seconds").humanize(),")")):t},render:function(){var e=this.props.shardMeter;return r.default.createElement("span",null,r.default.createElement("h3",{style:{display:"inline"}},this.props.title),r.default.createElement("dl",null,r.default.createElement("dt",null,"Index:"),r.default.createElement("dd",null,this._formatMeter(e.index)),r.default.createElement("dt",null,"Flush:"),r.default.createElement("dd",null,this._formatMeter(e.flush)),r.default.createElement("dt",null,"Merge:"),r.default.createElement("dd",null,this._formatMeter(e.merge)),r.default.createElement("dt",null,"Query:"),r.default.createElement("dd",null,this._formatMeter(e.search_query)),r.default.createElement("dt",null,"Fetch:"),r.default.createElement("dd",null,this._formatMeter(e.search_fetch)),r.default.createElement("dt",null,"Get:"),r.default.createElement("dd",null,this._formatMeter(e.get)),r.default.createElement("dt",null,"Refresh:"),r.default.createElement("dd",null,this._formatMeter(e.refresh))))}});exports.default=u,e.exports=exports.default},1005:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),r=n(a),i=t(67),l=n(i),s=t(15),d=r.default.createClass({displayName:"ShardRouting",propTypes:{route:r.default.PropTypes.object.isRequired},render:function(){var e=this.props.route,t=r.default.createElement(s.Tooltip,{id:"shard-route-state-tooltip"},"State: ",r.default.createElement("i",null,e.state)," on ",e.node_hostname," (",e.node_name,")");return r.default.createElement("li",{className:(0,l.default)("shard","shard-"+e.state,{"shard-primary":e.primary})},r.default.createElement(s.OverlayTrigger,{placement:"top",overlay:t},r.default.createElement("span",{className:"id"},"S",e.id)))}});exports.default=d,e.exports=exports.default},1006:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),r=n(a),i=t(954),l=t(951),s=n(l),d=r.default.createClass({displayName:"ShardRoutingOverview",propTypes:{routing:r.default.PropTypes.array.isRequired,indexName:r.default.PropTypes.string.isRequired},render:function(){var e=this.props,t=e.indexName,n=e.routing;return r.default.createElement("div",{className:"shard-routing"},r.default.createElement("h3",null,"Shard routing"),r.default.createElement("ul",{className:"shards"},n.sort(function(e,t){return(0,s.default)(e.id,t.id)}).map(function(e){return r.default.createElement(i.ShardRouting,{key:t+"-shard-route-"+e.node_id+"-"+e.id,route:e})})),r.default.createElement("br",{style:{clear:"both"}}),r.default.createElement("div",{className:"description"},"Bold shards are primaries, others are replicas. Replicas are elected to primaries automatically when primaries leave the cluster. Size and document counts only reflect primary shards and no possible replica duplication."))}});exports.default=d,e.exports=exports.default},1007:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=t(2),a=function(e){return e&&e.__esModule?e:{default:e}}(n),r=t(43),i=a.default.createClass({displayName:"ClosingRetentionStrategyConfiguration",propTypes:{config:a.default.PropTypes.object.isRequired,jsonSchema:a.default.PropTypes.object.isRequired,updateConfig:a.default.PropTypes.func.isRequired},getInitialState:function(){return{max_number_of_indices:this.props.config.max_number_of_indices}},_onInputUpdate:function(e){var t=this;return function(n){var a={};a[e]=n.target.value,t.setState(a),t.props.updateConfig(a)}},render:function(){return a.default.createElement("div",null,a.default.createElement("fieldset",null,a.default.createElement(r.Input,{type:"number",id:"max-number-of-indices",label:"Max number of indices",onChange:this._onInputUpdate("max_number_of_indices"),value:this.state.max_number_of_indices,help:a.default.createElement("span",null,"Maximum number of indices to keep before ",a.default.createElement("strong",null,"closing")," the oldest ones"),required:!0})))}});exports.default=i,e.exports=exports.default},1008:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=t(2),a=function(e){return e&&e.__esModule?e:{default:e}}(n),r=a.default.createClass({displayName:"ClosingRetentionStrategySummary",propTypes:{config:a.default.PropTypes.object.isRequired},render:function(){return a.default.createElement("div",null,a.default.createElement("dl",null,a.default.createElement("dt",null,"Index retention strategy:"),a.default.createElement("dd",null,"Close"),a.default.createElement("dt",null,"Max number of indices:"),a.default.createElement("dd",null,this.props.config.max_number_of_indices)))}});exports.default=r,e.exports=exports.default},1009:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=t(2),a=function(e){return e&&e.__esModule?e:{default:e}}(n),r=t(43),i=a.default.createClass({displayName:"DeletionRetentionStrategyConfiguration",propTypes:{config:a.default.PropTypes.object.isRequired,jsonSchema:a.default.PropTypes.object.isRequired,updateConfig:a.default.PropTypes.func.isRequired},getInitialState:function(){return{max_number_of_indices:this.props.config.max_number_of_indices}},_onInputUpdate:function(e){var t=this;return function(n){var a={};a[e]=n.target.value,t.setState(a),t.props.updateConfig(a)}},render:function(){return a.default.createElement("div",null,a.default.createElement("fieldset",null,a.default.createElement(r.Input,{type:"number",id:"max-number-of-indices",label:"Max number of indices",onChange:this._onInputUpdate("max_number_of_indices"),value:this.state.max_number_of_indices,help:a.default.createElement("span",null,"Maximum number of indices to keep before ",a.default.createElement("strong",null,"deleting")," the oldest ones"),required:!0})))}});exports.default=i,e.exports=exports.default},1010:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=t(2),a=function(e){return e&&e.__esModule?e:{default:e}}(n),r=a.default.createClass({displayName:"DeletionRetentionStrategySummary",propTypes:{config:a.default.PropTypes.object.isRequired},render:function(){return a.default.createElement("div",null,a.default.createElement("dl",null,a.default.createElement("dt",null,"Index retention strategy:"),a.default.createElement("dd",null,"Delete"),a.default.createElement("dt",null,"Max number of indices:"),a.default.createElement("dd",null,this.props.config.max_number_of_indices)))}});exports.default=r,e.exports=exports.default},1011:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=t(2),a=function(e){return e&&e.__esModule?e:{default:e}}(n),r=t(15),i=a.default.createClass({displayName:"NoopRetentionStrategyConfiguration",render:function(){return a.default.createElement(r.Alert,null,"This retention strategy is not configurable because it does not do anything.")}});exports.default=i,e.exports=exports.default},1012:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=t(2),a=function(e){return e&&e.__esModule?e:{default:e}}(n),r=a.default.createClass({displayName:"NoopRetentionStrategySummary",render:function(){return a.default.createElement("div",null,a.default.createElement("dl",null,a.default.createElement("dt",null,"Index retention strategy:"),a.default.createElement("dd",null,"Do nothing")))}});exports.default=r,e.exports=exports.default},1013:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=t(2),a=function(e){return e&&e.__esModule?e:{default:e}}(n),r=t(43),i=a.default.createClass({displayName:"MessageCountRotationStrategyConfiguration",propTypes:{config:a.default.PropTypes.object.isRequired,jsonSchema:a.default.PropTypes.object.isRequired,updateConfig:a.default.PropTypes.func.isRequired},getInitialState:function(){return{max_docs_per_index:this.props.config.max_docs_per_index}},_onInputUpdate:function(e){var t=this;return function(n){var a={};a[e]=n.target.value,t.setState(a),t.props.updateConfig(a)}},render:function(){return a.default.createElement("div",null,a.default.createElement("fieldset",null,a.default.createElement(r.Input,{type:"number",id:"max-docs-per-index",label:"Max documents per index",onChange:this._onInputUpdate("max_docs_per_index"),value:this.state.max_docs_per_index,help:"Maximum number of documents in an index before it gets rotated",required:!0})))}});exports.default=i,e.exports=exports.default},1014:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=t(2),a=function(e){return e&&e.__esModule?e:{default:e}}(n),r=a.default.createClass({displayName:"MessageCountRotationStrategySummary",propTypes:{config:a.default.PropTypes.object.isRequired},render:function(){return a.default.createElement("div",null,a.default.createElement("dl",null,a.default.createElement("dt",null,"Index rotation strategy:"),a.default.createElement("dd",null,"Message Count"),a.default.createElement("dt",null,"Max docs per index:"),a.default.createElement("dd",null,this.props.config.max_docs_per_index)))}});exports.default=r,e.exports=exports.default},1015:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),r=n(a),i=t(43),l=t(117),s=n(l),d=r.default.createClass({displayName:"SizeBasedRotationStrategyConfiguration",propTypes:{config:r.default.PropTypes.object.isRequired,jsonSchema:r.default.PropTypes.object.isRequired,updateConfig:r.default.PropTypes.func.isRequired},getInitialState:function(){return{max_size:this.props.config.max_size}},_onInputUpdate:function(e){var t=this;return function(n){var a={};a[e]=n.target.value,t.setState(a),t.props.updateConfig(a)}},_formatSize:function(){return s.default.formatBytes(this.state.max_size)},render:function(){return r.default.createElement("div",null,r.default.createElement("fieldset",null,r.default.createElement(i.Input,{type:"number",id:"max-size",label:"Max size per index (in bytes)",onChange:this._onInputUpdate("max_size"),value:this.state.max_size,help:"Maximum size of an index before it gets rotated",addonAfter:this._formatSize(),required:!0})))}});exports.default=d,e.exports=exports.default},1016:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),r=n(a),i=t(117),l=n(i),s=r.default.createClass({displayName:"SizeBasedRotationStrategySummary",propTypes:{config:r.default.PropTypes.object.isRequired},render:function(){return r.default.createElement("div",null,r.default.createElement("dl",null,r.default.createElement("dt",null,"Index rotation strategy:"),r.default.createElement("dd",null,"Index Size"),r.default.createElement("dt",null,"Max index size:"),r.default.createElement("dd",null,this.props.config.max_size," bytes (",l.default.formatBytes(this.props.config.max_size),")")))}});exports.default=s,e.exports=exports.default},1017:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),r=n(a),i=t(43),l=t(34),s=n(l),d=r.default.createClass({displayName:"TimeBasedRotationStrategyConfiguration",propTypes:{config:r.default.PropTypes.object.isRequired,jsonSchema:r.default.PropTypes.object.isRequired,updateConfig:r.default.PropTypes.func.isRequired},getInitialState:function(){return{rotation_period:this.props.config.rotation_period}},_onPeriodUpdate:function(e){var t=this;return function(){var n={},a=t.refs[e].getValue().toUpperCase();a.startsWith("P")||(a="P"+a),n[e]=a,t.setState(n),t._isValidPeriod(n[e])&&t.props.updateConfig(n)}},_isValidPeriod:function(e){var t=e||this.state.rotation_period;return s.default.duration(t).asMilliseconds()>=36e5},_validationState:function(){if(!this._isValidPeriod())return"error"},_formatDuration:function(){return this._isValidPeriod()?s.default.duration(this.state.rotation_period).humanize():"invalid (min 1 hour)"},render:function(){return r.default.createElement("div",null,r.default.createElement(i.Input,{type:"text",ref:"rotation_period",label:"Rotation period (ISO8601 Duration)",onChange:this._onPeriodUpdate("rotation_period"),value:this.state.rotation_period,help:'How long an index gets written to before it is rotated. (i.e. "P1D" for 1 day, "PT6H" for 6 hours)',addonAfter:this._formatDuration(),bsStyle:this._validationState(),required:!0}))}});exports.default=d,e.exports=exports.default},1018:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),r=n(a),i=t(34),l=n(i);t(264);var s=r.default.createClass({displayName:"TimeBasedRotationStrategySummary",propTypes:{config:r.default.PropTypes.object.isRequired},_humanizedPeriod:function(){var e=l.default.duration(this.props.config.rotation_period);return e.format()+", "+e.humanize()},render:function(){return r.default.createElement("div",null,r.default.createElement("dl",null,r.default.createElement("dt",null,"Index rotation strategy:"),r.default.createElement("dd",null,"Index Time"),r.default.createElement("dt",null,"Rotation period:"),r.default.createElement("dd",null,this.props.config.rotation_period," (",this._humanizedPeriod(),")")))}});exports.default=s,e.exports=exports.default},1033:function(e,exports,t){exports=e.exports=t(19)(),exports.push([e.i,".index-set-details dt{float:left;width:160px;overflow:hidden;clear:left;text-align:left;text-overflow:ellipsis;white-space:nowrap}.index-set-details dd{margin-left:180px}.index-set-details dl{margin-bottom:0}",""])},1034:function(e,exports,t){var n,a=0,r=t(1033);"string"==typeof r&&(r=[[e.i,r,""]]),exports.use=exports.ref=function(){return a++||(exports.locals=r.locals,n=t(20)(r,{})),exports},exports.unuse=exports.unref=function(){--a||(n(),n=null)}},1056:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),r=n(a),i=t(1),l=n(i),s=t(15),d=t(18),u=n(d),o=t(48),c=t(960),f=t(952),p=n(f),m=t(968),h=u.default.getStore("IndexerCluster"),g=r.default.createClass({displayName:"IndexerClusterHealth",mixins:[l.default.connect(h)],componentDidMount:function(){h.update()},render:function(){var e=this.state.health,t=void 0;return t=e?r.default.createElement(m.IndexerClusterHealthSummary,{health:e}):r.default.createElement(o.Spinner,null),r.default.createElement(s.Row,{className:"content"},r.default.createElement(s.Col,{md:12},r.default.createElement("h2",null,"Elasticsearch cluster"),r.default.createElement(c.SmallSupportLink,null,"The possible Elasticsearch cluster states and more related information is available in the"," ",r.default.createElement(c.DocumentationLink,{page:p.default.PAGES.CONFIGURING_ES,text:"Graylog documentation"}),"."),t))}});exports.default=g,e.exports=exports.default},1057:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),r=n(a),i=t(15),l=t(960),s=t(952),d=n(s),u=r.default.createClass({displayName:"IndexerClusterHealthSummary",propTypes:{health:r.default.PropTypes.object.isRequired},_alertClassForHealth:function(e){switch(e.status){case"green":return"success";case"yellow":return"warning";case"red":return"danger";default:return"success"}},_formatTextForHealth:function(e){var t="Elasticsearch cluster is "+e.status+".";switch(e.status){case"green":return t;case"yellow":case"red":return r.default.createElement("strong",null,t);default:return t}},_iconNameForHealth:function(e){switch(e.status){case"green":return"check-circle";case"yellow":return"warning";case"red":return"ambulance";default:return"check-circle"}},render:function(){var e=this.props.health;return r.default.createElement(i.Alert,{bsStyle:this._alertClassForHealth(e),className:"es-cluster-status"},r.default.createElement("i",{className:"fa fa-"+this._iconNameForHealth(e)}),"  ",this._formatTextForHealth(e)," ","Shards:"," ",e.shards.active," active,"," ",e.shards.initializing," initializing,"," ",e.shards.relocating," relocating,"," ",e.shards.unassigned," unassigned,"," ",r.default.createElement(l.DocumentationLink,{page:d.default.PAGES.CLUSTER_STATUS_EXPLAINED,text:"What does this mean?"}))}});exports.default=u,e.exports=exports.default},1058:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=t(2),a=function(e){return e&&e.__esModule?e:{default:e}}(n),r=t(48),i=a.default.createClass({displayName:"IndexerFailure",propTypes:{failure:a.default.PropTypes.object.isRequired},render:function(){var e=this.props.failure;return a.default.createElement("tr",null,a.default.createElement("td",{title:e.timestamp},a.default.createElement(r.Timestamp,{dateTime:e.timestamp,relative:!0})),a.default.createElement("td",null,e.index),a.default.createElement("td",null,e.letter_id),a.default.createElement("td",null,e.message))}});exports.default=i,e.exports=exports.default},1059:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),r=n(a),i=t(15),l=t(949),s=t(115),d=n(s),u=t(34),o=n(u),c=t(18),f=n(c),p=t(952),m=n(p),h=t(75),g=n(h),x=t(48),y=t(960),_=f.default.getStore("IndexerFailures"),E=r.default.createClass({displayName:"IndexerFailuresComponent",getInitialState:function(){return{}},componentDidMount:function(){var e=this,t=(0,o.default)().subtract(24,"hours");_.count(t).then(function(t){e.setState({total:t.count})})},_formatFailuresSummary:function(){return r.default.createElement(i.Alert,{bsStyle:0===this.state.total?"success":"danger"},r.default.createElement("i",{className:"fa fa-"+this._iconForFailureCount(this.state.total)})," ",this._formatTextForFailureCount(this.state.total),r.default.createElement(l.LinkContainer,{to:g.default.SYSTEM.INDICES.FAILURES},r.default.createElement(i.Button,{bsStyle:"info",bsSize:"xs",className:"pull-right"},"Show errors")))},_formatTextForFailureCount:function(e){return 0===e?"No failed indexing attempts in the last 24 hours.":r.default.createElement("strong",null,"There were ",(0,d.default)(e).format("0,0")," failed indexing attempts in the last 24 hours.")},_iconForFailureCount:function(e){return 0===e?"check-circle":"ambulance"},render:function(){var e=void 0;return e=void 0===this.state.total?r.default.createElement(x.Spinner,null):this._formatFailuresSummary(),r.default.createElement(i.Row,{className:"content"},r.default.createElement(i.Col,{md:12},r.default.createElement("h2",null,"Indexer failures"),r.default.createElement(y.SmallSupportLink,null,"Every message that was not successfully indexed will be logged as an indexer failure. You can learn more about this feature in the"," ",r.default.createElement(y.DocumentationLink,{page:m.default.PAGES.INDEXER_FAILURES,text:"Graylog documentation"}),"."),e))}});exports.default=E,e.exports=exports.default},1060:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=t(2),a=function(e){return e&&e.__esModule?e:{default:e}}(n),r=t(15),i=t(968),l=a.default.createClass({displayName:"IndexerFailuresList",propTypes:{failures:a.default.PropTypes.arrayOf(a.default.PropTypes.object).isRequired},render:function(){return 0===this.props.failures.length?a.default.createElement(r.Alert,{bsStyle:"success"},a.default.createElement("i",{className:"fa fa-check-circle"})," Hurray! There are not any indexer failures."):a.default.createElement("div",{className:"scrollable-table"},a.default.createElement(r.Table,{className:"indexer-failures",striped:!0,hover:!0,condensed:!0},a.default.createElement("thead",null,a.default.createElement("tr",null,a.default.createElement("th",{style:{width:200}},"Timestamp"),a.default.createElement("th",null,"Index"),a.default.createElement("th",null,"Letter ID"),a.default.createElement("th",null,"Error message"))),a.default.createElement("tbody",null,this.props.failures.map(function(e){return a.default.createElement(i.IndexerFailure,{key:"indexer-failure-"+e.letter_id,failure:e})}))))}});exports.default=l,e.exports=exports.default},1384:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),r=n(a),i=t(1),l=n(i),s=t(949),d=t(15),u=t(115),o=n(u),c=t(48),f=t(954),p=t(968),m=t(960),h=t(952),g=n(h),x=t(86),y=n(x),_=t(75),E=n(_),S=y.default.get("IndexSets"),v=S.IndexSetsStore,b=S.IndexSetsActions,I=y.default.get("Indices"),C=I.IndicesStore,R=I.IndicesActions,P=y.default.get("IndexerOverview"),T=P.IndexerOverviewStore,M=P.IndexerOverviewActions,w=r.default.createClass({displayName:"IndexSetPage",propTypes:{params:r.default.PropTypes.object.isRequired},mixins:[l.default.connect(v),l.default.connect(C,"indexDetails"),l.default.connect(T)],getInitialState:function(){return{indexSet:void 0}},componentDidMount:function(){var e=this;b.get(this.props.params.indexSetId),R.list(this.props.params.indexSetId),this.timerId=setInterval(function(){R.multiple(),M.list(e.props.params.indexSetId)},this.REFRESH_INTERVAL)},componentWillUnmount:function(){this.timerId&&clearInterval(this.timerId)},REFRESH_INTERVAL:2e3,_totalIndexCount:function(){return Object.keys(this.state.indexerOverview.indices).length},_renderElasticsearchUnavailableInformation:function(){return r.default.createElement(d.Row,{className:"content"},r.default.createElement(d.Col,{md:8,mdOffset:2},r.default.createElement("div",{className:"top-margin"},r.default.createElement(d.Panel,{bsStyle:"danger",header:r.default.createElement("span",null,r.default.createElement("i",{className:"fa fa-exclamation-triangle"})," Indices overview unavailable")},r.default.createElement("p",null,"We could not get the indices overview information. This usually means there was a problem connecting to Elasticsearch, and ",r.default.createElement("strong",null,"you should ensure Elasticsearch is up and reachable from Graylog"),"."),r.default.createElement("p",null,"Graylog will continue storing your messages in its journal, but you will not be able to search on them until Elasticsearch is reachable again.")))))},_isLoading:function(){return!this.state.indexSet},render:function(){if(this._isLoading())return r.default.createElement(c.Spinner,null);var e=this.state.indexSet,t=r.default.createElement(c.PageHeader,{title:"Index Set: "+e.title},r.default.createElement("span",null,"This is an overview of all indices (message stores) in this index set Graylog is currently taking in account for searches and analysis."),r.default.createElement("span",null,"You can learn more about the index model in the"," ",r.default.createElement(m.DocumentationLink,{page:g.default.PAGES.INDEX_MODEL,text:"documentation"})),r.default.createElement("span",null,r.default.createElement(s.LinkContainer,{to:E.default.SYSTEM.INDICES.LIST},r.default.createElement(d.Button,{bsStyle:"info"},"Index sets overview"))," ",r.default.createElement(s.LinkContainer,{to:E.default.SYSTEM.INDEX_SETS.CONFIGURATION(e.id,"details")},r.default.createElement(d.Button,{bsStyle:"info"},"Edit Index Set"))," ",r.default.createElement(f.IndicesMaintenanceDropdown,{indexSetId:this.props.params.indexSetId,indexSet:this.state.indexSet})));if(this.state.indexerOverviewError)return r.default.createElement("span",null,t,this._renderElasticsearchUnavailableInformation());var n=void 0,a=void 0;if(this.state.indexerOverview&&this.state.indexDetails.closedIndices){var i=this.state.indexerOverview.deflector;n=r.default.createElement("span",null,r.default.createElement(d.Alert,{bsStyle:"success",style:{marginTop:"10"}},r.default.createElement("i",{className:"fa fa-th"}),"  ",this._totalIndexCount()," indices with a total of"," ",(0,o.default)(this.state.indexerOverview.counts.events).format("0,0")," messages under management, current write-active index is ",r.default.createElement("i",null,i.current_target),"."),r.default.createElement(p.IndexerClusterHealthSummary,{health:this.state.indexerOverview.indexer_cluster.health})),a=r.default.createElement(f.IndicesOverview,{indices:this.state.indexerOverview.indices,indexDetails:this.state.indexDetails.indices,indexSetId:this.props.params.indexSetId,closedIndices:this.state.indexDetails.closedIndices,deflector:this.state.indexerOverview.deflector})}else n=r.default.createElement(c.Spinner,null),a=r.default.createElement(c.Spinner,null);return r.default.createElement(c.DocumentTitle,{title:"Index Set - "+e.title},r.default.createElement("div",null,t,r.default.createElement(d.Row,{className:"content"},r.default.createElement(d.Col,{md:12},r.default.createElement(f.IndexSetDetails,{indexSet:e}))),r.default.createElement(d.Row,{className:"content"},r.default.createElement(d.Col,{md:12},n)),a))}});exports.default=w,e.exports=exports.default},954:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(990);Object.defineProperty(exports,"ClosedIndexDetails",{enumerable:!0,get:function(){return n(a).default}});var r=t(991);Object.defineProperty(exports,"IndexDetails",{enumerable:!0,get:function(){return n(r).default}});var i=t(994);Object.defineProperty(exports,"IndexRangeSummary",{enumerable:!0,get:function(){return n(i).default}});var l=t(995);Object.defineProperty(exports,"IndexSetConfigurationForm",{enumerable:!0,get:function(){return n(l).default}});var s=t(996);Object.defineProperty(exports,"IndexSetDeletionForm",{enumerable:!0,get:function(){return n(s).default}});var d=t(997);Object.defineProperty(exports,"IndexSetDetails",{enumerable:!0,get:function(){return n(d).default}});var u=t(998);Object.defineProperty(exports,"IndexSetsComponent",{enumerable:!0,get:function(){return n(u).default}});var o=t(1e3);Object.defineProperty(exports,"IndexSummary",{enumerable:!0,get:function(){return n(o).default}});var c=t(999);Object.defineProperty(exports,"IndexSizeSummary",{enumerable:!0,get:function(){return n(c).default}});var f=t(1002);Object.defineProperty(exports,"IndicesMaintenanceDropdown",{enumerable:!0,get:function(){return n(f).default}});var p=t(1003);Object.defineProperty(exports,"IndicesOverview",{enumerable:!0,get:function(){return n(p).default}});var m=t(1001);Object.defineProperty(exports,"IndicesConfiguration",{enumerable:!0,get:function(){return n(m).default}});var h=t(1004);Object.defineProperty(exports,"ShardMeter",{enumerable:!0,get:function(){return n(h).default}});var g=t(1005);Object.defineProperty(exports,"ShardRouting",{enumerable:!0,get:function(){return n(g).default}});var x=t(1006);Object.defineProperty(exports,"ShardRoutingOverview",{enumerable:!0,get:function(){return n(x).default}})},968:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(1056);Object.defineProperty(exports,"IndexerClusterHealth",{enumerable:!0,get:function(){return n(a).default}});var r=t(1057);Object.defineProperty(exports,"IndexerClusterHealthSummary",{enumerable:!0,get:function(){return n(r).default}});var i=t(1058);Object.defineProperty(exports,"IndexerFailure",{enumerable:!0,get:function(){return n(i).default}});var l=t(1059);Object.defineProperty(exports,"IndexerFailuresComponent",{enumerable:!0,get:function(){return n(l).default}});var s=t(1060);Object.defineProperty(exports,"IndexerFailuresList",{enumerable:!0,get:function(){return n(s).default}})},969:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var a=t(258),r=t(1009),i=n(r),l=t(1010),s=n(l),d=t(1007),u=n(d),o=t(1008),c=n(o),f=t(1011),p=n(f),m=t(1012),h=n(m);a.PluginStore.register(new a.PluginManifest({},{indexRetentionConfig:[{type:"org.graylog2.indexer.retention.strategies.DeletionRetentionStrategy",displayName:"Delete Index",configComponent:i.default,summaryComponent:s.default},{type:"org.graylog2.indexer.retention.strategies.ClosingRetentionStrategy",displayName:"Close Index",configComponent:u.default,summaryComponent:c.default},{type:"org.graylog2.indexer.retention.strategies.NoopRetentionStrategy",displayName:"Do nothing",configComponent:p.default,summaryComponent:h.default}]}))},970:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var a=t(258),r=t(1013),i=n(r),l=t(1014),s=n(l),d=t(1015),u=n(d),o=t(1016),c=n(o),f=t(1017),p=n(f),m=t(1018),h=n(m);a.PluginStore.register(new a.PluginManifest({},{indexRotationConfig:[{type:"org.graylog2.indexer.rotation.strategies.MessageCountRotationStrategy",displayName:"Index Message Count",configComponent:i.default,summaryComponent:s.default},{type:"org.graylog2.indexer.rotation.strategies.SizeBasedRotationStrategy",displayName:"Index Size",configComponent:u.default,summaryComponent:c.default},{type:"org.graylog2.indexer.rotation.strategies.TimeBasedRotationStrategy",displayName:"Index Time",configComponent:p.default,summaryComponent:h.default}]}))},978:function(e,exports,t){exports=e.exports=t(19)(),exports.push([e.i,".deflist{margin-top:10px}.deflist dt{float:left;clear:left}.deflist dd{margin-left:160px}.top-margin,hr.separator{margin-top:10px}hr.separator{margin-bottom:5px}",""])},982:function(e,exports,t){var n,a=0,r=t(978);"string"==typeof r&&(r=[[e.i,r,""]]),exports.use=exports.ref=function(){return a++||(exports.locals=r.locals,n=t(20)(r,{})),exports},exports.unuse=exports.unref=function(){--a||(n(),n=null)}},990:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),r=n(a),i=t(15),l=t(7),s=n(l),d=t(954),u=s.default.getActions("Indices"),o=r.default.createClass({displayName:"ClosedIndexDetails",propTypes:{indexName:r.default.PropTypes.string.isRequired,indexRange:r.default.PropTypes.object},_onReopen:function(){u.reopen(this.props.indexName)},_onDeleteIndex:function(){window.confirm("Really delete index "+this.props.indexName+"?")&&u.delete(this.props.indexName)},render:function(){var e=this.props.indexRange;return r.default.createElement("div",{className:"index-info"},r.default.createElement(d.IndexRangeSummary,{indexRange:e}),r.default.createElement(i.Alert,{bsStyle:"info"},r.default.createElement("i",{className:"fa fa-info-circle"})," This index is closed. Index information is not available"," ","at the moment, please reopen the index and try again."),r.default.createElement("hr",{style:{marginBottom:"5",marginTop:"10"}}),r.default.createElement(i.Button,{bsStyle:"warning",bsSize:"xs",onClick:this._onReopen},"Reopen index")," ",r.default.createElement(i.Button,{bsStyle:"danger",bsSize:"xs",onClick:this._onDeleteIndex},"Delete index"))}});exports.default=o,e.exports=exports.default},991:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),r=n(a),i=t(15),l=t(48),s=t(7),d=n(s),u=t(18),o=n(u),c=t(954),f=d.default.getActions("Indices"),p=d.default.getActions("IndexRanges");o.default.getStore("IndexRanges");var m=r.default.createClass({displayName:"IndexDetails",propTypes:{index:r.default.PropTypes.object.isRequired,indexName:r.default.PropTypes.string.isRequired,indexRange:r.default.PropTypes.object.isRequired,indexSetId:r.default.PropTypes.string.isRequired,isDeflector:r.default.PropTypes.bool.isRequired},componentDidMount:function(){f.subscribe(this.props.indexName)},componentWillUnmount:function(){f.unsubscribe(this.props.indexName)},_formatActionButtons:function(){return this.props.isDeflector?r.default.createElement("span",null,r.default.createElement(i.Button,{bsStyle:"warning",bsSize:"xs",disabled:!0},"Active write index cannot be closed")," ",r.default.createElement(i.Button,{bsStyle:"danger",bsSize:"xs",disabled:!0},"Active write index cannot be deleted")):r.default.createElement("span",null,r.default.createElement(i.Button,{bsStyle:"warning",bsSize:"xs",onClick:this._onRecalculateIndex},"Recalculate index ranges")," ",r.default.createElement(i.Button,{bsStyle:"warning",bsSize:"xs",onClick:this._onCloseIndex},"Close index")," ",r.default.createElement(i.Button,{bsStyle:"danger",bsSize:"xs",onClick:this._onDeleteIndex},"Delete index"))},_onRecalculateIndex:function(){var e=this;window.confirm("Really recalculate the index ranges for index "+this.props.indexName+"?")&&p.recalculateIndex(this.props.indexName).then(function(){f.list(e.props.indexSetId)})},_onCloseIndex:function(){var e=this;window.confirm("Really close index "+this.props.indexName+"?")&&f.close(this.props.indexName).then(function(){f.list(e.props.indexSetId)})},_onDeleteIndex:function(){var e=this;window.confirm("Really delete index "+this.props.indexName+"?")&&f.delete(this.props.indexName).then(function(){f.list(e.props.indexSetId)})},render:function(){if(!this.props.index||!this.props.index.all_shards)return r.default.createElement(l.Spinner,null);var e=this.props,t=e.index,n=e.indexRange,a=e.indexName;return r.default.createElement("div",{className:"index-info"},r.default.createElement(c.IndexRangeSummary,{indexRange:n})," ",t.all_shards.segments," segments,"," ",t.all_shards.open_search_contexts," open search contexts,"," ",t.all_shards.documents.deleted," deleted messages",r.default.createElement(i.Row,{style:{marginBottom:"10"}},r.default.createElement(i.Col,{md:4,className:"shard-meters"},r.default.createElement(c.ShardMeter,{title:"Primary shard operations",shardMeter:t.primary_shards})),r.default.createElement(i.Col,{md:4,className:"shard-meters"},r.default.createElement(c.ShardMeter,{title:"Total shard operations",shardMeter:t.all_shards}))),r.default.createElement(c.ShardRoutingOverview,{routing:t.routing,indexName:a}),r.default.createElement("hr",{style:{marginBottom:"5",marginTop:"10"}}),this._formatActionButtons())}});exports.default=m,e.exports=exports.default},992:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=t(2),a=function(e){return e&&e.__esModule?e:{default:e}}(n),r=t(43),i=t(48),l=a.default.createClass({displayName:"IndexMaintenanceStrategiesConfiguration",propTypes:{title:a.default.PropTypes.string.isRequired,description:a.default.PropTypes.string.isRequired,selectPlaceholder:a.default.PropTypes.string.isRequired,pluginExports:a.default.PropTypes.array.isRequired,strategies:a.default.PropTypes.array.isRequired,activeConfig:a.default.PropTypes.object.isRequired,updateState:a.default.PropTypes.func.isRequired},getInitialState:function(){return{activeStrategy:this.props.activeConfig.strategy,activeConfig:this.props.activeConfig.config,newStrategy:this.props.activeConfig.strategy,newConfig:this.props.activeConfig.config}},_getDefaultStrategyConfig:function(e){var t=this.props.strategies.filter(function(t){return t.type===e})[0];return t?t.default_config:void 0},_getStrategyJsonSchema:function(e){var t=this.props.strategies.filter(function(t){return t.type===e})[0];return t?t.json_schema:void 0},_getStrategyConfig:function(e){return this.state.activeStrategy===e?this.state.activeConfig:this._getDefaultStrategyConfig(e)},_onSelect:function(e){if(!e||e.length<1)return void this.setState({newStrategy:void 0});var t=this._getStrategyConfig(e);this.setState({newStrategy:e,newConfig:t}),this.props.updateState(e,t)},_addConfigType:function(e,t){var n=this.props.strategies.filter(function(t){return t.type===e})[0],a=t;return n&&(a.type=n.default_config.type),a},_onConfigUpdate:function(e){var t=this._addConfigType(this.state.newStrategy,e);this.setState({newConfig:t}),this.props.updateState(this.state.newStrategy,t)},_availableSelectOptions:function(){return this.props.pluginExports.map(function(e){return{value:e.type,label:e.displayName}})},_getConfigurationComponent:function(e){if(!e||e.length<1)return null;var t=this.props.pluginExports.filter(function(t){return t.type===e})[0];if(!t)return null;var n=this._getStrategyConfig(e),r=a.default.createElement(t.configComponent,{config:n,jsonSchema:this._getStrategyJsonSchema(e),updateConfig:this._onConfigUpdate});return a.default.createElement("span",{key:t.type},r)},_activeSelection:function(){return this.state.newStrategy},render:function(){return a.default.createElement("span",null,a.default.createElement("h3",null,this.props.title),a.default.createElement("p",{className:"description"},this.props.description),a.default.createElement(r.Input,{label:this.props.selectPlaceholder},a.default.createElement(i.Select,{placeholder:this.props.selectPlaceholder,options:this._availableSelectOptions(),matchProp:"value",value:this._activeSelection(),onValueChange:this._onSelect})),this._getConfigurationComponent(this._activeSelection()))}});exports.default=l,e.exports=exports.default},993:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),r=n(a),i=t(15),l=t(260),s=n(l),d=r.default.createClass({displayName:"IndexMaintenanceStrategiesSummary",propTypes:{config:r.default.PropTypes.object.isRequired,pluginExports:r.default.PropTypes.array.isRequired},render:function(){if(!this.props.config)return r.default.createElement(s.default,null);var e=this.props.config.strategy,t=this.props.pluginExports.filter(function(t){return t.type===e})[0];if(!t||!t.summaryComponent)return r.default.createElement(i.Alert,{bsStyle:"danger"},"Summary for strategy ",e," not found!");var n=r.default.createElement(t.summaryComponent,{config:this.props.config.config});return r.default.createElement("span",{key:t.type},n)}});exports.default=d,e.exports=exports.default},994:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=t(2),a=function(e){return e&&e.__esModule?e:{default:e}}(n),r=t(48),i=a.default.createClass({displayName:"IndexRangeSummary",propTypes:{indexRange:a.default.PropTypes.object},render:function(){var e=this.props.indexRange;return e?a.default.createElement("span",null,"Range re-calculated"," ",a.default.createElement("span",{title:e.calculated_at},a.default.createElement(r.Timestamp,{dateTime:e.calculated_at,relative:!0}))," ","in ",e.took_ms,"ms."):a.default.createElement("span",null,a.default.createElement("i",null,"No index range available."))}});exports.default=i,e.exports=exports.default},995:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),r=n(a),i=t(949),l=t(15),s=t(43),d=t(48),u=t(258),o=t(992),c=n(o);t(970),t(969);var f=r.default.createClass({displayName:"IndexSetConfigurationForm",propTypes:{indexSet:r.default.PropTypes.object.isRequired,rotationStrategies:r.default.PropTypes.array.isRequired,retentionStrategies:r.default.PropTypes.array.isRequired,create:r.default.PropTypes.bool,onUpdate:r.default.PropTypes.func.isRequired,cancelLink:r.default.PropTypes.string.isRequired},getInitialState:function(){return{indexSet:this.props.indexSet,validationErrors:{}}},_updateConfig:function(e,t){var n=this.state.indexSet;n[e]=t,this.setState({indexSet:n})},_validateIndexPrefix:function(e){var t=e.target.value;if(t.match(/^[a-z0-9][a-z0-9_\-+]*$/)){if(this.state.validationErrors[e.target.name]){var n=Object.assign({},this.state.validationErrors);delete n[e.target.name],this.setState({validationErrors:n})}}else{var a=Object.assign({},this.state.validationErrors);0===t.length?a[e.target.name]="Invalid index prefix: cannot be empty":0===t.indexOf("_")||0===t.indexOf("-")||0===t.indexOf("+")?a[e.target.name]="Invalid index prefix: must start with a letter or number":t.toLowerCase()!==t?a[e.target.name]="Invalid index prefix: must be lower case":a[e.target.name]="Invalid index prefix: must only contain letters, numbers, '_', '-' and '+'",this.setState({validationErrors:a})}this._onInputChange(e)},_onInputChange:function(e){this._updateConfig(e.target.name,e.target.value)},_onDisableOptimizationClick:function(e){this._updateConfig(e.target.name,e.target.checked)},_saveConfiguration:function(e){e.preventDefault();var t=Object.keys(this.state.validationErrors);if(0!==t.length)return void document.getElementsByName(t[0])[0].focus();this.props.onUpdate(this.state.indexSet)},_updateRotationConfigState:function(e,t){this._updateConfig("rotation_strategy_class",e),this._updateConfig("rotation_strategy",t)},_updateRetentionConfigState:function(e,t){this._updateConfig("retention_strategy_class",e),this._updateConfig("retention_strategy",t)},render:function(){var e=this.props.indexSet,t=this.state.validationErrors,n=void 0;if(this.props.rotationStrategies){var a={config:this.props.indexSet.rotation_strategy,strategy:this.props.indexSet.rotation_strategy_class};n=r.default.createElement(c.default,{title:"Index Rotation Configuration",description:"Graylog uses multiple indices to store documents in. You can configure the strategy it uses to determine when to rotate the currently active write index.",selectPlaceholder:"Select rotation strategy",pluginExports:u.PluginStore.exports("indexRotationConfig"),strategies:this.props.rotationStrategies,activeConfig:a,updateState:this._updateRotationConfigState})}else n=r.default.createElement(d.Spinner,null);var o=void 0;if(this.props.retentionStrategies){var f={config:this.props.indexSet.retention_strategy,strategy:this.props.indexSet.retention_strategy_class};o=r.default.createElement(c.default,{title:"Index Retention Configuration",description:"Graylog uses a retention strategy to clean up old indices.",selectPlaceholder:"Select retention strategy",pluginExports:u.PluginStore.exports("indexRetentionConfig"),strategies:this.props.retentionStrategies,activeConfig:f,updateState:this._updateRetentionConfigState})}else o=r.default.createElement(d.Spinner,null);var p=void 0;if(this.props.create){var m=r.default.createElement("span",null,"A ",r.default.createElement("strong",null,"unique")," prefix used in Elasticsearch indices belonging to this index set. The prefix must start with a letter or number, and can only contain letters, numbers, '_', '-' and '+'.");p=r.default.createElement("span",null,r.default.createElement(s.Input,{type:"text",id:"index-set-index-prefix",label:"Index prefix",name:"index_prefix",onChange:this._validateIndexPrefix,value:e.index_prefix,help:t.index_prefix?t.index_prefix:m,bsStyle:t.index_prefix?"error":null,required:!0}),r.default.createElement(s.Input,{type:"text",id:"index-set-index-analyzer",label:"Analyzer",name:"index_analyzer",onChange:this._onInputChange,value:e.index_analyzer,help:"Elasticsearch analyzer for this index set.",required:!0}))}return r.default.createElement(l.Row,null,r.default.createElement(l.Col,{md:8},r.default.createElement("form",{className:"form",onSubmit:this._saveConfiguration},r.default.createElement(l.Row,null,r.default.createElement(l.Col,{md:12},r.default.createElement(s.Input,{type:"text",id:"index-set-title",label:"Title",name:"title",onChange:this._onInputChange,value:e.title,help:"Descriptive name of the index set.",autoFocus:!0,required:!0}),r.default.createElement(s.Input,{type:"text",id:"index-set-description",label:"Description",name:"description",onChange:this._onInputChange,value:e.description,help:"Add a description of this index set.",required:!0}),p,r.default.createElement(s.Input,{type:"number",id:"index-set-shards",label:"Index shards",name:"shards",onChange:this._onInputChange,value:e.shards,help:"Number of Elasticsearch shards used per index in this index set.",required:!0}),r.default.createElement(s.Input,{type:"number",id:"index-set-replicas",label:"Index replicas",name:"replicas",onChange:this._onInputChange,value:e.replicas,help:"Number of Elasticsearch replicas used per index in this index set.",required:!0}),r.default.createElement(s.Input,{type:"number",id:"index-set-max-num-segments",label:"Max. number of segments",name:"index_optimization_max_num_segments",min:"1",onChange:this._onInputChange,value:e.index_optimization_max_num_segments,help:"Maximum number of segments per Elasticsearch index after optimization (force merge).",required:!0}),r.default.createElement(s.Input,{type:"checkbox",id:"index-set-disable-optimization",label:"Disable index optimization after rotation",name:"index_optimization_disabled",onChange:this._onDisableOptimizationClick,checked:e.index_optimization_disabled,help:"Disable Elasticsearch index optimization (force merge) after rotation."}))),r.default.createElement(l.Row,null,r.default.createElement(l.Col,{md:12},e.writable&&n)),r.default.createElement(l.Row,null,r.default.createElement(l.Col,{md:12},e.writable&&o)),r.default.createElement(l.Row,null,r.default.createElement(l.Col,{md:12},r.default.createElement(l.Button,{type:"submit",bsStyle:"primary",style:{marginRight:10}},"Save"),r.default.createElement(i.LinkContainer,{to:this.props.cancelLink},r.default.createElement(l.Button,{bsStyle:"default"},"Cancel")))))))}});exports.default=f,e.exports=exports.default},996:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),r=n(a),i=t(15),l=t(43),s=t(48),d=t(261),u=n(d),o=t(951),c=n(o),f=t(86),p=n(f),m=p.default.get("Streams"),h=m.StreamsStore,g=r.default.createClass({displayName:"IndexSetDeletionForm",propTypes:{indexSet:r.default.PropTypes.object.isRequired,onDelete:r.default.PropTypes.func.isRequired},getInitialState:function(){return{assignedStreams:void 0,deleteIndices:!0}},_onModalOpen:function(){var e=this;h.load(function(t){var n=[];t.forEach(function(t){t.index_set_id===e.props.indexSet.id&&n.push({id:t.id,title:t.title})}),e.setState({assignedStreams:n})})},_onRemoveClick:function(e){this.setState({deleteIndices:e.target.checked})},open:function(){this.refs["index-set-deletion-modal-"+this.props.indexSet.id].open()},close:function(){this.refs["index-set-deletion-modal-"+this.props.indexSet.id].close()},_isLoading:function(){return!this.state.assignedStreams},_isDeletable:function(){return!this._isLoading()&&this.state.assignedStreams.length<1&&!this.props.indexSet.default},_modalContent:function(){if(this._isLoading())return r.default.createElement(s.Spinner,{text:"Loading assigned streams..."});if(this.props.indexSet.default)return r.default.createElement(i.Row,null,r.default.createElement(i.Col,{md:12},r.default.createElement(i.Alert,{bsStyle:"danger"},"Unable to delete the index set because it is the default index set!")));if(!this._isDeletable()){var e=this.state.assignedStreams.sort(function(e,t){return(0,c.default)(e.title,t.title)}).map(function(e){return r.default.createElement("li",{key:"stream-id-"+e.id},e.title)});return r.default.createElement("div",null,r.default.createElement(i.Row,null,r.default.createElement(i.Col,{md:12},r.default.createElement(i.Alert,{bsStyle:"danger"},"Unable to delete the index set because it has assigned streams. Remove stream assignments to be able to delete this index set."))),r.default.createElement(i.Row,null,r.default.createElement(i.Col,{md:12},r.default.createElement("h4",null,"Assigned streams:"),r.default.createElement("ul",null,e))))}return r.default.createElement(i.Row,null,r.default.createElement(i.Col,{md:12},r.default.createElement(l.Input,{type:"checkbox",label:"Remove all data for this index set?",help:r.default.createElement("span",null,"All indices related to this index set will be deleted from Elasticsearch."),checked:this.state.deleteIndices,onChange:this._onRemoveClick})))},_onDelete:function(e){e.preventDefault(),this._isDeletable()&&this.props.onDelete(this.props.indexSet,this.state.deleteIndices)},render:function(){return r.default.createElement(u.default,{ref:"index-set-deletion-modal-"+this.props.indexSet.id,title:'Delete index set "'+this.props.indexSet.title+'"?',onModalOpen:this._onModalOpen,onSubmitForm:this._onDelete,submitButtonText:"Delete",submitButtonDisabled:!this._isDeletable()},this._modalContent())}});exports.default=g,e.exports=exports.default},997:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=t(2),a=function(e){return e&&e.__esModule?e:{default:e}}(n),r=t(15),i=t(954),l=t(1034),s=a.default.createClass({displayName:"IndexSetDetails",propTypes:{indexSet:a.default.PropTypes.object.isRequired},componentDidMount:function(){l.use()},componentWillUnmount:function(){l.unuse()},render:function(){var e=this.props.indexSet;return a.default.createElement(r.Row,{className:"index-set-details"},a.default.createElement(r.Col,{md:3},a.default.createElement("dl",null,a.default.createElement("dt",null,"Index prefix:"),a.default.createElement("dd",null,e.index_prefix),a.default.createElement("dt",null,"Shards:"),a.default.createElement("dd",null,e.shards),a.default.createElement("dt",null,"Replicas:"),a.default.createElement("dd",null,e.replicas))),a.default.createElement(r.Col,{md:6},a.default.createElement(i.IndicesConfiguration,{indexSet:e})))}});exports.default=s,e.exports=exports.default},998:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),r=n(a),i=t(1),l=n(i),s=t(949),d=t(15),u=t(48),o=t(75),c=n(o),f=t(87),p=n(f),m=t(117),h=n(m),g=t(954),x=t(86),y=n(x),_=y.default.get("IndexSets"),E=_.IndexSetsStore,S=_.IndexSetsActions,v=r.default.createClass({displayName:"IndexSetsComponent",mixins:[l.default.connect(E)],componentDidMount:function(){this.loadData(1,this.PAGE_SIZE)},loadData:function(e,t){this.currentPageNo=e,this.currentPageSize=t,S.listPaginated((e-1)*t,t,!0)},currentPageNo:1,currentPageSize:10,PAGE_SIZE:10,_onChangePaginatedList:function(e,t){this.loadData(e,t)},_onSetDefault:function(e){var t=this;return function(n){n.preventDefault(),S.setDefault(e).then(function(){return t.loadData(t.currentPageNo,t.currentPageSize)})}},_onDelete:function(e){var t=this;return function(n,a){a.preventDefault(),t.refs["index-set-deletion-form-"+e.id].open()}},_deleteIndexSet:function(e,t){var n=this;S.delete(e,t).then(function(){n.loadData(1,n.PAGE_SIZE)})},_formatIndexSet:function(e){var t=r.default.createElement("div",null,r.default.createElement(s.LinkContainer,{to:c.default.SYSTEM.INDEX_SETS.CONFIGURATION(e.id)},r.default.createElement(d.Button,{bsStyle:"info"},"Edit"))," ",r.default.createElement(d.DropdownButton,{title:"More Actions",id:"index-set-dropdown-"+e.id,pullRight:!0},r.default.createElement(d.MenuItem,{onSelect:this._onSetDefault(e),disabled:!e.writable||e.default},"Set as default"),r.default.createElement(d.MenuItem,{divider:!0}),r.default.createElement(d.MenuItem,{onSelect:this._onDelete(e)},"Delete"))),n=r.default.createElement(d.Col,{md:12},r.default.createElement(g.IndexSetDetails,{indexSet:e}),r.default.createElement(g.IndexSetDeletionForm,{ref:"index-set-deletion-form-"+e.id,indexSet:e,onDelete:this._deleteIndexSet})),a=r.default.createElement(s.LinkContainer,{to:c.default.SYSTEM.INDEX_SETS.SHOW(e.id)},r.default.createElement("a",null,e.title)),i=e.default?r.default.createElement(d.Label,{key:"index-set-"+e.id+"-default-label",bsStyle:"primary"},"default"):"",l=e.writable?"":r.default.createElement(d.Label,{key:"index-set-"+e.id+"-readOnly-label",bsStyle:"info"},"read only"),o=e.description;e.default&&(o+=(o.endsWith(".")?"":".")+" Graylog will use this index set by default.");var f=void 0,m=this.state.indexSetStats[e.id];if(m){f=h.default.formatNumber(m.indices)+" "+p.default.pluralize(m.indices,"index","indices")+", "+(h.default.formatNumber(m.documents)+" "+p.default.pluralize(m.documents,"document","documents"))+", "+h.default.formatBytes(m.size)}return r.default.createElement(u.EntityListItem,{key:"index-set-"+e.id,title:a,titleSuffix:r.default.createElement("span",null,f," ",i," ",l),description:o,actions:t,contentRow:n})},_isLoading:function(){return!this.state.indexSets},render:function(){var e=this;return this._isLoading()?r.default.createElement(u.Spinner,null):r.default.createElement("div",null,r.default.createElement(u.PaginatedList,{pageSize:this.PAGE_SIZE,totalItems:this.state.indexSetsCount,onChange:this._onChangePaginatedList,showPageSizeSelect:!1},r.default.createElement(u.EntityList,{bsNoItemsStyle:"info",noItemsText:"There are no index sets to display",items:this.state.indexSets.map(function(t){return e._formatIndexSet(t)})})))}});exports.default=v,e.exports=exports.default},999:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),r=n(a),i=t(115),l=n(i),s=t(117),d=n(s),u=r.default.createClass({displayName:"IndexSizeSummary",propTypes:{index:r.default.PropTypes.object.isRequired},render:function(){var e=this.props.index;return e.size?r.default.createElement("span",null,"(",d.default.formatBytes(e.size.bytes)," ","/ ",(0,l.default)(e.size.events).format("0,0")," messages)"," "):r.default.createElement("span",null)}});exports.default=u,e.exports=exports.default}});
//# sourceMappingURL=7.200197dca04f05abe3f2.js.map