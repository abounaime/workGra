webpackJsonp([20],{1095:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),s=function(e){return e&&e.__esModule?e:{default:e}}(a),r=s.default.createClass({displayName:"HumanReadableStreamRule",propTypes:{streamRule:s.default.PropTypes.object.isRequired,streamRuleTypes:s.default.PropTypes.array.isRequired},EMPTY_TAG:"<empty>",FIELD_PRESENCE_RULE_TYPE:5,ALWAYS_MATCH_RULE_TYPE:7,_getTypeForInteger:function(e,t){if(t)return t.filter(function(t){return String(t.id)===String(e)})[0]},_formatRuleValue:function(e){return String(e.type)!==String(this.FIELD_PRESENCE_RULE_TYPE)?e.value?e.value:this.EMPTY_TAG:null},_formatRuleField:function(e){return e.field?e.field:this.EMPTY_TAG},render:function(){var e=this.props.streamRule,t=this._getTypeForInteger(e.type,this.props.streamRuleTypes),a=e.inverted?"not ":null,r=t?t.long_desc:null;return String(e.type)===String(this.ALWAYS_MATCH_RULE_TYPE)?s.default.createElement("span",null,"Rule always matches"):s.default.createElement("span",null,"Field ",s.default.createElement("em",null,this._formatRuleField(e))," must ",a,r," ",s.default.createElement("em",null,this._formatRuleValue(e)))}});exports.default=r,e.exports=exports.default},1096:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(2),r=a(s),l=t(15),n=t(961),i=a(n),u=t(43),o=t(261),d=a(o),m=t(48),f=t(960),p=t(952),c=a(p),h=t(1098),S=a(h),y=t(1095),_=a(y),E=r.default.createClass({displayName:"StreamRuleForm",propTypes:{onSubmit:r.default.PropTypes.func.isRequired,streamRule:r.default.PropTypes.object,streamRuleTypes:r.default.PropTypes.array.isRequired,title:r.default.PropTypes.string.isRequired},mixins:[i.default],getDefaultProps:function(){return{streamRule:{field:"",type:1,value:"",inverted:!1,description:""}}},getInitialState:function(){return this.props.streamRule},FIELD_PRESENCE_RULE_TYPE:5,ALWAYS_MATCH_RULE_TYPE:7,_resetValues:function(){this.setState(this.props.streamRule)},_onSubmit:function(){this.state.type===this.ALWAYS_MATCH_RULE_TYPE&&(this.state.field=""),this.state.type!==this.FIELD_PRESENCE_RULE_TYPE&&this.state.type!==this.ALWAYS_MATCH_RULE_TYPE||(this.state.value=""),this.props.onSubmit(this.props.streamRule.id,this.state),this.refs.modal.close()},_formatStreamRuleType:function(e){return r.default.createElement("option",{key:"streamRuleType"+e.id,value:e.id},e.short_desc)},open:function(){this._resetValues(),this.refs.modal.open()},close:function(){this.refs.modal.close()},render:function(){var e=this.props.streamRuleTypes.map(this._formatStreamRuleType),t=String(this.state.type)!==String(this.ALWAYS_MATCH_RULE_TYPE)?r.default.createElement(m.TypeAheadFieldInput,{ref:"fieldInput",type:"text",required:!0,label:"Field",valueLink:this.linkState("field"),autoFocus:!0}):"",a=String(this.state.type)!==String(this.FIELD_PRESENCE_RULE_TYPE)&&String(this.state.type)!==String(this.ALWAYS_MATCH_RULE_TYPE)?r.default.createElement(u.Input,{id:"Value",type:"text",required:!0,label:"Value",name:"Value",valueLink:this.linkState("value")}):"";return r.default.createElement(d.default,{ref:"modal",title:this.props.title,onSubmitForm:this._onSubmit,submitButtonText:"Save",formProps:{id:"StreamRuleForm"}},r.default.createElement("div",null,r.default.createElement(l.Col,{md:8},t,r.default.createElement(u.Input,{id:"Type",type:"select",required:!0,label:"Type",name:"Type",valueLink:this.linkState("type")},e),a,r.default.createElement(u.Input,{id:"Inverted",type:"checkbox",label:"Inverted",name:"Inverted",checkedLink:this.linkState("inverted")}),r.default.createElement(u.Input,{id:"Description",type:"textarea",label:"Description (optional)",name:"Description",valueLink:this.linkState("description")}),r.default.createElement("p",null,r.default.createElement("strong",null,"Result:")," ",r.default.createElement(_.default,{streamRule:this.state,streamRuleTypes:this.props.streamRuleTypes}))),r.default.createElement(l.Col,{md:4},r.default.createElement("div",{className:"well well-sm matcher-github"},"The server will try to convert to strings or numbers based on the matcher type as good as it can.",r.default.createElement("br",null),r.default.createElement("br",null),r.default.createElement("i",{className:"fa fa-github"}),r.default.createElement("a",{href:"https://github.com/Graylog2/graylog2-server/tree/"+S.default.getMajorAndMinorVersion()+"/graylog2-server/src/main/java/org/graylog2/streams/matchers",target:"_blank"}," Take a look at the matcher code on GitHub"),r.default.createElement("br",null),r.default.createElement("br",null),"Regular expressions use Java syntax. ",r.default.createElement(f.DocumentationLink,{page:c.default.PAGES.STREAMS,title:"More information",text:r.default.createElement("i",{className:"fa fa-lightbulb-o"})})))))}});exports.default=E,e.exports=exports.default},1174:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(2),r=a(s),l=t(165),n=a(l),i=t(1096),u=a(i),o=t(1095),d=a(o),m=t(18),f=a(m),p=t(5),c=a(p),h=f.default.getStore("StreamRules"),S=r.default.createClass({displayName:"StreamRule",propTypes:{matchData:r.default.PropTypes.array,onDelete:r.default.PropTypes.func,onSubmit:r.default.PropTypes.func,permissions:r.default.PropTypes.array.isRequired,stream:r.default.PropTypes.object.isRequired,streamRule:r.default.PropTypes.object.isRequired,streamRuleTypes:r.default.PropTypes.array.isRequired},mixins:[n.default],_onEdit:function(e){e.preventDefault(),this.refs.streamRuleForm.open()},_onDelete:function(e){var t=this;e.preventDefault(),window.confirm("Do you really want to delete this stream rule?")&&h.remove(this.props.stream.id,this.props.streamRule.id,function(){t.props.onDelete&&t.props.onDelete(t.props.streamRule.id),c.default.success("Stream rule has been successfully deleted.","Success")})},_onSubmit:function(e,t){var a=this;h.update(this.props.stream.id,e,t,function(){a.props.onSubmit&&a.props.onSubmit(e,t),c.default.success("Stream rule has been successfully updated.","Success")})},_formatActionItems:function(){return r.default.createElement("span",null,r.default.createElement("a",{href:"#",onClick:this._onDelete,style:{marginRight:5}},r.default.createElement("i",{className:"fa fa-trash-o"})),r.default.createElement("a",{href:"#",onClick:this._onEdit,style:{marginRight:5}},r.default.createElement("i",{className:"fa fa-edit"})))},_getMatchDataClassNames:function(){return this.props.matchData.rules[this.props.streamRule.id]?"alert-success":"alert-danger"},render:function(){var e=this.props.streamRule,t=this.props.streamRuleTypes,a=this.isPermitted(this.props.permissions,["streams:edit:"+this.props.stream.id])?this._formatActionItems():null,s=this.props.matchData?this._getMatchDataClassNames():null,l=this.props.streamRule.description?r.default.createElement("small",null," ","(",this.props.streamRule.description,")"):null;return r.default.createElement("li",{className:s},a,r.default.createElement(d.default,{streamRule:e,streamRuleTypes:t}),r.default.createElement(u.default,{ref:"streamRuleForm",streamRule:e,streamRuleTypes:t,title:"Edit Stream Rule",onSubmit:this._onSubmit}),l)}});exports.default=S,e.exports=exports.default},1175:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(2),r=a(s),l=t(1174),n=a(l),i=t(48),u=r.default.createClass({displayName:"StreamRuleList",propTypes:{matchData:r.default.PropTypes.object,onSubmit:r.default.PropTypes.func,onDelete:r.default.PropTypes.func,permissions:r.default.PropTypes.array.isRequired,stream:r.default.PropTypes.object.isRequired,streamRuleTypes:r.default.PropTypes.array.isRequired},_formatStreamRules:function(e){var t=this;return e&&e.length>0?e.map(function(e){return r.default.createElement(n.default,{key:e.id,permissions:t.props.permissions,matchData:t.props.matchData,onSubmit:t.props.onSubmit,onDelete:t.props.onDelete,stream:t.props.stream,streamRule:e,streamRuleTypes:t.props.streamRuleTypes})}):r.default.createElement("li",null,"No rules defined.")},render:function(){if(this.props.stream){var e=this._formatStreamRules(this.props.stream.rules);return r.default.createElement("ul",{className:"streamrules-list"},e)}return r.default.createElement(i.Spinner,null)}});exports.default=u,e.exports=exports.default},1203:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(2),r=a(s),l=t(15),n=t(1204),i=a(n),u=r.default.createClass({displayName:"CreateStreamButton",propTypes:{buttonText:r.default.PropTypes.string,bsStyle:r.default.PropTypes.string,bsSize:r.default.PropTypes.string,className:r.default.PropTypes.string,onSave:r.default.PropTypes.func.isRequired,indexSets:r.default.PropTypes.array.isRequired},getDefaultProps:function(){return{buttonText:"Create Stream"}},onClick:function(){this.refs.streamForm.open()},render:function(){return r.default.createElement("span",null,r.default.createElement(l.Button,{bsSize:this.props.bsSize,bsStyle:this.props.bsStyle,className:this.props.className,onClick:this.onClick},this.props.buttonText),r.default.createElement(i.default,{ref:"streamForm",title:"Creating Stream",indexSets:this.props.indexSets,onSubmit:this.props.onSave}))}});exports.default=u,e.exports=exports.default},1204:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(2),r=a(s),l=t(961),n=a(l),i=t(261),u=a(i),o=t(43),d=t(48),m=t(86),f=a(m),p=f.default.get("IndexSets"),c=p.IndexSetsActions,h=r.default.createClass({displayName:"StreamForm",propTypes:{onSubmit:r.default.PropTypes.func.isRequired,stream:r.default.PropTypes.object.isRequired,title:r.default.PropTypes.string.isRequired,indexSets:r.default.PropTypes.array.isRequired},mixins:[n.default],getDefaultProps:function(){return{stream:{title:"",description:"",remove_matches_from_default_stream:!1}}},getInitialState:function(){return this._getValuesFromProps(this.props)},_resetValues:function(){this.setState(this._getValuesFromProps(this.props))},_getValuesFromProps:function(e){var t=e.stream.index_set_id;if(!t&&e.indexSets&&e.indexSets.length>0){var a=e.indexSets.find(function(e){return e.default});a&&(t=a.id)}return{title:e.stream.title,description:e.stream.description,remove_matches_from_default_stream:e.stream.remove_matches_from_default_stream,index_set_id:t}},_onSubmit:function(){this.props.onSubmit(this.props.stream.id,{title:this.state.title,description:this.state.description,remove_matches_from_default_stream:this.state.remove_matches_from_default_stream,index_set_id:this.state.index_set_id}),this.refs.modal.close()},open:function(){this._resetValues(),c.list(!1),this.refs.modal.open()},close:function(){this.refs.modal.close()},_formatSelectOptions:function(){return this.props.indexSets.filter(function(e){return e.writable}).map(function(e){return{value:e.id,label:e.title}})},_onIndexSetSelect:function(e){this.linkState("index_set_id").requestChange(e)},render:function(){var e=void 0;return e=this.props.indexSets?r.default.createElement("div",{className:"form-group"},r.default.createElement("label",null,"Index Set"),r.default.createElement(d.Select,{placeholder:"Select index set",options:this._formatSelectOptions(),matchProp:"label",onValueChange:this._onIndexSetSelect,value:this.state.index_set_id}),r.default.createElement("p",{className:"help-block"},"Messages that match this stream will be written to the configured index set.")):r.default.createElement(d.Spinner,null,"Loading index sets..."),r.default.createElement(u.default,{ref:"modal",title:this.props.title,onSubmitForm:this._onSubmit,submitButtonText:"Save"},r.default.createElement(o.Input,{id:"Title",type:"text",required:!0,label:"Title",name:"Title",placeholder:"A descriptive name of the new stream",valueLink:this.linkState("title"),autoFocus:!0}),r.default.createElement(o.Input,{id:"Description",type:"text",required:!0,label:"Description",name:"Description",placeholder:"What kind of messages are routed into this stream?",valueLink:this.linkState("description")}),e,r.default.createElement(o.Input,{id:"RemoveFromDefaultStream",type:"checkbox",label:"Remove matches from 'All messages' stream",name:"Remove from All messages",help:r.default.createElement("span",null,"Remove messages that match this stream from the 'All messages' stream which is assigned to every message by default."),checkedLink:this.linkState("remove_matches_from_default_stream")}))}});exports.default=h,e.exports=exports.default},1300:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(2),r=a(s),l=t(15),n=t(1175),i=a(n),u=r.default.createClass({displayName:"CollapsibleStreamRuleList",propTypes:{permissions:r.default.PropTypes.array.isRequired,stream:r.default.PropTypes.object.isRequired,streamRuleTypes:r.default.PropTypes.array.isRequired},getInitialState:function(){return{expanded:!1}},_onHandleToggle:function(e){e.preventDefault(),this.setState({expanded:!this.state.expanded})},render:function(){var e=this.state.expanded?"Hide":"Show";return r.default.createElement("span",{className:"stream-rules-link"},r.default.createElement("a",{href:"#",onClick:this._onHandleToggle},e," stream rules"),r.default.createElement(l.Collapse,{in:this.state.expanded,timeout:0},r.default.createElement(l.Alert,{ref:"well"},r.default.createElement(i.default,{stream:this.props.stream,streamRuleTypes:this.props.streamRuleTypes,permissions:this.props.permissions}))))}});exports.default=u,e.exports=exports.default},1303:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(2),r=a(s),l=t(1309),n=a(l),i=t(1305),u=a(i),o=t(1308),d=a(o),m=t(1300),f=a(m),p=t(165),c=a(p),h=t(18),S=a(h),y=t(1096),_=a(y),E=t(48),g=t(5),v=a(g),R=t(15),T=t(949),b=t(75),P=a(b),x=t(1495),D=a(x),C=S.default.getStore("Streams"),k=S.default.getStore("StreamRules"),M=r.default.createClass({displayName:"Stream",propTypes:function(){return{stream:s.PropTypes.object.isRequired,permissions:s.PropTypes.arrayOf(s.PropTypes.string).isRequired,streamRuleTypes:s.PropTypes.array.isRequired,user:s.PropTypes.object.isRequired,indexSets:r.default.PropTypes.array.isRequired}},mixins:[c.default],getInitialState:function(){return{loading:!1}},_formatNumberOfStreamRules:function(e){if(e.is_default)return"The default stream contains all messages.";if(0===e.rules.length)return"No configured rules.";var t=void 0;switch(e.matching_type){case"OR":t="at least one";break;default:case"AND":t="all"}return r.default.createElement("span",null,"Must match ",t," of the ",e.rules.length," configured stream"," ",r.default.createElement(E.Pluralize,{value:e.rules.length,plural:"rules",singular:"rule"}),".")},_onDelete:function(e){window.confirm("Do you really want to remove this stream?")&&C.remove(e.id,function(t){return v.default.success("Stream '"+e.title+"' was deleted successfully.","Success"),t})},_onResume:function(){var e=this;this.setState({loading:!0}),C.resume(this.props.stream.id,function(e){return e}).finally(function(){return e.setState({loading:!1})})},_onUpdate:function(e,t){C.update(e,t,function(e){return v.default.success("Stream '"+t.title+"' was updated successfully.","Success"),e})},_onClone:function(e,t){C.cloneStream(e,t,function(e){return v.default.success("Stream was successfully cloned as '"+t.title+"'.","Success"),e})},_onPause:function(){var e=this;window.confirm("Do you really want to pause stream '"+this.props.stream.title+"'?")&&(this.setState({loading:!0}),C.pause(this.props.stream.id,function(e){return e}).finally(function(){return e.setState({loading:!1})}))},_onQuickAdd:function(){this.refs.quickAddStreamRuleForm.open()},_onSaveStreamRule:function(e,t){k.create(this.props.stream.id,t,function(){return v.default.success("Stream rule was created successfully.","Success")})},render:function(){var e=this.props.stream,t=this.props.permissions,a=e.is_default,s=a?r.default.createElement(R.Tooltip,{id:"default-stream-tooltip"},"Action not available for the default stream"):null,l=void 0,i=void 0;this.isPermitted(t,["streams:edit:"+e.id])&&(l=r.default.createElement(E.OverlayElement,{overlay:s,placement:"top",useOverlay:a},r.default.createElement(T.LinkContainer,{disabled:a,to:P.default.stream_edit(e.id)},r.default.createElement(R.Button,{bsStyle:"info"},"Manage Rules"))),this.isPermitted(t,["stream_outputs:read"])&&(i=r.default.createElement(T.LinkContainer,{to:P.default.stream_outputs(e.id)},r.default.createElement(R.Button,{bsStyle:"info"},"Manage Outputs"))));var o=void 0;this.isAnyPermitted(t,["streams:changestate:"+e.id,"streams:edit:"+e.id])&&(o=e.disabled?r.default.createElement(E.OverlayElement,{overlay:s,placement:"top",useOverlay:a},r.default.createElement(R.Button,{bsStyle:"success",className:"toggle-stream-button",onClick:this._onResume,disabled:a||this.state.loading},this.state.loading?"Starting...":"Start Stream")):r.default.createElement(E.OverlayElement,{overlay:s,placement:"top",useOverlay:a},r.default.createElement(R.Button,{bsStyle:"primary",className:"toggle-stream-button",onClick:this._onPause,disabled:a||this.state.loading},this.state.loading?"Pausing...":"Pause Stream")));var m=e.content_pack?r.default.createElement("i",{className:"fa fa-cube",title:"Created from content pack"}):null,p=a?null:r.default.createElement(f.default,{key:"streamRules-"+e.id,stream:e,streamRuleTypes:this.props.streamRuleTypes,permissions:this.props.permissions}),c=r.default.createElement(E.OverlayElement,{overlay:s,placement:"top",useOverlay:a},r.default.createElement(u.default,{stream:e,permissions:this.props.permissions,user:this.props.user,onDelete:this._onDelete,onUpdate:this._onUpdate,onClone:this._onClone,onQuickAdd:this._onQuickAdd,indexSets:this.props.indexSets,isDefaultStream:a})),h=this.props.indexSets.find(function(t){return t.id===e.index_set_id})||this.props.indexSets.find(function(e){return e.is_default}),S=this.isPermitted(t,["indexsets:read"])&&h?r.default.createElement("span",null,"index set ",r.default.createElement("em",null,h.title),"  "):null;return r.default.createElement("li",{className:"stream"},r.default.createElement("div",{className:"stream-actions pull-right"},l," ",i," ",void 0," ",o," ",c),r.default.createElement("h2",{className:D.default.streamTitle},r.default.createElement(T.LinkContainer,{to:P.default.stream_search(e.id)},r.default.createElement("a",null,e.title))," ",r.default.createElement("small",null,S,r.default.createElement(d.default,{stream:e}))),r.default.createElement("div",{className:"stream-data"},r.default.createElement("div",{className:"stream-description"},m,e.description),r.default.createElement("div",{className:"stream-metadata"},r.default.createElement(n.default,{streamId:e.id}),". ",this._formatNumberOfStreamRules(e),p)),r.default.createElement(_.default,{ref:"quickAddStreamRuleForm",title:"New Stream Rule",onSubmit:this._onSaveStreamRule,streamRuleTypes:this.props.streamRuleTypes}))}});exports.default=M,e.exports=exports.default},1304:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(2),r=a(s),l=t(15),n=t(48),i=t(18),u=a(i),o=t(1307),d=a(o),m=t(260),f=a(m),p=t(1203),c=a(p),h=u.default.getStore("Streams"),S=u.default.getStore("StreamRules"),y=r.default.createClass({displayName:"StreamComponent",propTypes:{currentUser:r.default.PropTypes.object.isRequired,onStreamSave:r.default.PropTypes.func.isRequired,indexSets:r.default.PropTypes.array.isRequired},getInitialState:function(){return{}},componentDidMount:function(){var e=this;this.loadData(),S.types().then(function(t){e.setState({streamRuleTypes:t})}),h.onChange(this.loadData),S.onChange(this.loadData)},componentDidUpdate:function(){null===this.state.filteredStreams&&this._filterStreams()},componentWillUnmount:function(){h.unregister(this.loadData),S.unregister(this.loadData)},loadData:function(){var e=this;h.load(function(t){e.setState({streams:t,filteredStreams:null})})},_filterStreams:function(){this.refs.streamFilter&&this.refs.streamFilter.filterData()},_updateFilteredStreams:function(e){this.setState({filteredStreams:e})},_isLoading:function(){return!(this.state.streams&&this.state.streamRuleTypes)},render:function(){if(this._isLoading())return r.default.createElement("div",{style:{marginLeft:10}},r.default.createElement(f.default,null));if(0===this.state.streams.length){var e=r.default.createElement(n.IfPermitted,{permissions:"streams:create"},r.default.createElement(c.default,{bsSize:"small",bsStyle:"link",className:"btn-text",buttonText:"Create one now",ref:"createStreamButton",indexSets:this.props.indexSets,onSave:this.props.onStreamSave}));return r.default.createElement(l.Alert,{bsStyle:"warning"},r.default.createElement("i",{className:"fa fa-info-circle"})," No streams configured. ",e)}var t=this.state.filteredStreams?r.default.createElement(d.default,{streams:this.state.filteredStreams,streamRuleTypes:this.state.streamRuleTypes,permissions:this.props.currentUser.permissions,user:this.props.currentUser,onStreamSave:this.props.onStreamSave,indexSets:this.props.indexSets}):r.default.createElement(f.default,null);return r.default.createElement("div",null,r.default.createElement(l.Row,{className:"row-sm"},r.default.createElement(l.Col,{md:8},r.default.createElement(n.TypeAheadDataFilter,{ref:"streamFilter",label:"Filter streams",data:this.state.streams,displayKey:"title",filterSuggestions:[],searchInKeys:["title","description"],onDataFiltered:this._updateFilteredStreams}))),r.default.createElement(l.Row,null,r.default.createElement(l.Col,{md:12},t)))}});exports.default=y,e.exports=exports.default},1305:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(2),r=a(s),l=t(15),n=t(48),i=t(1204),u=a(i),o=t(165),d=a(o),m=t(18),f=a(m),p=f.default.getStore("Startpage"),c=r.default.createClass({displayName:"StreamControls",propTypes:{stream:r.default.PropTypes.object.isRequired,user:r.default.PropTypes.object.isRequired,indexSets:r.default.PropTypes.array.isRequired,onDelete:r.default.PropTypes.func.isRequired,onClone:r.default.PropTypes.func.isRequired,onQuickAdd:r.default.PropTypes.func.isRequired,onUpdate:r.default.PropTypes.func.isRequired,isDefaultStream:r.default.PropTypes.bool},mixins:[d.default],getInitialState:function(){return{}},_onDelete:function(e,t){t.preventDefault(),this.props.onDelete(this.props.stream)},_onEdit:function(e,t){t.preventDefault(),this.refs.streamForm.open()},_onClone:function(e,t){t.preventDefault(),this.refs.cloneForm.open()},_onCloneSubmit:function(e,t){this.props.onClone(this.props.stream.id,t)},_onQuickAdd:function(e,t){t.preventDefault(),this.props.onQuickAdd(this.props.stream.id)},_setStartpage:function(e,t){t.preventDefault(),p.set(this.props.user.username,"stream",this.props.stream.id)},render:function(){var e=this.props.stream;return r.default.createElement("span",null,r.default.createElement(l.DropdownButton,{title:"More Actions",ref:"dropdownButton",pullRight:!0,id:"more-actions-dropdown-"+e.id,disabled:this.props.isDefaultStream},r.default.createElement(n.IfPermitted,{permissions:"streams:edit:"+e.id},r.default.createElement(l.MenuItem,{key:"editStreams-"+e.id,onSelect:this._onEdit},"Edit stream")),r.default.createElement(n.IfPermitted,{permissions:"streams:edit:"+e.id},r.default.createElement(l.MenuItem,{key:"quickAddRule-"+e.id,onSelect:this._onQuickAdd},"Quick add rule")),r.default.createElement(n.IfPermitted,{permissions:["streams:create","streams:read:"+e.id]},r.default.createElement(l.MenuItem,{key:"cloneStream-"+e.id,onSelect:this._onClone},"Clone this stream")),r.default.createElement(l.MenuItem,{key:"setAsStartpage-"+e.id,onSelect:this._setStartpage,disabled:this.props.user.read_only},"Set as startpage"),r.default.createElement(n.IfPermitted,{permissions:"streams:edit:"+e.id},r.default.createElement(l.MenuItem,{key:"divider-"+e.id,divider:!0})),r.default.createElement(n.IfPermitted,{permissions:"streams:edit:"+e.id},r.default.createElement(l.MenuItem,{key:"deleteStream-"+e.id,onSelect:this._onDelete},"Delete this stream"))),r.default.createElement(u.default,{ref:"streamForm",title:"Editing Stream",onSubmit:this.props.onUpdate,stream:e,indexSets:this.props.indexSets}),r.default.createElement(u.default,{ref:"cloneForm",title:"Cloning Stream",onSubmit:this._onCloneSubmit,indexSets:this.props.indexSets}))}});exports.default=c,e.exports=exports.default},1307:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(2),r=a(s),l=t(15),n=t(1303),i=a(n),u=t(165),o=a(u),d=r.default.createClass({displayName:"StreamList",propTypes:{streams:r.default.PropTypes.array.isRequired,streamRuleTypes:r.default.PropTypes.array.isRequired,indexSets:r.default.PropTypes.array.isRequired,user:r.default.PropTypes.object.isRequired,permissions:r.default.PropTypes.array.isRequired,onStreamSave:r.default.PropTypes.func.isRequired},mixins:[o.default],getInitialState:function(){return{}},_formatStream:function(e){return r.default.createElement(i.default,{key:"stream-"+e.id,stream:e,streamRuleTypes:this.props.streamRuleTypes,permissions:this.props.permissions,user:this.props.user,indexSets:this.props.indexSets})},_sortByTitle:function(e,t){return e.title.localeCompare(t.title)},render:function(){if(this.props.streams.length>0){var e=this.props.streams.sort(this._sortByTitle).map(this._formatStream);return r.default.createElement("ul",{className:"streams"},e)}return r.default.createElement(l.Alert,{bsStyle:"info"},r.default.createElement("i",{className:"fa fa-info-circle"})," No streams match your search filter.")}});exports.default=d,e.exports=exports.default},1308:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),s=function(e){return e&&e.__esModule?e:{default:e}}(a),r=t(15),l=s.default.createClass({displayName:"StreamStateBadge",propTypes:{stream:s.default.PropTypes.object.isRequired},render:function(){return this.props.stream.is_default?s.default.createElement(r.Label,{bsStyle:"primary"},"Default"):this.props.stream.disabled?s.default.createElement(r.Label,{bsStyle:"warning"},"Stopped"):null}});exports.default=l,e.exports=exports.default},1309:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(2),r=a(s),l=t(1),n=a(l),i=t(18),u=a(i),o=t(7),d=a(o),m=t(48),f=u.default.getStore("Metrics"),p=d.default.getActions("Metrics"),c=r.default.createClass({displayName:"StreamThroughput",propTypes:{streamId:r.default.PropTypes.string.isRequired},mixins:[n.default.connect(f)],componentWillMount:function(){p.addGlobal(this._metricName())},componentWillUnmount:function(){p.removeGlobal(this._metricName())},_metricName:function(){return"org.graylog2.plugin.streams.Stream."+this.props.streamId+".incomingMessages.1-sec-rate"},_calculateThroughput:function(){var e=this;return Object.keys(this.state.metrics).map(function(t){var a=e.state.metrics[t][e._metricName()];return void 0!==a?a.metric.value:0}).reduce(function(e,t){return e+t},0)},render:function(){return this.state.metrics?r.default.createElement("span",null,this._calculateThroughput()," messages/second"):r.default.createElement(m.Spinner,null)}});exports.default=c,e.exports=exports.default},1411:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(2),r=a(s),l=t(1),n=a(l),i=t(15),u=t(1203),o=a(u),d=t(1304),m=a(d),f=t(957),p=a(f),c=t(265),h=a(c),S=t(48),y=t(952),_=a(y),E=t(5),g=a(E),v=t(18),R=a(v),T=t(7),b=a(T),P=R.default.getStore("CurrentUser"),x=R.default.getStore("Streams"),D=R.default.getStore("IndexSets"),C=b.default.getActions("IndexSets"),k=r.default.createClass({displayName:"StreamsPage",mixins:[n.default.connect(P),n.default.connect(D)],getInitialState:function(){return{indexSets:void 0}},componentDidMount:function(){C.list(!1)},_isLoading:function(){return!this.state.currentUser||!this.state.indexSets},_onSave:function(e,t){x.save(t,function(){g.default.success("Stream has been successfully created.","Success")})},render:function(){return this._isLoading()?r.default.createElement(S.Spinner,null):r.default.createElement(S.DocumentTitle,{title:"Streams"},r.default.createElement("div",null,r.default.createElement(h.default,{title:"Streams"},r.default.createElement("span",null,"You can route incoming messages into streams by applying rules against them. Messages matching the rules of a stream are routed into it. A message can also be routed into multiple streams."),r.default.createElement("span",null,"Read more about streams in the ",r.default.createElement(p.default,{page:_.default.PAGES.STREAMS,text:"documentation"}),"."),r.default.createElement(S.IfPermitted,{permissions:"streams:create"},r.default.createElement(o.default,{ref:"createStreamButton",bsSize:"large",bsStyle:"success",onSave:this._onSave,indexSets:this.state.indexSets}))),r.default.createElement(i.Row,{className:"content"},r.default.createElement(i.Col,{md:12},r.default.createElement(m.default,{currentUser:this.state.currentUser,onStreamSave:this._onSave,indexSets:this.state.indexSets})))))}});exports.default=k,e.exports=exports.default},1428:function(e,exports,t){exports=e.exports=t(19)(),exports.push([e.i,"._1FqEawMmDt5xrFobWeKyA4 .label{line-height:2;margin-left:5px;vertical-align:bottom}",""]),exports.locals={streamTitle:"_1FqEawMmDt5xrFobWeKyA4"}},1495:function(e,exports,t){var a=t(1428);"string"==typeof a&&(a=[[e.i,a,""]]);t(20)(a,{});a.locals&&(e.exports=a.locals)},961:function(e,exports,t){e.exports=t(10)(336)}});
//# sourceMappingURL=20.200197dca04f05abe3f2.js.map