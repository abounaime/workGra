webpackJsonp([38],{1173:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var a=t(2),r=function(e){return e&&e.__esModule?e:{default:e}}(a),s=r.default.createClass({displayName:"SourceTitle",propTypes:{className:a.PropTypes.string,resetFilters:a.PropTypes.func.isRequired,resetFilterId:a.PropTypes.string,children:a.PropTypes.oneOfType([a.PropTypes.array,a.PropTypes.element,a.PropTypes.string]).isRequired},render:function(){return r.default.createElement("h3",{className:"sources-title"},this.props.children,r.default.createElement("span",{style:{marginLeft:10}},r.default.createElement("button",{id:this.props.resetFilterId,className:"btn btn-info btn-xs "+this.props.className,onClick:this.props.resetFilters,title:"Reset filter",style:{display:"none"}},"Reset")))}});exports.default=s,e.exports=exports.default},1296:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=t(2),s=a(r),i=t(12),n=a(i),l=t(76),o=a(l),u=t(266),c=a(u),d=t(115),f=a(d),h=t(1173),m=a(h),g=t(169),p=a(g),v=t(87),_=a(v),b=t(18),y=a(b),E=y.default.getStore("Search"),C=s.default.createClass({displayName:"SourceDataTable",propTypes:{numberOfTopValues:r.PropTypes.number.isRequired,resetFilters:r.PropTypes.func.isRequired,setSearchFilter:r.PropTypes.func.isRequired},getInitialState:function(){return{numberOfSources:100}},_getAddToSearchButton:function(e){var t=document.createElement("button");return t.className="btn btn-xs btn-default dc-search-button",t.title="Add to search query",t.setAttribute("data-source",_.default.unescapeHTML(e)),t.innerHTML="<i class='fa fa-search-plus'></i>",t.outerHTML},renderDataTable:function(e,t,a){var r=this,s=(0,n.default)("#dc-sources-result")[0];this._dataTable=c.default.dataTable(s),this._dataTable.dimension(e).group(function(e){return t.top(r.props.numberOfTopValues).some(function(t){return 0===e.name.localeCompare(t.key)})?"Top sources":"Others"}).size(this.state.numberOfSources).columns([function(e){return'<a href="javascript:undefined" class="dc-filter-link" title="Filter this source">'+e.name+"</a>"},function(e){return e.percentage.toFixed(2)+"%"},function(e){return(0,f.default)(e.message_count).format("0,0")},function(e){return r._getAddToSearchButton(e.name)}]).sortBy(function(e){return e.message_count}).order(o.default.descending).on("renderlet",function(e){e.selectAll(".dc-table-group").classed("info",!0),r._addSourceToSearchBarListener(e),r._filterSourceListener(e,a)})},_addSourceToSearchBarListener:function(e){e.selectAll("td.dc-table-column .dc-search-button").on("click",function(){var e=(0,n.default)(o.default.event.target).closest("button").data("source");E.addSearchTerm("source",e,p.default.orOperator())})},_filterSourceListener:function(e,t){e.selectAll("td.dc-table-column a.dc-filter-link").on("click",function(){var e=(0,n.default)(o.default.event.target).parents("td.dc-table-column._0"),a=o.default.selectAll(e).datum();t(a.name)})},redraw:function(){this._dataTable.redraw()},clearFilters:function(){this._dataTable.filterAll()},getFilters:function(){return this._dataTable?this._dataTable.filters():[]},setFilter:function(e){this._dataTable.filter(e)},changeNumberOfSources:function(e){this._dataTable.size(e).redraw()},_onNumberOfSourcesChanged:function(e){var t=this;this.setState({numberOfSources:e.target.value},function(){t.changeNumberOfSources(t.state.numberOfSources)})},_onFilterChanged:function(e){this.props.setSearchFilter(e.target.value)},render:function(){var e=s.default.createElement("table",{id:"dc-sources-result",className:"sources table table-hover"},s.default.createElement("thead",null,s.default.createElement("tr",null,s.default.createElement("th",{style:{width:"60%"}},"Name"),s.default.createElement("th",null,"Percentage"),s.default.createElement("th",null,"Message count"),s.default.createElement("th",{style:{width:10}}))));return s.default.createElement("div",null,s.default.createElement(m.default,{resetFilterId:"dc-sources-result-reset",resetFilters:this.props.resetFilters},"Selected sources"),s.default.createElement("div",{className:"row sources-filtering"},s.default.createElement("div",{className:"col-md-6"},s.default.createElement("div",{className:"form-inline"},s.default.createElement("div",{className:"form-group"},s.default.createElement("input",{type:"text",className:"form-control input-sm",onChange:this._onFilterChanged,placeholder:"Search"})))),s.default.createElement("div",{className:"col-md-6"},s.default.createElement("div",{className:"form-inline text-right"},s.default.createElement("div",{className:"form-group"},s.default.createElement("label",{htmlFor:"no-results"},"Show:"),s.default.createElement("select",{id:"no-results",className:"form-control input-sm",onChange:this._onNumberOfSourcesChanged,value:this.state.numberOfSources},s.default.createElement("option",{value:"10"},"10"),s.default.createElement("option",{value:"50"},"50"),s.default.createElement("option",{value:"100"},"100"),s.default.createElement("option",{value:"500"},"500")))))),e)}});exports.default=C,e.exports=exports.default},1297:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=t(2),s=a(r),i=t(12),n=a(i);t(283);var l=t(266),o=a(l),u=t(76),c=a(u),d=t(169),f=a(d),h=t(1173),m=a(h),g=t(267),p=a(g),v=t(168),_=a(v),b=s.default.createClass({displayName:"SourceLineChart",propTypes:{histogramDataAvailable:s.default.PropTypes.bool.isRequired,reloadingHistogram:s.default.PropTypes.bool.isRequired,resetFilters:s.default.PropTypes.func.isRequired,resolution:s.default.PropTypes.string.isRequired},getInitialState:function(){return{lineChartWidth:"100%"}},getFilters:function(){return this._lineChart?this._lineChart.filters():[]},setFilter:function(e){this._lineChart.filter(e)},clearFilters:function(){this._lineChart.filterAll()},_configureWidth:function(e){this._lineChart.width(e),this.setState({lineChartWidth:String(e)+"px"})},updateWidth:function(){var e=(0,n.default)("#dc-sources-line-chart"),t=e.width();this._configureWidth(t)},renderLineChart:function(e,t,a){var r=(0,n.default)("#dc-sources-line-chart")[0],s=(0,n.default)(r).width();(0,n.default)(document).on("mouseup","#dc-sources-line-chart svg",function(e){(0,n.default)(".timerange-selector-container").effect("bounce",{complete:function(){e.altKey&&f.default.submit()}})}),this._lineChart=o.default.lineChart(r),this._lineChart.height(200).margins({left:35,right:20,top:20,bottom:20}).dimension(e).group(t).x(c.default.time.scale()).renderHorizontalGridLines(!0).elasticX(!0).elasticY(!0).transitionDuration(30).colors(p.default.glColourPalette()).on("filtered",function(e){o.default.events.trigger(function(){var t=e.filter();a(t)})}),this._configureWidth(s),this._lineChart.xAxis().ticks(_.default.customTickInterval()).tickFormat(_.default.customDateTimeFormat()),this._lineChart.yAxis().ticks(6).tickFormat(c.default.format("s"))},render:function(){var e={display:this.props.reloadingHistogram?"block":"none",width:this.state.lineChartWidth},t=s.default.createElement("div",{className:"sources overlay",style:e},s.default.createElement("i",{className:"fa fa-spin fa-refresh spinner"})),a={display:this.props.histogramDataAvailable?"none":"block",width:this.state.lineChartWidth},r=s.default.createElement("div",{className:"sources overlay",style:a},"Not enough data");return s.default.createElement("div",{id:"dc-sources-line-chart",className:"col-md-12"},s.default.createElement(m.default,{className:"reset",resetFilters:this.props.resetFilters},"Messages per ",this.props.resolution),t,r)}});exports.default=b,e.exports=exports.default},1298:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=t(2),s=a(r),i=t(12),n=a(i),l=t(119),o=a(l),u=t(266),c=a(u),d=t(90),f=a(d),h=t(34),m=a(h),g=t(1296),p=a(g),v=t(1299),_=a(v),b=t(1297),y=a(b),E=t(271),C=a(E),T=t(48),F=t(49),S=a(F),w=t(169),D=a(w),N=t(268),R=a(N),P=t(18),A=a(P),O=t(7),L=a(O),H=A.default.getStore("Sources"),k=(A.default.getStore("HistogramData"),A.default.getStore("Search")),M=L.default.getActions("HistogramData"),W=function(e){return m.default.duration(e,"days").as("seconds")},x=function(e){return m.default.duration(e,"hours").as("seconds")},q=x(1),B=[x(1),W(1),W(7),W(31),W(365),0],z=(0,n.default)(window).width(),V=s.default.createClass({displayName:"SourceOverview",getInitialState:function(){return this.sourcesData=(0,o.default)(),this.filterDimension=this.sourcesData.dimension(function(e){return e.name}),this.nameDimension=this.sourcesData.dimension(function(e){return e.name}),this.nameMessageGroup=this.nameDimension.group().reduceSum(function(e){return e.message_count}),this.messageCountDimension=this.sourcesData.dimension(function(e){return e.message_count}),this.histogramData=(0,o.default)(),this.valueDimension=this.histogramData.dimension(function(e){return new Date(e.x)}),this.valueGroup=this.valueDimension.group().reduceSum(function(e){return e.y}),{range:null,resolution:"minute",filter:"",loading:!1,renderResultTable:!0,histogramDataAvailable:!0,reloadingHistogram:!1}},componentDidMount:function(){var e=this,t=function(t){e.refs.sourcePieChart.setFilter(t),e._toggleResetButtons(),c.default.redrawAll(),e.loadHistogramData()},a=function(){e.loadHistogramData(),e._toggleResetButtons()},r=function(t){t?k.changeTimeRange("absolute",{from:new S.default(t[0]).toString(),to:new S.default(t[1]).toString()}):e.syncRangeWithQuery()};this.refs.sourceDataTable.renderDataTable(this.messageCountDimension,this.nameMessageGroup,t),this.refs.sourcePieChart.renderPieChart(this.nameDimension,this.nameMessageGroup,a),this.refs.sourceLineChart.renderLineChart(this.valueDimension,this.valueGroup,r),this.applyRangeParameter(),c.default.renderAll(),window.addEventListener("resize",this._resizeCallback),(0,n.default)(window).on("hashchange",this._applyRangeFromHash),(0,n.default)(document).on("click",".sidebar-hide",this._updateWidth),(0,n.default)(document).on("click",".sidebar-show",this._updateWidth),D.default.init()},componentWillUnmount:function(){window.removeEventListener("resize",this._resizeCallback),(0,n.default)(window).off("hashchange",this._applyRangeFromHash),(0,n.default)(document).off("click",".sidebar-hide",this._updateWidth),(0,n.default)(document).off("click",".sidebar-show",this._updateWidth)},setSearchFilter:function(e){var t=this;this.setState({filter:e},function(){t._filterSources(),t.refs.sourceDataTable.redraw(),t.refs.sourcePieChart.redraw()})},NUMBER_OF_TOP_VALUES:10,eventThrottler:new R.default,loadData:function(){this.loadSources(),this.loadHistogramData()},loadSources:function(){var e=this,t=function(t){e._resetSources(t),e.setState({renderResultTable:0!==e.sourcesData.size(),loading:!1}),e._updateWidth()};H.loadSources(this.state.range,t)},_resetSources:function(e){var t=this,a=this.refs.sourcePieChart.getFilters(),r=this.refs.sourceDataTable.getFilters();this.nameDimension.filterAll(),this.filterDimension.filterAll(),this.refs.sourcePieChart.clearFilters(),this.refs.sourceDataTable.clearFilters(),this.sourcesData.remove(),this.sourcesData.add(e),a.forEach(function(e){return t.refs.sourcePieChart.setFilter(e)}),r.forEach(function(e){return t.refs.sourceDataTable.setFilter(e)}),this._filterSources(),c.default.redrawAll()},loadHistogramData:function(){var e=this,t=void 0;0===this.refs.sourcePieChart.getFilters().length&&0===this.refs.sourceDataTable.getFilters().length||(t=this.nameDimension.top(1/0).map(function(e){return D.default.escape(e.name)})),M.load(this.state.range,t,z).then(function(t){e.setState({resolution:t.interval,reloadingHistogram:!1,histogramDataAvailable:t.histogram.length>=2}),e._resetHistogram(t.histogram)}),this.setState({reloadingHistogram:!0})},_resetHistogram:function(e){var t=this,a=this.refs.sourceLineChart.getFilters();this.valueDimension.filterAll(),this.refs.sourceLineChart.clearFilters(),this.histogramData.remove(),this.histogramData.add(e),a.forEach(function(e){return t.refs.sourceLineChart.setFilter(e)}),c.default.redrawAll()},_resizeCallback:function(){var e=this;this.eventThrottler.throttle(function(){return e._updateWidth()})},_redirectToRange:function(e){window.location.replace("sources#"+e)},_getRangeFromOldQueryFormat:function(){var e=window.location.search;if(e&&0===e.indexOf("?")&&e.length>1){e=e.substr(1,e.length-1);var t=f.default.parse(e).range;if(t)return t}return null},_applyRangeFromHash:function(){var e=this._getRangeFromHash();this.changeRange(e,!1)},applyRangeParameter:function(){var e=this._getRangeFromOldQueryFormat();e?this._redirectToRange(e):this._applyRangeFromHash()},_getRangeFromHash:function(){var e=window.location.hash;if(0!==e.indexOf("#"))return q;var t=e.substring(1);if(e.indexOf("&")<0)return t;var a=t.match(/(\d+)=&/);return a&&a.length>0?a[1]:q},resetSourcesFilters:function(){this.refs.sourcePieChart.clearFilters(),this.nameDimension.filterAll(),this.loadHistogramData(),this._toggleResetButtons(),c.default.redrawAll()},resetHistogramFilters:function(){this.valueDimension.filterAll(),this.refs.sourceLineChart.clearFilters(),c.default.redrawAll()},_updateWidth:function(){z=(0,n.default)(window).width(),this.refs.sourcePieChart.updateWidth(),this.refs.sourceLineChart.updateWidth(),c.default.renderAll()},syncRangeWithQuery:function(){var e=this.refs.rangeSelector;if(0===Number(e.value))k.changeTimeRange("relative",{relative:0});else{var t=(0,n.default)(":selected",e),a=t&&t[0]&&t[0].text;k.changeTimeRange("keyword",{keyword:a})}},_toggleResetButtons:function(){0!==this.refs.sourcePieChart.getFilters().length?(0,n.default)("#dc-sources-result-reset").show():(0,n.default)("#dc-sources-result-reset").hide()},changeRange:function(e,t){var a=this,r=e;void 0!==r&&(r=Number(r)),void 0!==r&&-1!==B.indexOf(r)||(r=q),this.state.range!==r&&(this.valueDimension.filterAll(),this.refs.sourceLineChart.clearFilters(),this.syncRangeWithQuery(),t?window.location.hash="#"+r:window.location.replace("#"+r),this.setState({range:r,histogramDataAvailable:!0,loading:!0},function(){return a.loadData()}))},_onRangeChanged:function(e){var t=e.target.value;this.changeRange(t,!0)},_filterSources:function(){var e=this;this.filterDimension.filter(function(t){return-1!==t.indexOf(e.state.filter)})},render:function(){var e=s.default.createElement("div",{className:"row content"},s.default.createElement("div",{className:"col-md-12"},s.default.createElement("div",{className:"alert alert-info"},"No message sources found for this time range. Did you try using a different one?"))),t=this.state.renderResultTable?null:{display:"none"},a=s.default.createElement("div",{style:t},s.default.createElement("div",{className:"row content"},s.default.createElement(y.default,{ref:"sourceLineChart",reloadingHistogram:this.state.reloadingHistogram,histogramDataAvailable:this.state.histogramDataAvailable,resolution:this.state.resolution,resetFilters:this.resetHistogramFilters})),this.state.loading?s.default.createElement("div",{className:"row content"},s.default.createElement("div",{style:{marginLeft:10}},s.default.createElement(T.Spinner,null))):null,s.default.createElement("div",{className:"row content",style:{display:this.state.loading?"none":"block"}},s.default.createElement("div",{className:"col-md-7"},s.default.createElement(p.default,{ref:"sourceDataTable",resetFilters:this.resetSourcesFilters,setSearchFilter:this.setSearchFilter,numberOfTopValues:this.NUMBER_OF_TOP_VALUES})),s.default.createElement("div",{className:"col-md-3 col-md-offset-1"},s.default.createElement(_.default,{ref:"sourcePieChart",resetFilters:this.resetSourcesFilters,numberOfTopValues:this.NUMBER_OF_TOP_VALUES}))));return s.default.createElement("div",null,s.default.createElement("div",{className:"row content"},s.default.createElement("div",{className:"col-md-12"},s.default.createElement("div",null,s.default.createElement("div",{className:"pull-right"},s.default.createElement("select",{ref:"rangeSelector",className:"sources-range form-control input-sm",value:this.state.range,onChange:this._onRangeChanged},s.default.createElement("option",{value:x(1)},"Last Hour"),s.default.createElement("option",{value:W(1)},"Last Day"),s.default.createElement("option",{value:W(7)},"Last Week"),s.default.createElement("option",{value:W(31)},"Last Month"),s.default.createElement("option",{value:W(365)},"Last Year"),s.default.createElement("option",{value:"0"},"All"))),s.default.createElement("h1",null,"Sources")),s.default.createElement("p",{className:"description"},"This is a list of all sources that sent in messages to Graylog. Note that the list is cached for a few seconds so you might have to wait a bit until a new source appears."),s.default.createElement(C.default,null," Use your mouse to interact with the table and graphs on this page, and get a better overview of the sources sending data into Graylog."))),this.state.renderResultTable?null:e,a)}});exports.default=V,e.exports=exports.default},1299:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=t(12),s=a(r),i=t(266),n=a(i),l=t(115),o=a(l),u=t(2),c=a(u),d=t(1173),f=a(d),h=t(267),m=a(h),g=c.default.createClass({displayName:"SourcePieChart",propTypes:{resetFilters:u.PropTypes.func.isRequired,numberOfTopValues:u.PropTypes.number.isRequired},getFilters:function(){return this._pieChart?this._pieChart.filters():[]},setFilter:function(e){this._pieChart.filter(e)},clearFilters:function(){this._pieChart.filterAll()},redraw:function(){this._pieChart.redraw()},_configureWidth:function(e){this._pieChart.width(e).height(e).radius(e/2-10).innerRadius(e/5)},updateWidth:function(){var e=(0,s.default)("#dc-sources-pie-chart").parent(),t=e.width();this._configureWidth(t)},renderPieChart:function(e,t,a){var r=(0,s.default)("#dc-sources-pie-chart")[0],i=(0,s.default)(r).width();this._pieChart=n.default.pieChart(r),this._pieChart.renderLabel(!1).dimension(e).group(t).colors(m.default.glColourPalette()).slicesCap(this.props.numberOfTopValues).title(function(e){return e.key+": "+(0,o.default)(e.value).format("0,0")}).on("renderlet",function(e){e.selectAll(".pie-slice").on("click",function(){a()})}),this._configureWidth(i)},render:function(){return c.default.createElement("div",{id:"dc-sources-pie-chart",ref:"sourcePieChart"},c.default.createElement(f.default,{className:"reset",resetFilters:this.props.resetFilters},"Messages per source"))}});exports.default=g,e.exports=exports.default},1406:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=t(2),s=a(r),i=t(1298),n=a(i),l=t(48),o=s.default.createClass({displayName:"SourcesPage",render:function(){return s.default.createElement(l.DocumentTitle,{title:"Sources"},s.default.createElement(n.default,null))}});exports.default=o,e.exports=exports.default}});
//# sourceMappingURL=38.200197dca04f05abe3f2.js.map