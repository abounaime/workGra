webpackJsonp([35],{1395:function(t,exports,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var n=e(2),a=i(n),o=e(1),r=i(o),l=e(15),s=e(949),u=e(48),c=e(956),f=e(75),d=i(f),m=e(18),p=i(m),h=p.default.getStore("CurrentUser"),N=a.default.createClass({displayName:"NewAlertNotificationPage",mixins:[r.default.connect(h)],render:function(){return a.default.createElement(u.DocumentTitle,{title:"New alert notification"},a.default.createElement("div",null,a.default.createElement(u.PageHeader,{title:"New alert notification"},a.default.createElement("span",null,"Create a new notification that you can use to not miss any of your alerts."),a.default.createElement("span",null,"Remember to assign the notifications to use in the alert conditions page."),a.default.createElement("span",null,a.default.createElement(s.LinkContainer,{to:d.default.ALERTS.NOTIFICATIONS},a.default.createElement(l.Button,{bsStyle:"info"},"Manage notifications"))," ",a.default.createElement(l.Button,{bsStyle:"info",href:"https://marketplace.graylog.org/",target:"_blank"},a.default.createElement("i",{className:"fa fa-external-link"}),"  Find more notifications"))),a.default.createElement(l.Row,{className:"content"},a.default.createElement(l.Col,{md:12},a.default.createElement(c.CreateAlertNotificationInput,null)))))}});exports.default=N,t.exports=exports.default},956:function(t,exports,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var n=e(972);Object.defineProperty(exports,"AlertNotification",{enumerable:!0,get:function(){return i(n).default}});var a=e(973);Object.defineProperty(exports,"AlertNotificationsComponent",{enumerable:!0,get:function(){return i(a).default}});var o=e(974);Object.defineProperty(exports,"AlertNotificationsList",{enumerable:!0,get:function(){return i(o).default}});var r=e(975);Object.defineProperty(exports,"CreateAlertNotificationInput",{enumerable:!0,get:function(){return i(r).default}});var l=e(976);Object.defineProperty(exports,"UnknownAlertNotification",{enumerable:!0,get:function(){return i(l).default}})},972:function(t,exports,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var n=e(2),a=i(n),o=e(1),r=i(o),l=e(15),s=e(165),u=i(s),c=e(86),f=i(c),d=e(48),m=e(956),p=e(953),h=f.default.get("AlertNotifications"),N=h.AlertNotificationsStore,g=f.default.get("AlarmCallbacks"),E=g.AlarmCallbacksActions,y=f.default.get("CurrentUser"),_=y.CurrentUserStore,S=a.default.createClass({displayName:"AlertNotification",propTypes:{alertNotification:a.default.PropTypes.object.isRequired,stream:a.default.PropTypes.object,onNotificationUpdate:a.default.PropTypes.func,onNotificationDelete:a.default.PropTypes.func},mixins:[r.default.connect(N),r.default.connect(_),u.default],getInitialState:function(){return{isTestingAlert:!1}},_onTestNotification:function(){var t=this;this.setState({isTestingAlert:!0}),N.testAlert(this.props.alertNotification.id).finally(function(){return t.setState({isTestingAlert:!1})})},_onEdit:function(){this.refs.configurationForm.open()},_onSubmit:function(t){var e=this;E.update(this.props.alertNotification.stream_id,this.props.alertNotification.id,t).then(function(){"function"==typeof e.props.onNotificationUpdate&&e.props.onNotificationUpdate()})},_onDelete:function(){var t=this;window.confirm("Really delete alert notification?")&&E.delete(this.props.alertNotification.stream_id,this.props.alertNotification.id).then(function(){"function"==typeof t.props.onNotificationUpdate&&t.props.onNotificationUpdate()})},render:function(){if(!this.state.availableNotifications)return a.default.createElement(d.Spinner,null);var t=this.props.alertNotification,e=this.props.stream,i=this.state.availableNotifications[t.type];if(!i)return a.default.createElement(m.UnknownAlertNotification,{alertNotification:t,onDelete:this._onDelete});var n=e?a.default.createElement("span",null,"Executed once per triggered alert condition in stream ",a.default.createElement("em",null,e.title)):"Not executed, as it is not connected to a stream",o=this.isPermitted(this.state.currentUser.permissions,["streams:edit:"+e.id])&&[a.default.createElement(l.Button,{key:"test-button",bsStyle:"info",disabled:this.state.isTestingAlert,onClick:this._onTestNotification},this.state.isTestingAlert?"Testing...":"Test"),a.default.createElement(l.DropdownButton,{key:"more-actions-button",title:"More actions",pullRight:!0,id:"more-actions-dropdown-"+t.id},a.default.createElement(l.MenuItem,{onSelect:this._onEdit},"Edit"),a.default.createElement(l.MenuItem,{divider:!0}),a.default.createElement(l.MenuItem,{onSelect:this._onDelete},"Delete"))],r=a.default.createElement(l.Col,{md:12},a.default.createElement("div",{className:"alert-callback alarm-callbacks"},a.default.createElement(p.ConfigurationForm,{ref:"configurationForm",key:"configuration-form-notification-"+t.id,configFields:i.requested_configuration,title:"Editing alert configuration ",typeName:t.type,titleValue:t.title,submitAction:this._onSubmit,values:t.configuration}),a.default.createElement(p.ConfigurationWell,{configuration:t.configuration,typeDefinition:i})));return a.default.createElement(d.EntityListItem,{key:"entry-list-"+t.id,title:t.title?t.title:"Untitled",titleSuffix:"("+i.name+")",description:n,actions:o,contentRow:r})}});exports.default=S,t.exports=exports.default},973:function(t,exports,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var n=e(2),a=i(n),o=e(1),r=i(o),l=e(15),s=e(949),u=e(951),c=i(u),f=e(48),d=e(956),m=e(75),p=i(m),h=e(86),N=i(h),g=N.default.get("AlertNotifications"),E=g.AlertNotificationsStore,y=g.AlertNotificationsActions,_=N.default.get("Streams"),S=_.StreamsStore,b=a.default.createClass({displayName:"AlertNotificationsComponent",mixins:[r.default.connect(E)],getInitialState:function(){return{streams:void 0}},componentDidMount:function(){this._loadData()},_loadData:function(){var t=this;S.listStreams().then(function(e){t.setState({streams:e})}),y.available(),y.listAll()},_isLoading:function(){return!this.state.streams||!this.state.availableNotifications||!this.state.allNotifications},render:function(){if(this._isLoading())return a.default.createElement(f.Spinner,null);var t=this.state.allNotifications.sort(function(t,e){var i=t.title||"Untitled",n=e.title||"Untitled";return(0,c.default)(i.toLowerCase(),n.toLowerCase())});return a.default.createElement("div",null,a.default.createElement("div",{className:"pull-right"},a.default.createElement(s.LinkContainer,{to:p.default.ALERTS.NEW_NOTIFICATION},a.default.createElement(l.Button,{bsStyle:"success"},"Add new notification"))),a.default.createElement("h2",null,"Notifications"),a.default.createElement("p",null,"These are all configured alert notifications."),a.default.createElement(d.AlertNotificationsList,{alertNotifications:t,streams:this.state.streams,onNotificationUpdate:this._loadData,onNotificationDelete:this._loadData}))}});exports.default=b,t.exports=exports.default},974:function(t,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var i=e(2),n=function(t){return t&&t.__esModule?t:{default:t}}(i),a=e(956),o=e(48),r=n.default.createClass({displayName:"AlertNotificationsList",propTypes:{alertNotifications:n.default.PropTypes.array.isRequired,streams:n.default.PropTypes.array.isRequired,onNotificationUpdate:n.default.PropTypes.func,onNotificationDelete:n.default.PropTypes.func},getInitialState:function(){return{currentPage:0}},PAGE_SIZE:10,_onChangePaginatedList:function(t){this.setState({currentPage:t-1})},_paginatedNotifications:function(){return this.props.alertNotifications.slice(this.state.currentPage*this.PAGE_SIZE,(this.state.currentPage+1)*this.PAGE_SIZE)},_formatNotification:function(t){var e=this.props.streams.find(function(e){return e.id===t.stream_id});return n.default.createElement(a.AlertNotification,{key:t.id,alertNotification:t,stream:e,onNotificationUpdate:this.props.onNotificationUpdate,onNotificationDelete:this.props.onNotificationDelete})},render:function(){var t=this,e=this.props.alertNotifications;return n.default.createElement(o.PaginatedList,{totalItems:e.length,onChange:this._onChangePaginatedList,showPageSizeSelect:!1,pageSize:this.PAGE_SIZE},n.default.createElement(o.EntityList,{bsNoItemsStyle:"info",noItemsText:"There are no configured notifications.",items:this._paginatedNotifications().map(function(e){return t._formatNotification(e)})}))}});exports.default=r,t.exports=exports.default},975:function(t,exports,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var n=e(2),a=i(n),o=e(1),r=i(o),l=e(951),s=i(l),u=e(15),c=e(43),f=e(48),d=e(953),m=e(75),p=i(m),h=e(5),N=i(h),g=e(166),E=i(g),y=e(86),_=i(y),S=_.default.get("AlertNotifications"),b=S.AlertNotificationsStore,v=S.AlertNotificationsActions,A=_.default.get("AlarmCallbacks"),C=A.AlarmCallbacksActions,P=_.default.get("Streams"),T=P.StreamsStore,L=a.default.createClass({displayName:"CreateAlertNotificationInput",mixins:[r.default.connect(b)],getInitialState:function(){return{streams:void 0,selectedStream:void 0,type:this.PLACEHOLDER}},componentDidMount:function(){var t=this;T.listStreams().then(function(e){t.setState({streams:e})}),v.available()},PLACEHOLDER:"placeholder",_onChange:function(t){this.setState({type:t.target.value})},_onStreamChange:function(t){this.setState({selectedStream:this.state.streams.find(function(e){return e.id===t})})},_onSubmit:function(t){var e=this;this.state.selectedStream||N.default.error("Please select the stream that the condition should check.","Could not save condition"),C.save(this.state.selectedStream.id,t).then(function(){E.default.pushState(null,p.default.ALERTS.NOTIFICATIONS)},function(){return e.refs.configurationForm.open()})},_openForm:function(){this.refs.configurationForm.open()},_resetForm:function(){this.setState({type:this.PLACEHOLDER})},_formatNotificationForm:function(t){var e=this.state.availableNotifications[t];return a.default.createElement(d.ConfigurationForm,{ref:"configurationForm",key:"configuration-form-output",configFields:e.requested_configuration,title:"Create new "+e.name,typeName:t,submitAction:this._onSubmit,cancelAction:this._resetForm})},_formatOption:function(t,e){return{value:e,label:t}},_isLoading:function(){return!this.state.availableNotifications||!this.state.streams},render:function(){var t=this;if(this._isLoading())return a.default.createElement(f.Spinner,null);var e=this.state.type!==this.PLACEHOLDER?this._formatNotificationForm(this.state.type):null,i=Object.keys(this.state.availableNotifications).map(function(e){return a.default.createElement("option",{key:"type-option-"+e,value:e},t.state.availableNotifications[e].name)}),n=this.state.streams.map(function(e){return t._formatOption(e.title,e.id)}).sort(function(t,e){return(0,s.default)(t.label.toLowerCase(),e.label.toLowerCase())});return a.default.createElement("div",null,a.default.createElement("h2",null,"Notification"),a.default.createElement("p",{className:"description"},"Define the notification that will be triggered from the alert conditions in a stream."),a.default.createElement(u.Row,null,a.default.createElement(u.Col,{md:6},a.default.createElement("form",null,a.default.createElement(c.Input,{label:"Notify on stream",help:"Select the stream that should use this notification when its alert conditions are triggered."},a.default.createElement(f.Select,{placeholder:"Select a stream",options:n,onValueChange:this._onStreamChange})),a.default.createElement(c.Input,{type:"select",value:this.state.type,onChange:this._onChange,disabled:!this.state.selectedStream,label:"Notification type",help:"Select the notification type that will be used."},a.default.createElement("option",{value:this.PLACEHOLDER,disabled:!0},"Select a notification type"),i),e," ",a.default.createElement(u.Button,{onClick:this._openForm,disabled:this.state.type===this.PLACEHOLDER,bsStyle:"success"},"Add alert notification")))))}});exports.default=L,t.exports=exports.default},976:function(t,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var i=e(2),n=function(t){return t&&t.__esModule?t:{default:t}}(i),a=e(15),o=e(48),r=n.default.createClass({displayName:"UnknownAlertNotification",propTypes:{alertNotification:n.default.PropTypes.object.isRequired,onDelete:n.default.PropTypes.func.isRequired},render:function(){var t=this.props.alertNotification,e=[n.default.createElement(a.DropdownButton,{key:"actions-button",title:"Actions",pullRight:!0,id:"more-actions-dropdown-"+t.id},n.default.createElement(a.MenuItem,{onSelect:this.props.onDelete},"Delete"))],i=n.default.createElement(a.Col,{md:12},n.default.createElement(a.Alert,{bsStyle:"warning"},"Could not resolve notification type. This is most likely caused by a missing plugin in your Graylog setup."));return n.default.createElement(o.EntityListItem,{key:"entry-list-"+t.id,title:"Unknown notification",titleSuffix:"("+t.type+")",description:"Cannot be executed while the notification type is unknown",actions:e,contentRow:i})}});exports.default=r,t.exports=exports.default}});
//# sourceMappingURL=35.200197dca04f05abe3f2.js.map