{"version":3,"sources":["webpack:///52.200197dca04f05abe3f2.js","webpack:///./src/pages/ShowMessagePage.jsx"],"names":["webpackJsonp","1403","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_react","_react2","_reflux","_reflux2","_immutable","_immutable2","_MessageShow","_MessageShow2","_common","_ActionsProvider","_ActionsProvider2","_StoreProvider","_StoreProvider2","NodesActions","getActions","InputsActions","MessagesActions","NodesStore","getStore","StreamsStore","InputsStore","ShowMessagePage","createClass","displayName","propTypes","params","PropTypes","object","searchConfig","isRequired","mixins","connect","listenTo","getInitialState","streams","undefined","inputs","message","componentDidMount","_this","this","loadMessage","triggerPromise","props","index","messageId","then","setState","getOptional","source_input_id","listStreams","streamsMap","forEach","stream","id","Map","list","_formatInput","state","input","_isLoaded","nodes","render","createElement","DocumentTitle","title","allStreamsLoaded","Spinner"],"mappings":"AAAAA,cAAc,KAERC,KACA,SAAUC,EAAQC,QAASC,GAEjC,YAiCA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GA9BvFG,OAAOC,eAAeP,QAAS,cAC7BQ,OAAO,GCTT,IAAAC,GAAAR,EAAA,GDcIS,EAAUR,EAAuBO,GCbrCE,EAAAV,EAAA,GDiBIW,EAAWV,EAAuBS,GChBtCE,EAAAZ,EAAA,IDoBIa,EAAcZ,EAAuBW,GCnBzCE,EAAAd,EAAA,MDuBIe,EAAgBd,EAAuBa,GCtB3CE,EAAAhB,EAAA,IAEAiB,EAAAjB,EAAA,GD0BIkB,EAAoBjB,EAAuBgB,GCrB/CE,EAAAnB,EAAA,IDyBIoB,EAAkBnB,EAAuBkB,GC7BvCE,EAAeH,EAAAd,QAAgBkB,WAAW,SAC1CC,EAAgBL,EAAAd,QAAgBkB,WAAW,UAC3CE,EAAkBN,EAAAd,QAAgBkB,WAAW,YAG7CG,EAAaL,EAAAhB,QAAcsB,SAAS,SACpCC,EAAeP,EAAAhB,QAAcsB,SAAS,WACtCE,EAAcR,EAAAhB,QAAcsB,SAAS,UAIrCG,GAFgBT,EAAAhB,QAAcsB,SAAS,YAErBjB,EAAAL,QAAM0B,aAAYC,YAAA,kBACxCC,WACEC,OAAQzB,EAAA0B,UAAUC,OAClBC,aAAc5B,EAAA0B,UAAUC,OAAOE,YAEjCC,QAAS3B,EAAAP,QAAOmC,QAAQd,GAAad,EAAAP,QAAOoC,SAASZ,EAAa,iBAClEa,gBANwC,WAOtC,OACEC,YAASC,GACTC,WAAQD,GACRE,YAASF,KAGbG,kBAbwC,WAapB,GAAAC,GAAAC,IAClBxB,GAAgByB,YAAYC,eAAeF,KAAKG,MAAMlB,OAAOmB,MAAOJ,KAAKG,MAAMlB,OAAOoB,WAAWC,KAAK,SAACT,GACrGE,EAAKQ,UAAWV,QAASA,IACzBtB,EAAciC,YAAYN,eAAeL,EAAQY,mBAEnD9B,EAAa+B,cAAcJ,KAAK,SAACZ,GAC/B,GAAMiB,KACNjB,GAAQkB,QAAQ,SAACC,GACfF,EAAWE,EAAOC,IAAMD,IAE1Bd,EAAKQ,UAAWb,QAAS7B,EAAAT,QAAU2D,IAAIJ,OAEzCtC,EAAa2C,KAAKd,kBAEpBe,aA3BwC,SA2B3BC,GACX,GAAMC,KACNA,GAAMD,EAAMC,MAAML,IAAMI,EAAMC,MAC9BnB,KAAKO,UAAWX,OAAQ/B,EAAAT,QAAU2D,IAAII,MAExCC,UAhCwC,WAiCtC,MAAOpB,MAAKkB,MAAMrB,SAAWG,KAAKkB,MAAMxB,SAAWM,KAAKkB,MAAMG,OAASrB,KAAKkB,MAAMtB,QAEpF0B,OAnCwC,WAoCtC,MAAItB,MAAKoB,YAEL3D,EAAAL,QAAAmE,cAAAvD,EAAAwD,eAAeC,MAAA,WAAkBzB,KAAKG,MAAMlB,OAAOoB,UAApC,OAAoDL,KAAKG,MAAMlB,OAAOmB,OACnF3C,EAAAL,QAAAmE,cAAAxD,EAAAX,SAAayC,QAASG,KAAKkB,MAAMrB,QAASD,OAAQI,KAAKkB,MAAMtB,OAAQyB,MAAOxD,EAAAT,QAAU2D,IAAIf,KAAKkB,MAAMG,OACxF3B,QAASM,KAAKkB,MAAMxB,QAASgC,kBAAA,EAAiBtC,aAAcY,KAAKG,MAAMf,gBAInF3B,EAAAL,QAAAmE,cAAAvD,EAAA2D,QAAA,SDwCX5E,SAAQK,QCpCOyB,EDqCf/B,EAAOC,QAAUA,QAAiB","file":"52.200197dca04f05abe3f2.js","sourcesContent":["webpackJsonp([52],{\n\n/***/ 1403:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = __webpack_require__(2);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reflux = __webpack_require__(1);\n\nvar _reflux2 = _interopRequireDefault(_reflux);\n\nvar _immutable = __webpack_require__(55);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _MessageShow = __webpack_require__(1103);\n\nvar _MessageShow2 = _interopRequireDefault(_MessageShow);\n\nvar _common = __webpack_require__(48);\n\nvar _ActionsProvider = __webpack_require__(7);\n\nvar _ActionsProvider2 = _interopRequireDefault(_ActionsProvider);\n\nvar _StoreProvider = __webpack_require__(18);\n\nvar _StoreProvider2 = _interopRequireDefault(_StoreProvider);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar NodesActions = _ActionsProvider2.default.getActions('Nodes');\nvar InputsActions = _ActionsProvider2.default.getActions('Inputs');\nvar MessagesActions = _ActionsProvider2.default.getActions('Messages');\n\nvar NodesStore = _StoreProvider2.default.getStore('Nodes');\nvar StreamsStore = _StoreProvider2.default.getStore('Streams');\nvar InputsStore = _StoreProvider2.default.getStore('Inputs');\n// eslint-disable-next-line no-unused-vars\nvar MessagesStore = _StoreProvider2.default.getStore('Messages');\n\nvar ShowMessagePage = _react2.default.createClass({\n  displayName: 'ShowMessagePage',\n\n  propTypes: {\n    params: _react.PropTypes.object,\n    searchConfig: _react.PropTypes.object.isRequired\n  },\n  mixins: [_reflux2.default.connect(NodesStore), _reflux2.default.listenTo(InputsStore, '_formatInput')],\n  getInitialState: function getInitialState() {\n    return {\n      streams: undefined,\n      inputs: undefined,\n      message: undefined\n    };\n  },\n  componentDidMount: function componentDidMount() {\n    var _this = this;\n\n    MessagesActions.loadMessage.triggerPromise(this.props.params.index, this.props.params.messageId).then(function (message) {\n      _this.setState({ message: message });\n      InputsActions.getOptional.triggerPromise(message.source_input_id);\n    });\n    StreamsStore.listStreams().then(function (streams) {\n      var streamsMap = {};\n      streams.forEach(function (stream) {\n        streamsMap[stream.id] = stream;\n      });\n      _this.setState({ streams: _immutable2.default.Map(streamsMap) });\n    });\n    NodesActions.list.triggerPromise();\n  },\n  _formatInput: function _formatInput(state) {\n    var input = {};\n    input[state.input.id] = state.input;\n    this.setState({ inputs: _immutable2.default.Map(input) });\n  },\n  _isLoaded: function _isLoaded() {\n    return this.state.message && this.state.streams && this.state.nodes && this.state.inputs;\n  },\n  render: function render() {\n    if (this._isLoaded()) {\n      return _react2.default.createElement(\n        _common.DocumentTitle,\n        { title: 'Message ' + this.props.params.messageId + ' on ' + this.props.params.index },\n        _react2.default.createElement(_MessageShow2.default, { message: this.state.message, inputs: this.state.inputs, nodes: _immutable2.default.Map(this.state.nodes),\n          streams: this.state.streams, allStreamsLoaded: true, searchConfig: this.props.searchConfig })\n      );\n    }\n    return _react2.default.createElement(_common.Spinner, null);\n  }\n});\n\nexports.default = ShowMessagePage;\nmodule.exports = exports['default'];\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 52.200197dca04f05abe3f2.js","import React, { PropTypes } from 'react';\nimport Reflux from 'reflux';\nimport Immutable from 'immutable';\nimport MessageShow from 'components/search/MessageShow';\nimport { DocumentTitle, Spinner } from 'components/common';\n\nimport ActionsProvider from 'injection/ActionsProvider';\nconst NodesActions = ActionsProvider.getActions('Nodes');\nconst InputsActions = ActionsProvider.getActions('Inputs');\nconst MessagesActions = ActionsProvider.getActions('Messages');\n\nimport StoreProvider from 'injection/StoreProvider';\nconst NodesStore = StoreProvider.getStore('Nodes');\nconst StreamsStore = StoreProvider.getStore('Streams');\nconst InputsStore = StoreProvider.getStore('Inputs');\n// eslint-disable-next-line no-unused-vars\nconst MessagesStore = StoreProvider.getStore('Messages');\n\nconst ShowMessagePage = React.createClass({\n  propTypes: {\n    params: PropTypes.object,\n    searchConfig: PropTypes.object.isRequired,\n  },\n  mixins: [Reflux.connect(NodesStore), Reflux.listenTo(InputsStore, '_formatInput')],\n  getInitialState() {\n    return {\n      streams: undefined,\n      inputs: undefined,\n      message: undefined,\n    };\n  },\n  componentDidMount() {\n    MessagesActions.loadMessage.triggerPromise(this.props.params.index, this.props.params.messageId).then((message) => {\n      this.setState({ message: message });\n      InputsActions.getOptional.triggerPromise(message.source_input_id);\n    });\n    StreamsStore.listStreams().then((streams) => {\n      const streamsMap = {};\n      streams.forEach((stream) => {\n        streamsMap[stream.id] = stream;\n      });\n      this.setState({ streams: Immutable.Map(streamsMap) });\n    });\n    NodesActions.list.triggerPromise();\n  },\n  _formatInput(state) {\n    const input = {};\n    input[state.input.id] = state.input;\n    this.setState({ inputs: Immutable.Map(input) });\n  },\n  _isLoaded() {\n    return this.state.message && this.state.streams && this.state.nodes && this.state.inputs;\n  },\n  render() {\n    if (this._isLoaded()) {\n      return (\n        <DocumentTitle title={`Message ${this.props.params.messageId} on ${this.props.params.index}`}>\n          <MessageShow message={this.state.message} inputs={this.state.inputs} nodes={Immutable.Map(this.state.nodes)}\n                       streams={this.state.streams} allStreamsLoaded searchConfig={this.props.searchConfig} />\n        </DocumentTitle>\n      );\n    }\n    return <Spinner />;\n  },\n});\n\nexport default ShowMessagePage;\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/ShowMessagePage.jsx"],"sourceRoot":""}