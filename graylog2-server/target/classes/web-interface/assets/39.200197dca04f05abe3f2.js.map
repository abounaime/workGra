{"version":3,"sources":["webpack:///39.200197dca04f05abe3f2.js","webpack:///./src/components/users/EditRole.jsx","webpack:///./src/components/users/PermissionSelector.jsx","webpack:///./src/components/users/RoleList.jsx","webpack:///./src/components/users/RolesComponent.jsx","webpack:///./src/pages/RolesPage.jsx"],"names":["webpackJsonp","1323","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_react","_react2","_immutable","_immutable2","_reactBootstrap","_bootstrap","_PermissionSelector","_PermissionSelector2","_PermissionsMixin","_PermissionsMixin2","EditRole","createClass","displayName","propTypes","initialRole","PropTypes","object","onSave","func","isRequired","cancelEdit","streams","dashboards","mixins","getInitialState","role","this","props","name","description","permissions","initialName","_safeRoleName","componentWillReceiveProps","newProps","setState","_setName","ev","state","target","_setDescription","_updatePermissions","addedPerms","deletedPerms","Set","subtract","union","toJS","_saveDisabled","length","_onSave","render","titleText","saveDisabled","saveDisabledAlert","createElement","Alert","bsStyle","style","marginBottom","Row","Col","md","marginTop","Input","id","type","label","onChange","required","FormGroup","ControlLabel","HelpBlock","Button","onClick","marginRight","disabled","1326","_common","PermissionSelector","_this","streamItemButtons","stream","isRead","contains","isEdit","ButtonGroup","bsSize","_toggleStreamReadPermissions","active","_toggleStreamEditPermissions","multiStreamButtons","streamIds","className","_toggleAllStreamsRead","_toggleAllStreamsEdit","dashboardItemButtons","dashboard","_toggleDashboardReadPermissions","_toggleDashboardEditPermissions","multiDashboardButtons","dashboardIds","_toggleAllDashboardsRead","_toggleAllDashboardsEdit","Tabs","defaultActiveKey","animation","Tab","eventKey","title","TableList","items","filterLabel","filterKeys","itemActionsFactory","headerActionsFactory","_toggleReadPermissions","of","_toggleEditPermissions","idList","_this2","added","deleted","forEach","readTarget","editTarget","add","_this3","1327","RoleList","roles","instanceOf","showEditRole","deleteRole","_headerCellFormatter","header","_roleInfoFormatter","actions","key","read_only","headers","DataTable","headerCellFormatter","sortByKey","rows","filterBy","dataRowFormatter","1328","_StoreProvider","_StoreProvider2","_UserNotification","_UserNotification2","_RoleList","_RoleList2","_EditRole","_EditRole2","_PageHeader","_PageHeader2","StreamsStore","getStore","DashboardsStore","RolesStore","RolesComponent","rolesLoaded","editRole","List","componentDidMount","loadRoles","load","listDashboards","then","_showCreateRole","_showEditRole","_deleteRole","window","confirm","getMembers","membership","users","error","_saveRole","createRole","_clearEditRole","updateRole","content","actionButton","subpage","1399","_RolesComponent","_RolesComponent2","RolesPage","DocumentTitle"],"mappings":"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","file":"39.200197dca04f05abe3f2.js","sourcesContent":["webpackJsonp([39],{\n\n/***/ 1323:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = __webpack_require__(2);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _immutable = __webpack_require__(55);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _reactBootstrap = __webpack_require__(15);\n\nvar _bootstrap = __webpack_require__(43);\n\nvar _PermissionSelector = __webpack_require__(1326);\n\nvar _PermissionSelector2 = _interopRequireDefault(_PermissionSelector);\n\nvar _PermissionsMixin = __webpack_require__(165);\n\nvar _PermissionsMixin2 = _interopRequireDefault(_PermissionsMixin);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar EditRole = _react2.default.createClass({\n  displayName: 'EditRole',\n\n  propTypes: {\n    initialRole: _react2.default.PropTypes.object,\n    onSave: _react2.default.PropTypes.func.isRequired,\n    cancelEdit: _react2.default.PropTypes.func.isRequired,\n    streams: _react2.default.PropTypes.object,\n    dashboards: _react2.default.PropTypes.object\n  },\n\n  mixins: [_PermissionsMixin2.default],\n\n  getInitialState: function getInitialState() {\n    var role = this.props.initialRole;\n    if (role === null) {\n      // for the create dialog\n      role = { name: null, description: null, permissions: [] };\n    }\n    return {\n      role: role,\n      initialName: this._safeRoleName(this.props.initialRole)\n    };\n  },\n  componentWillReceiveProps: function componentWillReceiveProps(newProps) {\n    this.setState({ role: newProps.initialRole, initialName: this._safeRoleName(newProps.initialRole) });\n  },\n  _safeRoleName: function _safeRoleName(role) {\n    return role === null ? null : role.name;\n  },\n  _setName: function _setName(ev) {\n    var role = this.state.role;\n    role.name = ev.target.value;\n    this.setState({ role: this.state.role });\n  },\n  _setDescription: function _setDescription(ev) {\n    var role = this.state.role;\n    role.description = ev.target.value;\n    this.setState({ role: this.state.role });\n  },\n  _updatePermissions: function _updatePermissions(addedPerms, deletedPerms) {\n    var role = this.state.role;\n    role.permissions = _immutable2.default.Set(role.permissions).subtract(deletedPerms).union(addedPerms).toJS();\n    this.setState({ role: role });\n  },\n  _saveDisabled: function _saveDisabled() {\n    return this.state.role === null || this.state.role.name === null || this.state.role.name === '' || this.state.role.permissions.length === 0;\n  },\n  _onSave: function _onSave() {\n    this.props.onSave(this.state.initialName, this.state.role);\n  },\n  render: function render() {\n    var titleText = void 0;\n    if (this.state.initialName === null) {\n      titleText = 'Create a new role';\n    } else {\n      titleText = 'Edit role ' + this.state.initialName;\n    }\n\n    var saveDisabled = this._saveDisabled();\n    var saveDisabledAlert = null;\n    if (saveDisabled) {\n      saveDisabledAlert = _react2.default.createElement(\n        _reactBootstrap.Alert,\n        { bsStyle: 'warning', style: { marginBottom: 10 } },\n        'Please name the role and select at least one permission to save it.'\n      );\n    }\n\n    return _react2.default.createElement(\n      _reactBootstrap.Row,\n      null,\n      _react2.default.createElement(\n        _reactBootstrap.Col,\n        { md: 12 },\n        _react2.default.createElement(\n          'h1',\n          null,\n          titleText\n        ),\n        _react2.default.createElement(\n          'div',\n          { style: { marginTop: 10 } },\n          _react2.default.createElement(_bootstrap.Input, { id: 'role-name', type: 'text', label: 'Name', onChange: this._setName, value: this.state.role.name,\n            required: true }),\n          _react2.default.createElement(_bootstrap.Input, { id: 'role-description', type: 'text', label: 'Description', onChange: this._setDescription,\n            value: this.state.role.description }),\n          _react2.default.createElement(\n            _reactBootstrap.FormGroup,\n            null,\n            _react2.default.createElement(\n              _reactBootstrap.ControlLabel,\n              null,\n              'Permissions'\n            ),\n            _react2.default.createElement(\n              _reactBootstrap.HelpBlock,\n              null,\n              'Select the permissions for this role'\n            )\n          ),\n          _react2.default.createElement(_PermissionSelector2.default, { streams: this.props.streams,\n            dashboards: this.props.dashboards,\n            permissions: _immutable2.default.Set(this.state.role.permissions),\n            onChange: this._updatePermissions\n          }),\n          _react2.default.createElement('hr', null),\n          saveDisabledAlert,\n          _react2.default.createElement(\n            _reactBootstrap.Button,\n            { onClick: this._onSave, style: { marginRight: 5 }, bsStyle: 'primary', disabled: saveDisabled },\n            'Save'\n          ),\n          _react2.default.createElement(\n            _reactBootstrap.Button,\n            { onClick: this.props.cancelEdit },\n            'Cancel'\n          )\n        )\n      )\n    );\n  }\n});\n\nexports.default = EditRole;\nmodule.exports = exports['default'];\n\n/***/ }),\n\n/***/ 1326:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = __webpack_require__(2);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _immutable = __webpack_require__(55);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _reactBootstrap = __webpack_require__(15);\n\nvar _common = __webpack_require__(48);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar PermissionSelector = _react2.default.createClass({\n  displayName: 'PermissionSelector',\n\n  propTypes: {\n    onChange: _react2.default.PropTypes.func,\n    streams: _react2.default.PropTypes.object,\n    dashboards: _react2.default.PropTypes.object,\n    permissions: _react2.default.PropTypes.object\n  },\n\n  render: function render() {\n    var _this = this;\n\n    var streamItemButtons = function streamItemButtons(stream) {\n      var isRead = _this.props.permissions.contains('streams:read:' + stream.id);\n      var isEdit = _this.props.permissions.contains('streams:edit:' + stream.id);\n      return _react2.default.createElement(\n        _reactBootstrap.ButtonGroup,\n        { bsSize: 'small' },\n        _react2.default.createElement(\n          _reactBootstrap.Button,\n          { bsStyle: isRead ? 'info' : 'default', onClick: function onClick() {\n              return _this._toggleStreamReadPermissions(stream);\n            },\n            active: isRead },\n          'Allow reading'\n        ),\n        _react2.default.createElement(\n          _reactBootstrap.Button,\n          { bsStyle: isEdit ? 'info' : 'default', onClick: function onClick() {\n              return _this._toggleStreamEditPermissions(stream);\n            },\n            active: isEdit },\n          'Allow editing'\n        )\n      );\n    };\n\n    var multiStreamButtons = function multiStreamButtons(streamIds) {\n      return _react2.default.createElement(\n        'div',\n        { className: 'pull-right', style: { marginTop: 10, marginBottom: 10 } },\n        _react2.default.createElement(\n          _reactBootstrap.Button,\n          { bsSize: 'xsmall', bsStyle: 'info', onClick: function onClick() {\n              return _this._toggleAllStreamsRead(streamIds);\n            } },\n          'Toggle read permissions'\n        ),\n        '\\xA0',\n        _react2.default.createElement(\n          _reactBootstrap.Button,\n          { bsSize: 'xsmall', bsStyle: 'info', onClick: function onClick() {\n              return _this._toggleAllStreamsEdit(streamIds);\n            } },\n          'Toggle edit permissions'\n        )\n      );\n    };\n\n    var dashboardItemButtons = function dashboardItemButtons(dashboard) {\n      var isRead = _this.props.permissions.contains('dashboards:read:' + dashboard.id);\n      var isEdit = _this.props.permissions.contains('dashboards:edit:' + dashboard.id);\n      return _react2.default.createElement(\n        _reactBootstrap.ButtonGroup,\n        { bsSize: 'small' },\n        _react2.default.createElement(\n          _reactBootstrap.Button,\n          { bsStyle: isRead ? 'info' : 'default', onClick: function onClick() {\n              return _this._toggleDashboardReadPermissions(dashboard);\n            },\n            active: isRead },\n          'Allow reading'\n        ),\n        _react2.default.createElement(\n          _reactBootstrap.Button,\n          { bsStyle: isEdit ? 'info' : 'default', onClick: function onClick() {\n              return _this._toggleDashboardEditPermissions(dashboard);\n            },\n            active: isEdit },\n          'Allow editing'\n        )\n      );\n    };\n\n    var multiDashboardButtons = function multiDashboardButtons(dashboardIds) {\n      return _react2.default.createElement(\n        'div',\n        { className: 'pull-right', style: { marginTop: 10, marginBottom: 10 } },\n        _react2.default.createElement(\n          _reactBootstrap.Button,\n          { bsSize: 'xsmall', bsStyle: 'info', onClick: function onClick() {\n              return _this._toggleAllDashboardsRead(dashboardIds);\n            } },\n          'Toggle read permissions'\n        ),\n        '\\xA0',\n        _react2.default.createElement(\n          _reactBootstrap.Button,\n          { bsSize: 'xsmall', bsStyle: 'info', onClick: function onClick() {\n              return _this._toggleAllDashboardsEdit(dashboardIds);\n            } },\n          'Toggle edit permissions'\n        )\n      );\n    };\n\n    return _react2.default.createElement(\n      'div',\n      null,\n      _react2.default.createElement(\n        _reactBootstrap.Tabs,\n        { id: 'permissionSelectorTabs', defaultActiveKey: 1, animation: false },\n        _react2.default.createElement(\n          _reactBootstrap.Tab,\n          { eventKey: 1, title: 'Streams' },\n          _react2.default.createElement(\n            'div',\n            { style: { marginTop: 10 } },\n            _react2.default.createElement(_common.TableList, {\n              items: this.props.streams,\n              filterLabel: 'Filter Streams',\n              filterKeys: ['title'],\n              itemActionsFactory: streamItemButtons,\n              headerActionsFactory: multiStreamButtons\n            })\n          )\n        ),\n        _react2.default.createElement(\n          _reactBootstrap.Tab,\n          { eventKey: 2, title: 'Dashboards' },\n          _react2.default.createElement(\n            'div',\n            { style: { marginTop: 10 } },\n            _react2.default.createElement(_common.TableList, {\n              items: this.props.dashboards,\n              filterLabel: 'Filter Dashboards',\n              filterKeys: ['title'],\n              itemActionsFactory: dashboardItemButtons,\n              headerActionsFactory: multiDashboardButtons\n            })\n          )\n        )\n      )\n    );\n  },\n\n\n  /*\n   * onClick actions for single edits\n   */\n  _toggleStreamReadPermissions: function _toggleStreamReadPermissions(stream) {\n    this._toggleReadPermissions('streams', _immutable2.default.Set.of(stream.id));\n  },\n  _toggleStreamEditPermissions: function _toggleStreamEditPermissions(stream) {\n    this._toggleEditPermissions('streams', _immutable2.default.Set.of(stream.id));\n  },\n  _toggleDashboardReadPermissions: function _toggleDashboardReadPermissions(dashboard) {\n    this._toggleReadPermissions('dashboards', _immutable2.default.Set.of(dashboard.id));\n  },\n  _toggleDashboardEditPermissions: function _toggleDashboardEditPermissions(dashboard) {\n    this._toggleEditPermissions('dashboards', _immutable2.default.Set.of(dashboard.id));\n  },\n\n\n  /*\n   * onClick actions for bulk edits\n   */\n\n  _toggleAllStreamsRead: function _toggleAllStreamsRead(streamIds) {\n    this._toggleReadPermissions('streams', streamIds);\n  },\n  _toggleAllStreamsEdit: function _toggleAllStreamsEdit(streamIds) {\n    this._toggleEditPermissions('streams', streamIds);\n  },\n  _toggleAllDashboardsRead: function _toggleAllDashboardsRead(dashboardIds) {\n    this._toggleReadPermissions('dashboards', dashboardIds);\n  },\n  _toggleAllDashboardsEdit: function _toggleAllDashboardsEdit(dashboardIds) {\n    this._toggleEditPermissions('dashboards', dashboardIds);\n  },\n  _toggleReadPermissions: function _toggleReadPermissions(target, idList) {\n    var _this2 = this;\n\n    var added = _immutable2.default.Set.of();\n    var deleted = _immutable2.default.Set.of();\n\n    idList.forEach(function (id) {\n      var readTarget = target + ':read:' + id;\n      var editTarget = target + ':edit:' + id;\n\n      if (_this2.props.permissions.contains(readTarget)) {\n        deleted = deleted.add(readTarget).add(editTarget);\n      } else {\n        added = added.add(readTarget);\n      }\n    }, this);\n    this.props.onChange(added, deleted);\n  },\n  _toggleEditPermissions: function _toggleEditPermissions(target, idList) {\n    var _this3 = this;\n\n    var added = _immutable2.default.Set.of();\n    var deleted = _immutable2.default.Set.of();\n\n    idList.forEach(function (id) {\n      var readTarget = target + ':read:' + id;\n      var editTarget = target + ':edit:' + id;\n\n      if (_this3.props.permissions.contains(editTarget)) {\n        deleted = deleted.add(editTarget);\n      } else {\n        added = added.add(readTarget).add(editTarget);\n      }\n    }, this);\n    this.props.onChange(added, deleted);\n  }\n});\n\nexports.default = PermissionSelector;\nmodule.exports = exports['default'];\n\n/***/ }),\n\n/***/ 1327:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = __webpack_require__(2);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _immutable = __webpack_require__(55);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _reactBootstrap = __webpack_require__(15);\n\nvar _common = __webpack_require__(48);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar RoleList = _react2.default.createClass({\n  displayName: 'RoleList',\n\n  propTypes: {\n    roles: _react2.default.PropTypes.instanceOf(_immutable2.default.Set).isRequired,\n    showEditRole: _react2.default.PropTypes.func.isRequired,\n    deleteRole: _react2.default.PropTypes.func.isRequired\n  },\n\n  _headerCellFormatter: function _headerCellFormatter(header) {\n    var className = header === 'Actions' ? 'actions' : '';\n    return _react2.default.createElement(\n      'th',\n      { className: className },\n      header\n    );\n  },\n  _roleInfoFormatter: function _roleInfoFormatter(role) {\n    var _this = this;\n\n    var actions = [_react2.default.createElement(\n      _reactBootstrap.Button,\n      { key: 'delete', bsSize: 'xsmall', bsStyle: 'primary', onClick: function onClick() {\n          return _this.props.deleteRole(role);\n        },\n        title: 'Delete role' },\n      'Delete'\n    ), _react2.default.createElement(\n      'span',\n      { key: 'space' },\n      '\\xA0'\n    ), _react2.default.createElement(\n      _reactBootstrap.Button,\n      { key: 'edit', bsSize: 'xsmall', bsStyle: 'info', onClick: function onClick() {\n          return _this.props.showEditRole(role);\n        },\n        title: 'Edit role' },\n      'Edit'\n    )];\n\n    return _react2.default.createElement(\n      'tr',\n      { key: role.name },\n      _react2.default.createElement(\n        'td',\n        null,\n        role.name\n      ),\n      _react2.default.createElement(\n        'td',\n        { className: 'limited' },\n        role.description\n      ),\n      _react2.default.createElement(\n        'td',\n        null,\n        role.read_only ? null : actions\n      )\n    );\n  },\n  render: function render() {\n    var filterKeys = ['name', 'description'];\n    var headers = ['Name', 'Description', 'Actions'];\n\n    return _react2.default.createElement(\n      'div',\n      null,\n      _react2.default.createElement(_common.DataTable, { id: 'role-list',\n        className: 'table-hover',\n        headers: headers,\n        headerCellFormatter: this._headerCellFormatter,\n        sortByKey: 'name',\n        rows: this.props.roles.toJS(),\n        filterBy: 'Name',\n        dataRowFormatter: this._roleInfoFormatter,\n        filterLabel: 'Filter Roles',\n        filterKeys: filterKeys })\n    );\n  }\n});\n\nexports.default = RoleList;\nmodule.exports = exports['default'];\n\n/***/ }),\n\n/***/ 1328:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = __webpack_require__(2);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _immutable = __webpack_require__(55);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _reactBootstrap = __webpack_require__(15);\n\nvar _StoreProvider = __webpack_require__(18);\n\nvar _StoreProvider2 = _interopRequireDefault(_StoreProvider);\n\nvar _UserNotification = __webpack_require__(5);\n\nvar _UserNotification2 = _interopRequireDefault(_UserNotification);\n\nvar _RoleList = __webpack_require__(1327);\n\nvar _RoleList2 = _interopRequireDefault(_RoleList);\n\nvar _EditRole = __webpack_require__(1323);\n\nvar _EditRole2 = _interopRequireDefault(_EditRole);\n\nvar _PageHeader = __webpack_require__(265);\n\nvar _PageHeader2 = _interopRequireDefault(_PageHeader);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar StreamsStore = _StoreProvider2.default.getStore('Streams');\nvar DashboardsStore = _StoreProvider2.default.getStore('Dashboards');\nvar RolesStore = _StoreProvider2.default.getStore('Roles');\n\nvar RolesComponent = _react2.default.createClass({\n  displayName: 'RolesComponent',\n  getInitialState: function getInitialState() {\n    return {\n      roles: _immutable2.default.Set(),\n      rolesLoaded: false,\n      editRole: null,\n      streams: _immutable2.default.List(),\n      dashboards: _immutable2.default.List()\n    };\n  },\n  componentDidMount: function componentDidMount() {\n    var _this = this;\n\n    this.loadRoles();\n    StreamsStore.load(function (streams) {\n      return _this.setState({ streams: _immutable2.default.List(streams) });\n    });\n    DashboardsStore.listDashboards().then(function (dashboards) {\n      return _this.setState({ dashboards: dashboards });\n    });\n  },\n  loadRoles: function loadRoles() {\n    var _this2 = this;\n\n    var promise = RolesStore.loadRoles();\n    promise.then(function (roles) {\n      _this2.setState({ roles: _immutable2.default.Set(roles), rolesLoaded: true });\n    });\n  },\n  _showCreateRole: function _showCreateRole() {\n    this.setState({ showEditRole: true });\n  },\n  _showEditRole: function _showEditRole(role) {\n    this.setState({ showEditRole: true, editRole: role });\n  },\n  _deleteRole: function _deleteRole(role) {\n    var _this3 = this;\n\n    if (window.confirm('Do you really want to delete role ' + role.name + '?')) {\n      RolesStore.getMembers(role.name).then(function (membership) {\n        if (membership.users.length !== 0) {\n          _UserNotification2.default.error('Cannot delete role ' + role.name + '. It is still assigned to ' + membership.users.length + ' users.');\n        } else {\n          RolesStore.deleteRole(role.name).then(_this3.loadRoles);\n        }\n      });\n    }\n  },\n  _saveRole: function _saveRole(initialName, role) {\n    if (initialName === null) {\n      RolesStore.createRole(role).then(this._clearEditRole).then(this.loadRoles);\n    } else {\n      RolesStore.updateRole(initialName, role).then(this._clearEditRole).then(this.loadRoles);\n    }\n  },\n  _clearEditRole: function _clearEditRole() {\n    this.setState({ showEditRole: false, editRole: null });\n  },\n  render: function render() {\n    var content = null;\n    if (!this.state.rolesLoaded) {\n      content = _react2.default.createElement(\n        'span',\n        null,\n        'Loading roles...'\n      );\n    } else if (this.state.showEditRole) {\n      content = _react2.default.createElement(_EditRole2.default, { initialRole: this.state.editRole, streams: this.state.streams, dashboards: this.state.dashboards,\n        onSave: this._saveRole, cancelEdit: this._clearEditRole });\n    } else {\n      content = _react2.default.createElement(_RoleList2.default, { roles: this.state.roles,\n        showEditRole: this._showEditRole,\n        deleteRole: this._deleteRole });\n    }\n\n    var actionButton = void 0;\n    if (!this.state.showEditRole) {\n      actionButton = _react2.default.createElement(\n        _reactBootstrap.Button,\n        { bsStyle: 'success', onClick: this._showCreateRole },\n        'Add new role'\n      );\n    }\n    return _react2.default.createElement(\n      _reactBootstrap.Row,\n      null,\n      _react2.default.createElement(\n        _reactBootstrap.Col,\n        { md: 12 },\n        _react2.default.createElement(\n          _PageHeader2.default,\n          { title: 'Roles', subpage: true },\n          _react2.default.createElement(\n            'span',\n            null,\n            'Roles bundle permissions which can be assigned to multiple users at once'\n          ),\n          null,\n          _react2.default.createElement(\n            'span',\n            null,\n            actionButton\n          )\n        ),\n        content\n      )\n    );\n  }\n});\n\nexports.default = RolesComponent;\nmodule.exports = exports['default'];\n\n/***/ }),\n\n/***/ 1399:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = __webpack_require__(2);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactBootstrap = __webpack_require__(15);\n\nvar _RolesComponent = __webpack_require__(1328);\n\nvar _RolesComponent2 = _interopRequireDefault(_RolesComponent);\n\nvar _common = __webpack_require__(48);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar RolesPage = _react2.default.createClass({\n  displayName: 'RolesPage',\n  render: function render() {\n    return _react2.default.createElement(\n      _common.DocumentTitle,\n      { title: 'Roles' },\n      _react2.default.createElement(\n        _reactBootstrap.Row,\n        null,\n        _react2.default.createElement(\n          _reactBootstrap.Col,\n          { md: 12 },\n          _react2.default.createElement(_RolesComponent2.default, null)\n        )\n      )\n    );\n  }\n});\n\nexports.default = RolesPage;\nmodule.exports = exports['default'];\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 39.200197dca04f05abe3f2.js","import React from 'react';\nimport Immutable from 'immutable';\nimport { Alert, Button, Col, ControlLabel, FormGroup, HelpBlock, Row } from 'react-bootstrap';\n\nimport { Input } from 'components/bootstrap';\nimport PermissionSelector from 'components/users/PermissionSelector';\nimport PermissionsMixin from 'util/PermissionsMixin';\n\nconst EditRole = React.createClass({\n  propTypes: {\n    initialRole: React.PropTypes.object,\n    onSave: React.PropTypes.func.isRequired,\n    cancelEdit: React.PropTypes.func.isRequired,\n    streams: React.PropTypes.object,\n    dashboards: React.PropTypes.object,\n  },\n\n  mixins: [PermissionsMixin],\n\n  getInitialState() {\n    let role = this.props.initialRole;\n    if (role === null) {\n      // for the create dialog\n      role = { name: null, description: null, permissions: [] };\n    }\n    return {\n      role: role,\n      initialName: this._safeRoleName(this.props.initialRole),\n    };\n  },\n\n  componentWillReceiveProps(newProps) {\n    this.setState({ role: newProps.initialRole, initialName: this._safeRoleName(newProps.initialRole) });\n  },\n\n  _safeRoleName(role) {\n    return role === null ? null : role.name;\n  },\n\n  _setName(ev) {\n    const role = this.state.role;\n    role.name = ev.target.value;\n    this.setState({ role: this.state.role });\n  },\n  _setDescription(ev) {\n    const role = this.state.role;\n    role.description = ev.target.value;\n    this.setState({ role: this.state.role });\n  },\n\n  _updatePermissions(addedPerms, deletedPerms) {\n    const role = this.state.role;\n    role.permissions = Immutable.Set(role.permissions)\n      .subtract(deletedPerms)\n      .union(addedPerms)\n      .toJS();\n    this.setState({ role: role });\n  },\n\n  _saveDisabled() {\n    return this.state.role === null || this.state.role.name === null || this.state.role.name === '' || this.state.role.permissions.length === 0;\n  },\n\n  _onSave() {\n    this.props.onSave(this.state.initialName, this.state.role);\n  },\n\n  render() {\n    let titleText;\n    if (this.state.initialName === null) {\n      titleText = 'Create a new role';\n    } else {\n      titleText = `Edit role ${this.state.initialName}`;\n    }\n\n    const saveDisabled = this._saveDisabled();\n    let saveDisabledAlert = null;\n    if (saveDisabled) {\n      saveDisabledAlert = (\n        <Alert bsStyle=\"warning\" style={{ marginBottom: 10 }}>\n          Please name the role and select at least one permission to save it.\n        </Alert>\n      );\n    }\n\n    return (\n      <Row>\n        <Col md={12}>\n          <h1>{titleText}</h1>\n          <div style={{ marginTop: 10 }}>\n            <Input id=\"role-name\" type=\"text\" label=\"Name\" onChange={this._setName} value={this.state.role.name}\n                   required />\n            <Input id=\"role-description\" type=\"text\" label=\"Description\" onChange={this._setDescription}\n                   value={this.state.role.description} />\n\n            <FormGroup>\n              <ControlLabel>Permissions</ControlLabel>\n              <HelpBlock>Select the permissions for this role</HelpBlock>\n            </FormGroup>\n            <PermissionSelector streams={this.props.streams}\n                                dashboards={this.props.dashboards}\n                                permissions={Immutable.Set(this.state.role.permissions)}\n                                onChange={this._updatePermissions}\n            />\n            <hr />\n            {saveDisabledAlert}\n            <Button onClick={this._onSave} style={{ marginRight: 5 }} bsStyle=\"primary\" disabled={saveDisabled}>\n              Save\n            </Button>\n            <Button onClick={this.props.cancelEdit}>Cancel</Button>\n          </div>\n        </Col>\n      </Row>);\n  },\n});\n\nexport default EditRole;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/users/EditRole.jsx","import React from 'react';\nimport Immutable from 'immutable';\n\nimport { Tabs, Tab, Button, ButtonGroup } from 'react-bootstrap';\n\nimport { TableList } from 'components/common';\n\nconst PermissionSelector = React.createClass({\n  propTypes: {\n    onChange: React.PropTypes.func,\n    streams: React.PropTypes.object,\n    dashboards: React.PropTypes.object,\n    permissions: React.PropTypes.object,\n  },\n\n  render() {\n    const streamItemButtons = (stream) => {\n      const isRead = this.props.permissions.contains(`streams:read:${stream.id}`);\n      const isEdit = this.props.permissions.contains(`streams:edit:${stream.id}`);\n      return (<ButtonGroup bsSize=\"small\">\n        <Button bsStyle={isRead ? 'info' : 'default'} onClick={() => this._toggleStreamReadPermissions(stream)}\n                active={isRead}>Allow reading</Button>\n        <Button bsStyle={isEdit ? 'info' : 'default'} onClick={() => this._toggleStreamEditPermissions(stream)}\n                active={isEdit}>Allow editing</Button>\n      </ButtonGroup>);\n    };\n\n    const multiStreamButtons = (streamIds) => {\n      return (\n        <div className=\"pull-right\" style={{ marginTop: 10, marginBottom: 10 }}>\n          <Button bsSize=\"xsmall\" bsStyle=\"info\" onClick={() => this._toggleAllStreamsRead(streamIds)}>Toggle read permissions</Button>\n          &nbsp;\n          <Button bsSize=\"xsmall\" bsStyle=\"info\" onClick={() => this._toggleAllStreamsEdit(streamIds)}>Toggle edit permissions</Button>\n        </div>\n      );\n    };\n\n    const dashboardItemButtons = (dashboard) => {\n      const isRead = this.props.permissions.contains(`dashboards:read:${dashboard.id}`);\n      const isEdit = this.props.permissions.contains(`dashboards:edit:${dashboard.id}`);\n      return (<ButtonGroup bsSize=\"small\">\n        <Button bsStyle={isRead ? 'info' : 'default'} onClick={() => this._toggleDashboardReadPermissions(dashboard)}\n                active={isRead}>Allow reading</Button>\n        <Button bsStyle={isEdit ? 'info' : 'default'} onClick={() => this._toggleDashboardEditPermissions(dashboard)}\n                active={isEdit}>Allow editing</Button>\n      </ButtonGroup>);\n    };\n\n    const multiDashboardButtons = (dashboardIds) => {\n      return (\n        <div className=\"pull-right\" style={{ marginTop: 10, marginBottom: 10 }}>\n          <Button bsSize=\"xsmall\" bsStyle=\"info\" onClick={() => this._toggleAllDashboardsRead(dashboardIds)}>Toggle read permissions</Button>\n          &nbsp;\n          <Button bsSize=\"xsmall\" bsStyle=\"info\" onClick={() => this._toggleAllDashboardsEdit(dashboardIds)}>Toggle edit permissions</Button>\n        </div>\n      );\n    };\n\n    return (\n      <div>\n        <Tabs id=\"permissionSelectorTabs\" defaultActiveKey={1} animation={false}>\n          <Tab eventKey={1} title=\"Streams\">\n            <div style={{ marginTop: 10 }}>\n              <TableList\n                items={this.props.streams}\n                filterLabel=\"Filter Streams\"\n                filterKeys={['title']}\n                itemActionsFactory={streamItemButtons}\n                headerActionsFactory={multiStreamButtons}\n              />\n            </div>\n          </Tab>\n          <Tab eventKey={2} title=\"Dashboards\">\n            <div style={{ marginTop: 10 }}>\n              <TableList\n                items={this.props.dashboards}\n                filterLabel=\"Filter Dashboards\"\n                filterKeys={['title']}\n                itemActionsFactory={dashboardItemButtons}\n                headerActionsFactory={multiDashboardButtons}\n              />\n            </div>\n          </Tab>\n        </Tabs>\n      </div>\n    );\n  },\n\n  /*\n   * onClick actions for single edits\n   */\n  _toggleStreamReadPermissions(stream) {\n    this._toggleReadPermissions('streams', Immutable.Set.of(stream.id));\n  },\n\n  _toggleStreamEditPermissions(stream) {\n    this._toggleEditPermissions('streams', Immutable.Set.of(stream.id));\n  },\n\n  _toggleDashboardReadPermissions(dashboard) {\n    this._toggleReadPermissions('dashboards', Immutable.Set.of(dashboard.id));\n  },\n\n  _toggleDashboardEditPermissions(dashboard) {\n    this._toggleEditPermissions('dashboards', Immutable.Set.of(dashboard.id));\n  },\n\n  /*\n   * onClick actions for bulk edits\n   */\n\n  _toggleAllStreamsRead(streamIds) {\n    this._toggleReadPermissions('streams', streamIds);\n  },\n\n  _toggleAllStreamsEdit(streamIds) {\n    this._toggleEditPermissions('streams', streamIds);\n  },\n\n  _toggleAllDashboardsRead(dashboardIds) {\n    this._toggleReadPermissions('dashboards', dashboardIds);\n  },\n\n  _toggleAllDashboardsEdit(dashboardIds) {\n    this._toggleEditPermissions('dashboards', dashboardIds);\n  },\n\n  _toggleReadPermissions(target, idList) {\n    let added = Immutable.Set.of();\n    let deleted = Immutable.Set.of();\n\n    idList.forEach((id) => {\n      const readTarget = `${target}:read:${id}`;\n      const editTarget = `${target}:edit:${id}`;\n\n      if (this.props.permissions.contains(readTarget)) {\n        deleted = deleted.add(readTarget).add(editTarget);\n      } else {\n        added = added.add(readTarget);\n      }\n    }, this);\n    this.props.onChange(added, deleted);\n  },\n  _toggleEditPermissions(target, idList) {\n    let added = Immutable.Set.of();\n    let deleted = Immutable.Set.of();\n\n    idList.forEach((id) => {\n      const readTarget = `${target}:read:${id}`;\n      const editTarget = `${target}:edit:${id}`;\n\n      if (this.props.permissions.contains(editTarget)) {\n        deleted = deleted.add(editTarget);\n      } else {\n        added = added.add(readTarget).add(editTarget);\n      }\n    }, this);\n    this.props.onChange(added, deleted);\n  },\n});\n\nexport default PermissionSelector;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/users/PermissionSelector.jsx","import React from 'react';\nimport Immutable from 'immutable';\nimport { Button } from 'react-bootstrap';\n\nimport { DataTable } from 'components/common';\n\nconst RoleList = React.createClass({\n  propTypes: {\n    roles: React.PropTypes.instanceOf(Immutable.Set).isRequired,\n    showEditRole: React.PropTypes.func.isRequired,\n    deleteRole: React.PropTypes.func.isRequired,\n  },\n\n  _headerCellFormatter(header) {\n    const className = (header === 'Actions' ? 'actions' : '');\n    return <th className={className}>{header}</th>;\n  },\n  _roleInfoFormatter(role) {\n    const actions = [\n      <Button key=\"delete\" bsSize=\"xsmall\" bsStyle=\"primary\" onClick={() => this.props.deleteRole(role)}\n              title=\"Delete role\">Delete</Button>,\n      <span key=\"space\">&nbsp;</span>,\n      <Button key=\"edit\" bsSize=\"xsmall\" bsStyle=\"info\" onClick={() => this.props.showEditRole(role)}\n              title=\"Edit role\">Edit</Button>,\n    ];\n\n    return (\n      <tr key={role.name}>\n        <td>{role.name}</td>\n        <td className=\"limited\">{role.description}</td>\n        <td>\n          {role.read_only ? null : actions}\n        </td>\n      </tr>\n    );\n  },\n  render() {\n    const filterKeys = ['name', 'description'];\n    const headers = ['Name', 'Description', 'Actions'];\n\n    return (\n      <div>\n        <DataTable id=\"role-list\"\n                   className=\"table-hover\"\n                   headers={headers}\n                   headerCellFormatter={this._headerCellFormatter}\n                   sortByKey={'name'}\n                   rows={this.props.roles.toJS()}\n                   filterBy=\"Name\"\n                   dataRowFormatter={this._roleInfoFormatter}\n                   filterLabel=\"Filter Roles\"\n                   filterKeys={filterKeys} />\n      </div>\n    );\n  },\n});\n\nexport default RoleList;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/users/RoleList.jsx","import React from 'react';\nimport Immutable from 'immutable';\nimport { Button, Col, Row } from 'react-bootstrap';\n\nimport StoreProvider from 'injection/StoreProvider';\nconst StreamsStore = StoreProvider.getStore('Streams');\nconst DashboardsStore = StoreProvider.getStore('Dashboards');\nconst RolesStore = StoreProvider.getStore('Roles');\n\nimport UserNotification from 'util/UserNotification';\nimport RoleList from 'components/users/RoleList';\nimport EditRole from 'components/users/EditRole';\nimport PageHeader from 'components/common/PageHeader';\n\nconst RolesComponent = React.createClass({\n  getInitialState() {\n    return {\n      roles: Immutable.Set(),\n      rolesLoaded: false,\n      editRole: null,\n      streams: Immutable.List(),\n      dashboards: Immutable.List(),\n    };\n  },\n  componentDidMount() {\n    this.loadRoles();\n    StreamsStore.load(streams => this.setState({ streams: Immutable.List(streams) }));\n    DashboardsStore.listDashboards().then(dashboards => this.setState({ dashboards: dashboards }));\n  },\n\n  loadRoles() {\n    const promise = RolesStore.loadRoles();\n    promise.then((roles) => {\n      this.setState({ roles: Immutable.Set(roles), rolesLoaded: true });\n    });\n  },\n\n  _showCreateRole() {\n    this.setState({ showEditRole: true });\n  },\n  _showEditRole(role) {\n    this.setState({ showEditRole: true, editRole: role });\n  },\n  _deleteRole(role) {\n    if (window.confirm(`Do you really want to delete role ${role.name}?`)) {\n      RolesStore.getMembers(role.name).then((membership) => {\n        if (membership.users.length !== 0) {\n          UserNotification.error(`Cannot delete role ${role.name}. It is still assigned to ${membership.users.length} users.`);\n        } else {\n          RolesStore.deleteRole(role.name).then(this.loadRoles);\n        }\n      });\n    }\n  },\n  _saveRole(initialName, role) {\n    if (initialName === null) {\n      RolesStore.createRole(role).then(this._clearEditRole).then(this.loadRoles);\n    } else {\n      RolesStore.updateRole(initialName, role).then(this._clearEditRole).then(this.loadRoles);\n    }\n  },\n  _clearEditRole() {\n    this.setState({ showEditRole: false, editRole: null });\n  },\n\n  render() {\n    let content = null;\n    if (!this.state.rolesLoaded) {\n      content = <span>Loading roles...</span>;\n    } else if (this.state.showEditRole) {\n      content =\n        (<EditRole initialRole={this.state.editRole} streams={this.state.streams} dashboards={this.state.dashboards}\n                  onSave={this._saveRole} cancelEdit={this._clearEditRole} />);\n    } else {\n      content = (<RoleList roles={this.state.roles}\n                           showEditRole={this._showEditRole}\n                           deleteRole={this._deleteRole} />);\n    }\n\n    let actionButton;\n    if (!this.state.showEditRole) {\n      actionButton = <Button bsStyle=\"success\" onClick={this._showCreateRole}>Add new role</Button>;\n    }\n    return (\n      <Row>\n        <Col md={12}>\n          <PageHeader title=\"Roles\" subpage>\n            <span>\n              Roles bundle permissions which can be assigned to multiple users at once\n            </span>\n            {null}\n            <span>\n              {actionButton}\n            </span>\n          </PageHeader>\n\n          {content}\n        </Col>\n      </Row>\n    );\n  },\n});\n\nexport default RolesComponent;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/users/RolesComponent.jsx","import React from 'react';\nimport { Row, Col } from 'react-bootstrap';\n\nimport RolesComponent from 'components/users/RolesComponent';\nimport { DocumentTitle } from 'components/common';\n\nconst RolesPage = React.createClass({\n  render() {\n    return (\n      <DocumentTitle title=\"Roles\">\n        <Row>\n          <Col md={12}>\n            <RolesComponent />\n          </Col>\n        </Row>\n      </DocumentTitle>\n    );\n  },\n});\n\nexport default RolesPage;\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/RolesPage.jsx"],"sourceRoot":""}