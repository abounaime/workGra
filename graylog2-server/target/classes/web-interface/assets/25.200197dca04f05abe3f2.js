webpackJsonp([25],{1037:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var l=t(1106);Object.defineProperty(exports,"AlarmCallbackHistory",{enumerable:!0,get:function(){return a(l).default}});var n=t(1107);Object.defineProperty(exports,"AlarmCallbackHistoryOverview",{enumerable:!0,get:function(){return a(n).default}})},1106:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var l=t(2),n=a(l),r=t(15),i=t(48),s=t(953),o=t(49),d=a(o),u=n.default.createClass({displayName:"AlarmCallbackHistory",propTypes:{types:n.default.PropTypes.object.isRequired,alarmCallbackHistory:n.default.PropTypes.object.isRequired},render:function(){var e=this.props.alarmCallbackHistory,t=e.alarmcallbackconfiguration,a=this.props.types[t.type],l="error"===e.result.type,o=l?n.default.createElement(r.Label,{bsStyle:"danger"},"Error"):n.default.createElement(r.Label,{bsStyle:"success"},"Sent"),u=n.default.createElement("span",null,a?t.title||"Untitled notification":"Unknown notification"," ",n.default.createElement("small",null,"(",a?a.name:t.type,")")),c=l?n.default.createElement("span",null,"Error sending notification at ",n.default.createElement(i.Timestamp,{dateTime:e.created_at,format:d.default.Formats.DATETIME}),": ",e.result.error):n.default.createElement("span",null,"Notification was sent successfully at ",n.default.createElement(i.Timestamp,{dateTime:e.created_at,format:d.default.Formats.DATETIME}),"."),f=void 0,m=void 0;a?f=n.default.createElement(s.ConfigurationWell,{configuration:t.configuration,typeDefinition:a}):m=n.default.createElement(r.Alert,{bsStyle:"warning"},"The plugin required for this notification is not loaded. Not displaying its configuration.");var p=n.default.createElement(r.Col,{md:12},m,n.default.createElement("div",{className:"alert-callback"},f));return n.default.createElement(i.EntityListItem,{title:u,titleSuffix:o,description:c,contentRow:p})}});exports.default=u,e.exports=exports.default},1107:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var l=t(2),n=a(l),r=t(1),i=a(r),s=t(34),o=a(s),d=t(15),u=t(86),c=a(u),f=t(48),m=t(1037),p=c.default.get("AlarmCallbackHistory"),g=p.AlarmCallbackHistoryStore,h=c.default.get("AlertNotifications"),E=h.AlertNotificationsStore,y=n.default.createClass({displayName:"AlarmCallbackHistoryOverview",propTypes:{alertId:n.default.PropTypes.string.isRequired,streamId:n.default.PropTypes.string.isRequired},mixins:[i.default.connect(g),i.default.connect(E)],_formatHistory:function(e){return n.default.createElement(m.AlarmCallbackHistory,{key:e.id,alarmCallbackHistory:e,types:this.state.availableNotifications})},_isLoading:function(){return!(this.state.histories&&this.state.availableNotifications)},render:function(){if(this._isLoading())return n.default.createElement(f.Spinner,null);var e=this.state.histories.sort(function(e,t){var a=(0,o.default)(e.created_at),l=(0,o.default)(t.created_at);return a.isBefore(l)?-1:l.isBefore(a)?1:0}).map(this._formatHistory);return n.default.createElement(d.Row,null,n.default.createElement(d.Col,{md:12},n.default.createElement(f.EntityList,{bsNoItemsStyle:"info",noItemsText:"No notifications were triggered during the alert.",items:e})))}});exports.default=y,e.exports=exports.default},1108:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var l=t(2),n=a(l),r=t(15),i=t(949),s=t(48),o=t(75),d=a(o),u=t(49),c=a(u),f=t(1189),m=a(f),p=n.default.createClass({displayName:"Alert",propTypes:{alert:n.default.PropTypes.object.isRequired,alertConditions:n.default.PropTypes.array.isRequired,streams:n.default.PropTypes.array.isRequired,conditionTypes:n.default.PropTypes.object.isRequired},getInitialState:function(){return{showAlarmCallbackHistory:!1}},render:function(){var e=this.props.alert,t=this.props.alertConditions.find(function(t){return t.id===e.condition_id}),a=this.props.streams.find(function(t){return t.id===e.stream_id}),l=t?this.props.conditionTypes[t.type]:{},o=void 0;o=t?n.default.createElement("span",null,n.default.createElement(i.LinkContainer,{to:d.default.show_alert(e.id)},n.default.createElement("a",null,t.title||"Untitled alert"))," ",n.default.createElement("small",null,"on stream ",n.default.createElement("em",null,a.title))):n.default.createElement("span",null,n.default.createElement(i.LinkContainer,{to:d.default.show_alert(e.id)},n.default.createElement("a",null,"Unknown alert")));var u=void 0;u=!e.is_interval||e.resolved_at?n.default.createElement(r.Label,{bsStyle:"success"},"Resolved"):n.default.createElement(r.Label,{bsStyle:"danger"},"Unresolved");var f=n.default.createElement(s.Timestamp,{dateTime:e.triggered_at,format:c.default.Formats.DATETIME});f=e.is_interval?n.default.createElement("span",null,"Triggered at ",f,", ",e.resolved_at?n.default.createElement("span",null,"resolved at ",n.default.createElement(s.Timestamp,{dateTime:e.resolved_at,format:c.default.Formats.DATETIME}),"."):n.default.createElement("span",null,n.default.createElement("strong",null,"still ongoing"),".")):n.default.createElement("span",null,"Triggered at ",f);var p=n.default.createElement(r.Col,{md:12},n.default.createElement("dl",{className:"dl-horizontal "+m.default.alertDescription},n.default.createElement("dt",null,"Reason:"),n.default.createElement("dd",null,e.description),n.default.createElement("dt",null,"Type:"),n.default.createElement("dd",null,l.name||"Unknown type. This usually means that the alert condition was deleted since the alert was triggered.")));return n.default.createElement(s.EntityListItem,{key:"entry-list-"+e.id,title:o,titleSuffix:u,description:f,contentRow:p})}});exports.default=p,e.exports=exports.default},1109:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var l=t(2),n=a(l),r=t(15),i=t(987),s=t(1037),o=t(86),d=a(o),u=d.default.get("AlarmCallbackHistory"),c=u.AlarmCallbackHistoryActions,f=d.default.get("AlertNotifications"),m=f.AlertNotificationsActions,p=n.default.createClass({displayName:"AlertDetails",propTypes:{alert:n.default.PropTypes.object.isRequired,condition:n.default.PropTypes.object,conditionType:n.default.PropTypes.object,stream:n.default.PropTypes.object.isRequired},componentDidMount:function(){this._loadData()},_loadData:function(){m.available(),c.list(this.props.alert.stream_id,this.props.alert.id)},render:function(){var e=this.props.alert,t=this.props.stream;return n.default.createElement("div",null,n.default.createElement(r.Row,{className:"content"},n.default.createElement(r.Col,{md:12},n.default.createElement("h2",null,"Alert timeline"),n.default.createElement("p",null,"This is a timeline of events occurred during the alert, you can see more information about some events below."),n.default.createElement(i.AlertTimeline,{alert:e,stream:t,condition:this.props.condition,conditionType:this.props.conditionType}))),n.default.createElement(r.Row,{className:"content"},n.default.createElement(r.Col,{md:12},n.default.createElement("h2",null,"Triggered notifications"),n.default.createElement("p",null,"These are the notifications triggered during the alert, including the configuration they had at the time."),n.default.createElement(s.AlarmCallbackHistoryOverview,{alertId:e.id,streamId:e.stream_id}))),n.default.createElement(r.Row,{className:"content"},n.default.createElement(r.Col,{md:12},n.default.createElement(i.AlertMessages,{alert:e,stream:t}))))}});exports.default=p,e.exports=exports.default},1110:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var l=t(2),n=a(l),r=t(15),i=t(949),s=t(48),o=t(86),d=a(o),u=t(75),c=a(u),f=t(49),m=a(f),p=t(5),g=a(p),h=d.default.get("UniversalSearch"),E=h.UniversalSearchStore,y=n.default.createClass({displayName:"AlertMessages",propTypes:{alert:n.default.PropTypes.object.isRequired,stream:n.default.PropTypes.object.isRequired},getInitialState:function(){return{messages:void 0,totalMessages:0}},componentDidMount:function(){this._loadData()},PAGE_SIZE:20,_getFrom:function(){return m.default.parseFromString(this.props.alert.triggered_at).toMoment().subtract(1,"minute").toISOString()},_getTo:function(){var e=this.props.alert,t=void 0;return t=e.is_interval?e.resolved_at?m.default.parseFromString(e.resolved_at).toMoment().add(1,"minute"):m.default.now():m.default.parseFromString(e.triggered_at).toMoment().add(1,"minute"),t.toISOString()},_loadData:function(e){var t=this,a={from:this._getFrom(),to:this._getTo()};E.search("absolute","*",a,this.props.stream.id,this.PAGE_SIZE,e||1,"timestamp","asc",void 0,!1).then(function(e){e.total_results>0?t.setState({messages:e.messages,totalMessages:e.total_results}):t.setState({messages:[],totalMessages:0})},function(e){g.default.error("Fetching messages during alert failed with error: "+e,"Could not get messages during alert")})},_isLoading:function(){return!this.state.messages},_onPageChange:function(e){this._loadData(e)},_formatMessages:function(e){return e.map(function(e){return n.default.createElement("tr",{key:e.index+"-"+e.id},n.default.createElement("td",null,n.default.createElement(s.Timestamp,{dateTime:e.formatted_fields.timestamp})),n.default.createElement("td",null,e.formatted_fields.message))})},_formatAlertTimeRange:function(){return n.default.createElement("span",null,"(",n.default.createElement(s.Timestamp,{dateTime:this._getFrom(),format:m.default.Formats.DATETIME})," – ",n.default.createElement(s.Timestamp,{dateTime:this._getTo(),format:m.default.Formats.DATETIME}),")")},render:function(){var e={rangetype:"absolute",from:this._getFrom(),to:this._getTo()},t=n.default.createElement("div",null,n.default.createElement("div",{className:"pull-right"},n.default.createElement(i.LinkContainer,{to:c.default.stream_search(this.props.stream.id,"*",e)},n.default.createElement(r.Button,{bsStyle:"info"},"Open in search page"))),n.default.createElement("h2",null,"Messages evaluated"),n.default.createElement("p",null,"These are the messages evaluated around the time of the alert ",this._formatAlertTimeRange()," in stream"," ",n.default.createElement("em",null,this.props.stream.title),"."));if(this._isLoading())return n.default.createElement("div",null,t,n.default.createElement(s.Spinner,null));var a=this.state.messages;return 0===a.length?n.default.createElement("div",null,t,n.default.createElement(r.Alert,{bsStyle:"info"},"No search results found during the time of the alert.")):n.default.createElement("div",null,t,n.default.createElement(s.PaginatedList,{pageSize:this.PAGE_SIZE,onChange:this._onPageChange,totalItems:this.state.totalMessages,showPageSizeSelect:!1},n.default.createElement("div",{className:"table-responsive"},n.default.createElement("table",{className:"table table-striped table-hover table-condensed"},n.default.createElement("thead",null,n.default.createElement("tr",null,n.default.createElement("th",null,"Timestamp"),n.default.createElement("th",null,"Message"))),n.default.createElement("tbody",null,this._formatMessages(a))))))}});exports.default=y,e.exports=exports.default},1111:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var l=t(2),n=a(l),r=t(1),i=a(r),s=t(34),o=a(s),d=t(48),u=t(86),c=a(u),f=t(1190),m=a(f),p=c.default.get("AlarmCallbackHistory"),g=p.AlarmCallbackHistoryStore,h=c.default.get("AlertNotifications"),E=h.AlertNotificationsStore,y=n.default.createClass({displayName:"AlertTimeline",propTypes:{alert:n.default.PropTypes.object.isRequired,stream:n.default.PropTypes.object.isRequired,condition:n.default.PropTypes.object,conditionType:n.default.PropTypes.object},mixins:[i.default.connect(E),i.default.connect(g)],_isLoading:function(){return!this.state.histories||!this.state.availableNotifications},_historiesTimeline:function(e){var t=this,a=[];return 0===this.state.histories.length?[n.default.createElement("dt",{key:"history-title"},n.default.createElement(d.Timestamp,{dateTime:e})),n.default.createElement("dd",{key:"history-desc"},"No notifications were configured for this alert")]:(this.state.histories.sort(function(e,t){var a=(0,o.default)(e.created_at),l=(0,o.default)(t.created_at);return a.isBefore(l)?-1:l.isBefore(a)?1:0}).forEach(function(e){var l=e.alarmcallbackconfiguration,r=t.state.availableNotifications[l.type],i=void 0;i=r?n.default.createElement("span",null,n.default.createElement("em",null,l.title||"Untitled notification")," (",r.name,")"):n.default.createElement("span",null,n.default.createElement("em",null,"Unknown notification")," ",n.default.createElement("small",null,"(",l.type,")")),a.push(n.default.createElement("dt",{key:e.id+"-title"},n.default.createElement(d.Timestamp,{dateTime:e.created_at})),n.default.createElement("dd",{key:e.id+"-desc"},"Graylog ","error"===e.result.type?"could not send":"sent"," ",i," notification"))}),a)},_resolutionTimeline:function(){var e=[];if(this.props.alert.is_interval)if(this.props.alert.resolved_at)e.push(n.default.createElement("dt",{key:"resolution-title"},n.default.createElement(d.Timestamp,{dateTime:this.props.alert.resolved_at})),n.default.createElement("dd",{key:"resolution-desc"},"Condition is no longer satisfied, alert is marked as resolved"));else{var t=this.props.alert.condition_parameters||{},a=t.repeat_notifications||!1,l=a?"Condition is configured to repeat notifications, Graylog will send notifications when evaluating the condition until it is no longer satisfied":"Condition is configured to not repeat notifications";e.push(n.default.createElement("dt",{key:"notifications-title"},n.default.createElement(d.Timestamp,{dateTime:new Date})),n.default.createElement("dd",{key:"notifications-desc"},l),n.default.createElement("dt",{key:"resolution-title"},n.default.createElement(d.Timestamp,{dateTime:new Date})),n.default.createElement("dd",{key:"resolution-desc"},"Condition is still satisfied, ",n.default.createElement("strong",null,"alert is unresolved")))}else e.push(n.default.createElement("dt",{key:"resolution-title"},n.default.createElement(d.Timestamp,{dateTime:this.props.alert.triggered_at})),n.default.createElement("dd",{key:"resolution-desc"},"This alert does not support resolution. It was marked as resolved when triggered."));return e},render:function(){if(this._isLoading())return n.default.createElement(d.Spinner,null);var e=this.props.alert,t=this.props.condition&&Object.keys(this.props.condition).length>0,a=this.props.condition||{},l=this.props.conditionType,r=n.default.createElement(d.Timestamp,{dateTime:e.triggered_at}),i=n.default.createElement("span",null,n.default.createElement("em",null,t?a.title||"Untitled condition":"Unknown condition")," ","(",l.name||a.type||"Unknown condition type",")");return n.default.createElement("dl",{className:"dl-horizontal "+m.default.alertTimeline},n.default.createElement("dt",null,r),n.default.createElement("dd",null,"Graylog checks ",i," condition on stream ",n.default.createElement("em",null,this.props.stream.title)),n.default.createElement("dt",null,r),n.default.createElement("dd",null,e.description),n.default.createElement("dt",null,r),n.default.createElement("dd",null,"Graylog triggers an alert for ",i," and starts sending notifications"),this._historiesTimeline(e.triggered_at),this._resolutionTimeline())}});exports.default=y,e.exports=exports.default},1112:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var l=t(2),n=a(l),r=t(1),i=a(r),s=t(15),o=t(77),d=a(o),u=t(86),c=a(u),f=t(987),m=t(48),p=c.default.get("Alerts"),g=p.AlertsStore,h=p.AlertsActions,E=c.default.get("AlertConditions"),y=E.AlertConditionsStore,_=E.AlertConditionsActions,v=c.default.get("Streams"),T=v.StreamsStore,A=n.default.createClass({displayName:"AlertsComponent",mixins:[i.default.connect(g),i.default.connect(y)],getInitialState:function(){return{displayAllAlerts:!1,loading:!1}},componentDidMount:function(){this.loadData(this.currentPage,this.pageSize)},currentPage:1,pageSize:10,loadData:function(e,t){var a=this;this.setState({loading:!0});var l=[h.listAllPaginated((e-1)*t,t,this.state.displayAllAlerts?"all":"unresolved"),_.listAll(),_.available(),T.listStreams().then(function(e){a.setState({streams:e})})];d.default.all(l).finally(function(){return a.setState({loading:!1})})},_refreshData:function(){this.loadData(this.currentPage,this.pageSize)},_onToggleAllAlerts:function(){var e=this;this.currentPage=1,this.pageSize=10,this.setState({displayAllAlerts:!this.state.displayAllAlerts},function(){return e.loadData(e.currentPage,e.pageSize)})},_onChangePaginatedList:function(e,t){this.currentPage=e,this.pageSize=t,this.loadData(e,t)},_formatAlert:function(e){return n.default.createElement(f.Alert,{key:e.id,alert:e,alertConditions:this.state.allAlertConditions,streams:this.state.streams,conditionTypes:this.state.types})},_isLoading:function(){return!(this.state.alerts&&this.state.allAlertConditions&&this.state.types&&this.state.streams)},render:function(){var e=this;return this._isLoading()?n.default.createElement(m.Spinner,null):n.default.createElement("div",null,n.default.createElement("div",{className:"pull-right"},n.default.createElement(s.Button,{bsStyle:"info",onClick:this._refreshData,disabled:this.state.loading},this.state.loading?"Refreshing...":"Refresh")," ",n.default.createElement(s.Button,{bsStyle:"info",onClick:this._onToggleAllAlerts},"Show ",this.state.displayAllAlerts?"unresolved":"all"," alerts")),n.default.createElement("h2",null,this.state.displayAllAlerts?"Alerts":"Unresolved alerts"),n.default.createElement("p",{className:"description"},"Check your alerts status from here. Currently displaying"," ",this.state.displayAllAlerts?"all":"unresolved"," alerts."),n.default.createElement(m.PaginatedList,{totalItems:this.state.alerts.total,pageSize:this.pageSize,onChange:this._onChangePaginatedList,showPageSizeSelect:!1},n.default.createElement(m.EntityList,{bsNoItemsStyle:this.state.displayAllAlerts?"info":"success",noItemsText:this.state.displayAllAlerts?"There are no alerts to display":"Good news! Currently there are no unresolved alerts.",items:this.state.alerts.alerts.map(function(t){return e._formatAlert(t)})})))}});exports.default=A,e.exports=exports.default},1187:function(e,exports,t){exports=e.exports=t(19)(),exports.push([e.i,".najT6ar9WAygmemWcMjn3 dt{width:50px;text-align:left}.najT6ar9WAygmemWcMjn3 dd{margin-left:70px}",""]),exports.locals={alertDescription:"najT6ar9WAygmemWcMjn3"}},1188:function(e,exports,t){exports=e.exports=t(19)(),exports.push([e.i,".g95Sn8lHxAA_SpWHyk37X dt{text-align:left;width:140px}.g95Sn8lHxAA_SpWHyk37X dd{margin-left:160px}",""]),exports.locals={alertTimeline:"g95Sn8lHxAA_SpWHyk37X"}},1189:function(e,exports,t){var a=t(1187);"string"==typeof a&&(a=[[e.i,a,""]]);t(20)(a,{});a.locals&&(e.exports=a.locals)},1190:function(e,exports,t){var a=t(1188);"string"==typeof a&&(a=[[e.i,a,""]]);t(20)(a,{});a.locals&&(e.exports=a.locals)},1366:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var l=t(2),n=a(l),r=t(1),i=a(r),s=t(15),o=t(949),d=t(987),u=t(957),c=a(u),f=t(48),m=t(75),p=a(m),g=t(952),h=a(g),E=t(18),y=a(E),_=y.default.getStore("CurrentUser"),v=n.default.createClass({displayName:"AlertsPage",mixins:[i.default.connect(_)],render:function(){return n.default.createElement(f.DocumentTitle,{title:"Alerts"},n.default.createElement("div",null,n.default.createElement(f.PageHeader,{title:"Alerts overview"},n.default.createElement("span",null,"Alerts are triggered when conditions you define are satisfied. Graylog will automatically mark alerts as resolved once the status of your conditions change."),n.default.createElement("span",null,"Read more about alerting in the ",n.default.createElement(c.default,{page:h.default.PAGES.ALERTS,text:"documentation"}),"."),n.default.createElement("span",null,n.default.createElement(o.LinkContainer,{to:p.default.ALERTS.CONDITIONS},n.default.createElement(s.Button,{bsStyle:"info"},"Manage conditions"))," ",n.default.createElement(o.LinkContainer,{to:p.default.ALERTS.NOTIFICATIONS},n.default.createElement(s.Button,{bsStyle:"info"},"Manage notifications")))),n.default.createElement(s.Row,{className:"content"},n.default.createElement(s.Col,{md:12},n.default.createElement(d.AlertsComponent,null)))))}});exports.default=v,e.exports=exports.default},987:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var l=t(1108);Object.defineProperty(exports,"Alert",{enumerable:!0,get:function(){return a(l).default}});var n=t(1109);Object.defineProperty(exports,"AlertDetails",{enumerable:!0,get:function(){return a(n).default}});var r=t(1110);Object.defineProperty(exports,"AlertMessages",{enumerable:!0,get:function(){return a(r).default}});var i=t(1112);Object.defineProperty(exports,"AlertsComponent",{enumerable:!0,get:function(){return a(i).default}});var s=t(1111);Object.defineProperty(exports,"AlertTimeline",{enumerable:!0,get:function(){return a(s).default}})}});
//# sourceMappingURL=25.200197dca04f05abe3f2.js.map